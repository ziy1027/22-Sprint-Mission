
!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{},n=(new e.Error).stack;n&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[n]="8720f1a3-44c5-599e-bc6c-3149347f2df9")}catch(e){}}();
(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,717566,e=>{e.v({_lg:"LessonAutoPass-module-scss-module__8iK8UG___lg",_md:"LessonAutoPass-module-scss-module__8iK8UG___md",_sm:"LessonAutoPass-module-scss-module__8iK8UG___sm",container:"LessonAutoPass-module-scss-module__8iK8UG__container",label:"LessonAutoPass-module-scss-module__8iK8UG__label"})},284656,e=>{e.v({_lg:"Countdown-module-scss-module__o7KWTW___lg",_md:"Countdown-module-scss-module__o7KWTW___md",_sm:"Countdown-module-scss-module__o7KWTW___sm",center:"Countdown-module-scss-module__o7KWTW__center",container:"Countdown-module-scss-module__o7KWTW__container",fill:"Countdown-module-scss-module__o7KWTW__fill",hold:"Countdown-module-scss-module__o7KWTW__hold",label:"Countdown-module-scss-module__o7KWTW__label",left:"Countdown-module-scss-module__o7KWTW__left",right:"Countdown-module-scss-module__o7KWTW__right",rotateFill:"Countdown-module-scss-module__o7KWTW__rotateFill"})},56947,e=>{e.v({_lg:"WistiaLessonNav-module-scss-module__Qz57zG___lg",_md:"WistiaLessonNav-module-scss-module__Qz57zG___md",_sm:"WistiaLessonNav-module-scss-module__Qz57zG___sm",autoNext:"WistiaLessonNav-module-scss-module__Qz57zG__autoNext",bottomNav:"WistiaLessonNav-module-scss-module__Qz57zG__bottomNav",container:"WistiaLessonNav-module-scss-module__Qz57zG__container"})},545375,e=>{e.v({_lg:"NavButton-module-scss-module__aRCMGG___lg",_md:"NavButton-module-scss-module__aRCMGG___md",_sm:"NavButton-module-scss-module__aRCMGG___sm",button:"NavButton-module-scss-module__aRCMGG__button",lessonIcon:"NavButton-module-scss-module__aRCMGG__lessonIcon",right:"NavButton-module-scss-module__aRCMGG__right",title:"NavButton-module-scss-module__aRCMGG__title",titleText:"NavButton-module-scss-module__aRCMGG__titleText"})},696370,e=>{e.v({_lg:"ClassroomDoneButton-module-scss-module__czoIAG___lg",_md:"ClassroomDoneButton-module-scss-module__czoIAG___md",_sm:"ClassroomDoneButton-module-scss-module__czoIAG___sm",button:"ClassroomDoneButton-module-scss-module__czoIAG__button",disabled:"ClassroomDoneButton-module-scss-module__czoIAG__disabled",passed:"ClassroomDoneButton-module-scss-module__czoIAG__passed"})},157230,e=>{e.v({_lg:"LessonPassed-module-scss-module__aq_gJG___lg",_md:"LessonPassed-module-scss-module__aq_gJG___md",_sm:"LessonPassed-module-scss-module__aq_gJG___sm",box:"LessonPassed-module-scss-module__aq_gJG__box",checked:"LessonPassed-module-scss-module__aq_gJG__checked",text:"LessonPassed-module-scss-module__aq_gJG__text"})},803278,e=>{e.v({_lg:"FloatUpToast-module-scss-module__vemayG___lg",_md:"FloatUpToast-module-scss-module__vemayG___md",_sm:"FloatUpToast-module-scss-module__vemayG___sm",button:"FloatUpToast-module-scss-module__vemayG__button",container:"FloatUpToast-module-scss-module__vemayG__container","float-down":"FloatUpToast-module-scss-module__vemayG__float-down","float-up":"FloatUpToast-module-scss-module__vemayG__float-up",icon:"FloatUpToast-module-scss-module__vemayG__icon",infinite:"FloatUpToast-module-scss-module__vemayG__infinite",title:"FloatUpToast-module-scss-module__vemayG__title",visible:"FloatUpToast-module-scss-module__vemayG__visible"})},732876,e=>{e.v({mainButtonContainer:"ClassroomBottomNav-module-scss-module__Q0_qGa__mainButtonContainer"})},225907,e=>{e.v({_lg:"ClassroomViewer-module-scss-module___ohyIW___lg",_md:"ClassroomViewer-module-scss-module___ohyIW___md",_sm:"ClassroomViewer-module-scss-module___ohyIW___sm",container:"ClassroomViewer-module-scss-module___ohyIW__container"})},44770,e=>{e.v({_lg:"Layout-module-scss-module__vZq2xW___lg",_md:"Layout-module-scss-module__vZq2xW___md",_sm:"Layout-module-scss-module__vZq2xW___sm",container:"Layout-module-scss-module__vZq2xW__container"})},642829,e=>{e.v({_lg:"BlurContent-module-scss-module__axEIeG___lg",_md:"BlurContent-module-scss-module__axEIeG___md",_sm:"BlurContent-module-scss-module__axEIeG___sm",container:"BlurContent-module-scss-module__axEIeG__container"})},756359,e=>{e.v({_lg:"Footer-module-scss-module__P3ZxCG___lg",_md:"Footer-module-scss-module__P3ZxCG___md",_sm:"Footer-module-scss-module__P3ZxCG___sm",container:"Footer-module-scss-module__P3ZxCG__container"})},202042,e=>{e.v({_lg:"Header-module-scss-module__qd7znW___lg",_md:"Header-module-scss-module__qd7znW___md",_sm:"Header-module-scss-module__qd7znW___sm",closeButton:"Header-module-scss-module__qd7znW__closeButton",container:"Header-module-scss-module__qd7znW__container",progress:"Header-module-scss-module__qd7znW__progress",title:"Header-module-scss-module__qd7znW__title"})},328748,e=>{e.v({_lg:"SideNavDrawer-module-scss-module__AD5hmG___lg",_md:"SideNavDrawer-module-scss-module__AD5hmG___md",_sm:"SideNavDrawer-module-scss-module__AD5hmG___sm",chapters:"SideNavDrawer-module-scss-module__AD5hmG__chapters",container:"SideNavDrawer-module-scss-module__AD5hmG__container",header:"SideNavDrawer-module-scss-module__AD5hmG__header"})},618606,e=>{e.v({_lg:"MiniContentViewer-module-scss-module__PS51ja___lg",_md:"MiniContentViewer-module-scss-module__PS51ja___md",_sm:"MiniContentViewer-module-scss-module__PS51ja___sm",bar:"MiniContentViewer-module-scss-module__PS51ja__bar",container:"MiniContentViewer-module-scss-module__PS51ja__container",content:"MiniContentViewer-module-scss-module__PS51ja__content",footer:"MiniContentViewer-module-scss-module__PS51ja__footer",header:"MiniContentViewer-module-scss-module__PS51ja__header",isVideoLesson:"MiniContentViewer-module-scss-module__PS51ja__isVideoLesson",lessonTitle:"MiniContentViewer-module-scss-module__PS51ja__lessonTitle",resize:"MiniContentViewer-module-scss-module__PS51ja__resize",splitHandlerSection:"MiniContentViewer-module-scss-module__PS51ja__splitHandlerSection",xMark:"MiniContentViewer-module-scss-module__PS51ja__xMark"})},585102,e=>{"use strict";function t(){for(var e,t,s=0,o="";s<arguments.length;)(e=arguments[s++])&&(t=function e(t){var s,o,n="";if("string"==typeof t||"number"==typeof t)n+=t;else if("object"==typeof t)if(Array.isArray(t))for(s=0;s<t.length;s++)t[s]&&(o=e(t[s]))&&(n&&(n+=" "),n+=o);else for(s in t)t[s]&&(n&&(n+=" "),n+=s);return n}(e))&&(o&&(o+=" "),o+=t);return o}e.s(["clsx",()=>t,"default",0,t])},563993,(e,t,s)=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.dontSetMe=function(e,t,s){if(e[t])return Error("Invalid prop ".concat(t," passed to ").concat(s," - do not set this, set it on the child."))},s.findInArray=function(e,t){for(let s=0,o=e.length;s<o;s++)if(t.apply(t,[e[s],s,e]))return e[s]},s.int=function(e){return parseInt(e,10)},s.isFunction=function(e){return"function"==typeof e||"[object Function]"===Object.prototype.toString.call(e)},s.isNum=function(e){return"number"==typeof e&&!isNaN(e)}},230933,(e,t,s)=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.browserPrefixToKey=l,s.browserPrefixToStyle=function(e,t){return t?"-".concat(t.toLowerCase(),"-").concat(e):e},s.default=void 0,s.getPrefix=n;let o=["Moz","Webkit","O","ms"];function n(){var e;let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"transform";if("undefined"==typeof window)return"";let s=null==(e=window.document)||null==(e=e.documentElement)?void 0:e.style;if(!s||t in s)return"";for(let e=0;e<o.length;e++)if(l(t,o[e])in s)return o[e];return""}function l(e,t){return t?"".concat(t).concat(function(e){let t="",s=!0;for(let o=0;o<e.length;o++)s?(t+=e[o].toUpperCase(),s=!1):"-"===e[o]?s=!0:t+=e[o];return t}(e)):e}s.default=n()},122521,(e,t,s)=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.addClassName=d,s.addEvent=function(e,t,s,o){if(!e)return;let n={capture:!0,...o};e.addEventListener?e.addEventListener(t,s,n):e.attachEvent?e.attachEvent("on"+t,s):e["on"+t]=s},s.addUserSelectStyles=function(e){if(!e)return;let t=e.getElementById("react-draggable-style-el");t||((t=e.createElement("style")).type="text/css",t.id="react-draggable-style-el",t.innerHTML=".react-draggable-transparent-selection *::-moz-selection {all: inherit;}\n",t.innerHTML+=".react-draggable-transparent-selection *::selection {all: inherit;}\n",e.getElementsByTagName("head")[0].appendChild(t)),e.body&&d(e.body,"react-draggable-transparent-selection")},s.createCSSTransform=function(e,t){let s=a(e,t,"px");return{[(0,n.browserPrefixToKey)("transform",n.default)]:s}},s.createSVGTransform=function(e,t){return a(e,t,"")},s.getTouch=function(e,t){return e.targetTouches&&(0,o.findInArray)(e.targetTouches,e=>t===e.identifier)||e.changedTouches&&(0,o.findInArray)(e.changedTouches,e=>t===e.identifier)},s.getTouchIdentifier=function(e){return e.targetTouches&&e.targetTouches[0]?e.targetTouches[0].identifier:e.changedTouches&&e.changedTouches[0]?e.changedTouches[0].identifier:void 0},s.getTranslation=a,s.innerHeight=function(e){let t=e.clientHeight,s=e.ownerDocument.defaultView.getComputedStyle(e);return t-=(0,o.int)(s.paddingTop),t-=(0,o.int)(s.paddingBottom)},s.innerWidth=function(e){let t=e.clientWidth,s=e.ownerDocument.defaultView.getComputedStyle(e);return t-=(0,o.int)(s.paddingLeft),t-=(0,o.int)(s.paddingRight)},s.matchesSelector=r,s.matchesSelectorAndParentsTo=function(e,t,s){let o=e;do{if(r(o,t))return!0;if(o===s)break;o=o.parentNode}while(o)return!1},s.offsetXYFromParent=function(e,t,s){let o=t===t.ownerDocument.body?{left:0,top:0}:t.getBoundingClientRect();return{x:(e.clientX+t.scrollLeft-o.left)/s,y:(e.clientY+t.scrollTop-o.top)/s}},s.outerHeight=function(e){let t=e.clientHeight,s=e.ownerDocument.defaultView.getComputedStyle(e);return t+=(0,o.int)(s.borderTopWidth),t+=(0,o.int)(s.borderBottomWidth)},s.outerWidth=function(e){let t=e.clientWidth,s=e.ownerDocument.defaultView.getComputedStyle(e);return t+=(0,o.int)(s.borderLeftWidth),t+=(0,o.int)(s.borderRightWidth)},s.removeClassName=u,s.removeEvent=function(e,t,s,o){if(!e)return;let n={capture:!0,...o};e.removeEventListener?e.removeEventListener(t,s,n):e.detachEvent?e.detachEvent("on"+t,s):e["on"+t]=null},s.removeUserSelectStyles=function(e){if(e)try{if(e.body&&u(e.body,"react-draggable-transparent-selection"),e.selection)e.selection.empty();else{let t=(e.defaultView||window).getSelection();t&&"Caret"!==t.type&&t.removeAllRanges()}}catch(e){}};var o=e.r(563993),n=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var s=l(void 0);if(s&&s.has(e))return s.get(e);var o={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var r=n?Object.getOwnPropertyDescriptor(e,i):null;r&&(r.get||r.set)?Object.defineProperty(o,i,r):o[i]=e[i]}return o.default=e,s&&s.set(e,o),o}(e.r(230933));function l(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,s=new WeakMap;return(l=function(e){return e?s:t})(e)}let i="";function r(e,t){return i||(i=(0,o.findInArray)(["matches","webkitMatchesSelector","mozMatchesSelector","msMatchesSelector","oMatchesSelector"],function(t){return(0,o.isFunction)(e[t])})),!!(0,o.isFunction)(e[i])&&e[i](t)}function a(e,t,s){let{x:o,y:n}=e,l="translate(".concat(o).concat(s,",").concat(n).concat(s,")");if(t){let e="".concat("string"==typeof t.x?t.x:t.x+s),o="".concat("string"==typeof t.y?t.y:t.y+s);l="translate(".concat(e,", ").concat(o,")")+l}return l}function d(e,t){e.classList?e.classList.add(t):e.className.match(new RegExp("(?:^|\\s)".concat(t,"(?!\\S)")))||(e.className+=" ".concat(t))}function u(e,t){e.classList?e.classList.remove(t):e.className=e.className.replace(RegExp("(?:^|\\s)".concat(t,"(?!\\S)"),"g"),"")}},37403,(e,t,s)=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.canDragX=function(e){return"both"===e.props.axis||"x"===e.props.axis},s.canDragY=function(e){return"both"===e.props.axis||"y"===e.props.axis},s.createCoreData=function(e,t,s){let n=!(0,o.isNum)(e.lastX),i=l(e);return n?{node:i,deltaX:0,deltaY:0,lastX:t,lastY:s,x:t,y:s}:{node:i,deltaX:t-e.lastX,deltaY:s-e.lastY,lastX:e.lastX,lastY:e.lastY,x:t,y:s}},s.createDraggableData=function(e,t){let s=e.props.scale;return{node:t.node,x:e.state.x+t.deltaX/s,y:e.state.y+t.deltaY/s,deltaX:t.deltaX/s,deltaY:t.deltaY/s,lastX:e.state.x,lastY:e.state.y}},s.getBoundPosition=function(e,t,s){var i;if(!e.props.bounds)return[t,s];let{bounds:r}=e.props;r="string"==typeof r?r:{left:(i=r).left,top:i.top,right:i.right,bottom:i.bottom};let a=l(e);if("string"==typeof r){let e,{ownerDocument:t}=a,s=t.defaultView;if(!((e="parent"===r?a.parentNode:t.querySelector(r))instanceof s.HTMLElement))throw Error('Bounds selector "'+r+'" could not find an element.');let l=s.getComputedStyle(a),i=s.getComputedStyle(e);r={left:-a.offsetLeft+(0,o.int)(i.paddingLeft)+(0,o.int)(l.marginLeft),top:-a.offsetTop+(0,o.int)(i.paddingTop)+(0,o.int)(l.marginTop),right:(0,n.innerWidth)(e)-(0,n.outerWidth)(a)-a.offsetLeft+(0,o.int)(i.paddingRight)-(0,o.int)(l.marginRight),bottom:(0,n.innerHeight)(e)-(0,n.outerHeight)(a)-a.offsetTop+(0,o.int)(i.paddingBottom)-(0,o.int)(l.marginBottom)}}return(0,o.isNum)(r.right)&&(t=Math.min(t,r.right)),(0,o.isNum)(r.bottom)&&(s=Math.min(s,r.bottom)),(0,o.isNum)(r.left)&&(t=Math.max(t,r.left)),(0,o.isNum)(r.top)&&(s=Math.max(s,r.top)),[t,s]},s.getControlPosition=function(e,t,s){let o="number"==typeof t?(0,n.getTouch)(e,t):null;if("number"==typeof t&&!o)return null;let i=l(s),r=s.props.offsetParent||i.offsetParent||i.ownerDocument.body;return(0,n.offsetXYFromParent)(o||e,r,s.props.scale)},s.snapToGrid=function(e,t,s){return[Math.round(t/e[0])*e[0],Math.round(s/e[1])*e[1]]};var o=e.r(563993),n=e.r(122521);function l(e){let t=e.findDOMNode();if(!t)throw Error("<DraggableCore>: Unmounted during event!");return t}},164363,(e,t,s)=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.default=function(){}},11044,(e,t,s)=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var o=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var s=c(void 0);if(s&&s.has(e))return s.get(e);var o={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var l in e)if("default"!==l&&Object.prototype.hasOwnProperty.call(e,l)){var i=n?Object.getOwnPropertyDescriptor(e,l):null;i&&(i.get||i.set)?Object.defineProperty(o,l,i):o[l]=e[l]}return o.default=e,s&&s.set(e,o),o}(e.r(136960)),n=u(e.r(203537)),l=u(e.r(905674)),i=e.r(122521),r=e.r(37403),a=e.r(563993),d=u(e.r(164363));function u(e){return e&&e.__esModule?e:{default:e}}function c(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,s=new WeakMap;return(c=function(e){return e?s:t})(e)}function m(e,t,s){var o;return(t="symbol"==typeof(o=function(e,t){if("object"!=typeof e||null===e)return e;var s=e[Symbol.toPrimitive];if(void 0!==s){var o=s.call(e,t||"default");if("object"!=typeof o)return o;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?o:String(o))in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}let _={start:"touchstart",move:"touchmove",stop:"touchend"},p={start:"mousedown",move:"mousemove",stop:"mouseup"},g=p;class h extends o.Component{constructor(){super(...arguments),m(this,"dragging",!1),m(this,"lastX",NaN),m(this,"lastY",NaN),m(this,"touchIdentifier",null),m(this,"mounted",!1),m(this,"handleDragStart",e=>{if(this.props.onMouseDown(e),!this.props.allowAnyClick&&"number"==typeof e.button&&0!==e.button)return!1;let t=this.findDOMNode();if(!t||!t.ownerDocument||!t.ownerDocument.body)throw Error("<DraggableCore> not mounted on DragStart!");let{ownerDocument:s}=t;if(this.props.disabled||!(e.target instanceof s.defaultView.Node)||this.props.handle&&!(0,i.matchesSelectorAndParentsTo)(e.target,this.props.handle,t)||this.props.cancel&&(0,i.matchesSelectorAndParentsTo)(e.target,this.props.cancel,t))return;"touchstart"===e.type&&e.preventDefault();let o=(0,i.getTouchIdentifier)(e);this.touchIdentifier=o;let n=(0,r.getControlPosition)(e,o,this);if(null==n)return;let{x:l,y:a}=n,u=(0,r.createCoreData)(this,l,a);(0,d.default)("DraggableCore: handleDragStart: %j",u),(0,d.default)("calling",this.props.onStart),!1!==this.props.onStart(e,u)&&!1!==this.mounted&&(this.props.enableUserSelectHack&&(0,i.addUserSelectStyles)(s),this.dragging=!0,this.lastX=l,this.lastY=a,(0,i.addEvent)(s,g.move,this.handleDrag),(0,i.addEvent)(s,g.stop,this.handleDragStop))}),m(this,"handleDrag",e=>{let t=(0,r.getControlPosition)(e,this.touchIdentifier,this);if(null==t)return;let{x:s,y:o}=t;if(Array.isArray(this.props.grid)){let e=s-this.lastX,t=o-this.lastY;if([e,t]=(0,r.snapToGrid)(this.props.grid,e,t),!e&&!t)return;s=this.lastX+e,o=this.lastY+t}let n=(0,r.createCoreData)(this,s,o);if((0,d.default)("DraggableCore: handleDrag: %j",n),!1===this.props.onDrag(e,n)||!1===this.mounted){try{this.handleDragStop(new MouseEvent("mouseup"))}catch(t){let e=document.createEvent("MouseEvents");e.initMouseEvent("mouseup",!0,!0,window,0,0,0,0,0,!1,!1,!1,!1,0,null),this.handleDragStop(e)}return}this.lastX=s,this.lastY=o}),m(this,"handleDragStop",e=>{if(!this.dragging)return;let t=(0,r.getControlPosition)(e,this.touchIdentifier,this);if(null==t)return;let{x:s,y:o}=t;if(Array.isArray(this.props.grid)){let e=s-this.lastX||0,t=o-this.lastY||0;[e,t]=(0,r.snapToGrid)(this.props.grid,e,t),s=this.lastX+e,o=this.lastY+t}let n=(0,r.createCoreData)(this,s,o);if(!1===this.props.onStop(e,n)||!1===this.mounted)return!1;let l=this.findDOMNode();l&&this.props.enableUserSelectHack&&(0,i.removeUserSelectStyles)(l.ownerDocument),(0,d.default)("DraggableCore: handleDragStop: %j",n),this.dragging=!1,this.lastX=NaN,this.lastY=NaN,l&&((0,d.default)("DraggableCore: Removing handlers"),(0,i.removeEvent)(l.ownerDocument,g.move,this.handleDrag),(0,i.removeEvent)(l.ownerDocument,g.stop,this.handleDragStop))}),m(this,"onMouseDown",e=>(g=p,this.handleDragStart(e))),m(this,"onMouseUp",e=>(g=p,this.handleDragStop(e))),m(this,"onTouchStart",e=>(g=_,this.handleDragStart(e))),m(this,"onTouchEnd",e=>(g=_,this.handleDragStop(e)))}componentDidMount(){this.mounted=!0;let e=this.findDOMNode();e&&(0,i.addEvent)(e,_.start,this.onTouchStart,{passive:!1})}componentWillUnmount(){this.mounted=!1;let e=this.findDOMNode();if(e){let{ownerDocument:t}=e;(0,i.removeEvent)(t,p.move,this.handleDrag),(0,i.removeEvent)(t,_.move,this.handleDrag),(0,i.removeEvent)(t,p.stop,this.handleDragStop),(0,i.removeEvent)(t,_.stop,this.handleDragStop),(0,i.removeEvent)(e,_.start,this.onTouchStart,{passive:!1}),this.props.enableUserSelectHack&&(0,i.removeUserSelectStyles)(t)}}findDOMNode(){var e,t;return null!=(e=this.props)&&e.nodeRef?null==(t=this.props)||null==(t=t.nodeRef)?void 0:t.current:l.default.findDOMNode(this)}render(){return o.cloneElement(o.Children.only(this.props.children),{onMouseDown:this.onMouseDown,onMouseUp:this.onMouseUp,onTouchEnd:this.onTouchEnd})}}s.default=h,m(h,"displayName","DraggableCore"),m(h,"propTypes",{allowAnyClick:n.default.bool,children:n.default.node.isRequired,disabled:n.default.bool,enableUserSelectHack:n.default.bool,offsetParent:function(e,t){if(e[t]&&1!==e[t].nodeType)throw Error("Draggable's offsetParent must be a DOM Node.")},grid:n.default.arrayOf(n.default.number),handle:n.default.string,cancel:n.default.string,nodeRef:n.default.object,onStart:n.default.func,onDrag:n.default.func,onStop:n.default.func,onMouseDown:n.default.func,scale:n.default.number,className:a.dontSetMe,style:a.dontSetMe,transform:a.dontSetMe}),m(h,"defaultProps",{allowAnyClick:!1,disabled:!1,enableUserSelectHack:!0,onStart:function(){},onDrag:function(){},onStop:function(){},onMouseDown:function(){},scale:1})},786639,(e,t,s)=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),Object.defineProperty(s,"DraggableCore",{enumerable:!0,get:function(){return u.default}}),s.default=void 0;var o=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var s=_(void 0);if(s&&s.has(e))return s.get(e);var o={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var l in e)if("default"!==l&&Object.prototype.hasOwnProperty.call(e,l)){var i=n?Object.getOwnPropertyDescriptor(e,l):null;i&&(i.get||i.set)?Object.defineProperty(o,l,i):o[l]=e[l]}return o.default=e,s&&s.set(e,o),o}(e.r(136960)),n=m(e.r(203537)),l=m(e.r(905674)),i=m(e.r(585102)),r=e.r(122521),a=e.r(37403),d=e.r(563993),u=m(e.r(11044)),c=m(e.r(164363));function m(e){return e&&e.__esModule?e:{default:e}}function _(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,s=new WeakMap;return(_=function(e){return e?s:t})(e)}function p(){return(p=Object.assign.bind()).apply(this,arguments)}function g(e,t,s){var o;return(t="symbol"==typeof(o=function(e,t){if("object"!=typeof e||null===e)return e;var s=e[Symbol.toPrimitive];if(void 0!==s){var o=s.call(e,t||"default");if("object"!=typeof o)return o;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?o:String(o))in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}class h extends o.Component{static getDerivedStateFromProps(e,t){let{position:s}=e,{prevPropsPosition:o}=t;return s&&(!o||s.x!==o.x||s.y!==o.y)?((0,c.default)("Draggable: getDerivedStateFromProps %j",{position:s,prevPropsPosition:o}),{x:s.x,y:s.y,prevPropsPosition:{...s}}):null}constructor(e){super(e),g(this,"onDragStart",(e,t)=>{if((0,c.default)("Draggable: onDragStart: %j",t),!1===this.props.onStart(e,(0,a.createDraggableData)(this,t)))return!1;this.setState({dragging:!0,dragged:!0})}),g(this,"onDrag",(e,t)=>{if(!this.state.dragging)return!1;(0,c.default)("Draggable: onDrag: %j",t);let s=(0,a.createDraggableData)(this,t),o={x:s.x,y:s.y,slackX:0,slackY:0};if(this.props.bounds){let{x:e,y:t}=o;o.x+=this.state.slackX,o.y+=this.state.slackY;let[n,l]=(0,a.getBoundPosition)(this,o.x,o.y);o.x=n,o.y=l,o.slackX=this.state.slackX+(e-o.x),o.slackY=this.state.slackY+(t-o.y),s.x=o.x,s.y=o.y,s.deltaX=o.x-this.state.x,s.deltaY=o.y-this.state.y}if(!1===this.props.onDrag(e,s))return!1;this.setState(o)}),g(this,"onDragStop",(e,t)=>{if(!this.state.dragging||!1===this.props.onStop(e,(0,a.createDraggableData)(this,t)))return!1;(0,c.default)("Draggable: onDragStop: %j",t);let s={dragging:!1,slackX:0,slackY:0};if(this.props.position){let{x:e,y:t}=this.props.position;s.x=e,s.y=t}this.setState(s)}),this.state={dragging:!1,dragged:!1,x:e.position?e.position.x:e.defaultPosition.x,y:e.position?e.position.y:e.defaultPosition.y,prevPropsPosition:{...e.position},slackX:0,slackY:0,isElementSVG:!1},e.position&&!(e.onDrag||e.onStop)&&console.warn("A `position` was applied to this <Draggable>, without drag handlers. This will make this component effectively undraggable. Please attach `onDrag` or `onStop` handlers so you can adjust the `position` of this element.")}componentDidMount(){void 0!==window.SVGElement&&this.findDOMNode()instanceof window.SVGElement&&this.setState({isElementSVG:!0})}componentWillUnmount(){this.setState({dragging:!1})}findDOMNode(){var e,t;return null!=(e=null==(t=this.props)||null==(t=t.nodeRef)?void 0:t.current)?e:l.default.findDOMNode(this)}render(){let{axis:e,bounds:t,children:s,defaultPosition:n,defaultClassName:l,defaultClassNameDragging:d,defaultClassNameDragged:c,position:m,positionOffset:_,scale:g,...h}=this.props,f={},y=null,v=!m||this.state.dragging,x=m||n,b={x:(0,a.canDragX)(this)&&v?this.state.x:x.x,y:(0,a.canDragY)(this)&&v?this.state.y:x.y};this.state.isElementSVG?y=(0,r.createSVGTransform)(b,_):f=(0,r.createCSSTransform)(b,_);let C=(0,i.default)(s.props.className||"",l,{[d]:this.state.dragging,[c]:this.state.dragged});return o.createElement(u.default,p({},h,{onStart:this.onDragStart,onDrag:this.onDrag,onStop:this.onDragStop}),o.cloneElement(o.Children.only(s),{className:C,style:{...s.props.style,...f},transform:y}))}}s.default=h,g(h,"displayName","Draggable"),g(h,"propTypes",{...u.default.propTypes,axis:n.default.oneOf(["both","x","y","none"]),bounds:n.default.oneOfType([n.default.shape({left:n.default.number,right:n.default.number,top:n.default.number,bottom:n.default.number}),n.default.string,n.default.oneOf([!1])]),defaultClassName:n.default.string,defaultClassNameDragging:n.default.string,defaultClassNameDragged:n.default.string,defaultPosition:n.default.shape({x:n.default.number,y:n.default.number}),positionOffset:n.default.shape({x:n.default.oneOfType([n.default.number,n.default.string]),y:n.default.oneOfType([n.default.number,n.default.string])}),position:n.default.shape({x:n.default.number,y:n.default.number}),className:d.dontSetMe,style:d.dontSetMe,transform:d.dontSetMe}),g(h,"defaultProps",{...u.default.defaultProps,axis:"both",bounds:!1,defaultClassName:"react-draggable",defaultClassNameDragging:"react-draggable-dragging",defaultClassNameDragged:"react-draggable-dragged",defaultPosition:{x:0,y:0},scale:1})},700172,(e,t,s)=>{"use strict";let{default:o,DraggableCore:n}=e.r(786639);t.exports=o,t.exports.default=o,t.exports.DraggableCore=n},830490,e=>{e.v({_lg:"JupyterEditorLayout-module-scss-module__uZ6Onq___lg",_md:"JupyterEditorLayout-module-scss-module__uZ6Onq___md",_sm:"JupyterEditorLayout-module-scss-module__uZ6Onq___sm",console:"JupyterEditorLayout-module-scss-module__uZ6Onq__console",container:"JupyterEditorLayout-module-scss-module__uZ6Onq__container",iframe:"JupyterEditorLayout-module-scss-module__uZ6Onq__iframe"})},711953,e=>{e.v({_lg:"JupyterConsole-module-scss-module__ELWdgG___lg",_md:"JupyterConsole-module-scss-module__ELWdgG___md",_sm:"JupyterConsole-module-scss-module__ELWdgG___sm",action:"JupyterConsole-module-scss-module__ELWdgG__action",actions:"JupyterConsole-module-scss-module__ELWdgG__actions",container:"JupyterConsole-module-scss-module__ELWdgG__container",resetIcon:"JupyterConsole-module-scss-module__ELWdgG__resetIcon"})},560585,e=>{e.v({_lg:"CanvasForm-module-scss-module__f-VCHq___lg",_md:"CanvasForm-module-scss-module__f-VCHq___md",_sm:"CanvasForm-module-scss-module__f-VCHq___sm",action:"CanvasForm-module-scss-module__f-VCHq__action",buttonWrapper:"CanvasForm-module-scss-module__f-VCHq__buttonWrapper",container:"CanvasForm-module-scss-module__f-VCHq__container",contents:"CanvasForm-module-scss-module__f-VCHq__contents",footer:"CanvasForm-module-scss-module__f-VCHq__footer"})},956712,e=>{e.v({_lg:"SaveIndicator-module-scss-module__w4FNcW___lg",_md:"SaveIndicator-module-scss-module__w4FNcW___md",_sm:"SaveIndicator-module-scss-module__w4FNcW___sm",checked:"SaveIndicator-module-scss-module__w4FNcW__checked",container:"SaveIndicator-module-scss-module__w4FNcW__container",loading:"SaveIndicator-module-scss-module__w4FNcW__loading",loadingIcon:"SaveIndicator-module-scss-module__w4FNcW__loadingIcon"})},57466,e=>{e.v({_lg:"Heading-module-scss-module__xMf3iq___lg",_md:"Heading-module-scss-module__xMf3iq___md",_sm:"Heading-module-scss-module__xMf3iq___sm",container:"Heading-module-scss-module__xMf3iq__container"})},648837,e=>{e.v({container:"Textarea-module-scss-module__wsb1fa__container"})},545298,e=>{e.v({_lg:"MarkdownEditorLayout-module-scss-module__wCkjMW___lg",_md:"MarkdownEditorLayout-module-scss-module__wCkjMW___md",_sm:"MarkdownEditorLayout-module-scss-module__wCkjMW___sm",container:"MarkdownEditorLayout-module-scss-module__wCkjMW__container",footer:"MarkdownEditorLayout-module-scss-module__wCkjMW__footer",header:"MarkdownEditorLayout-module-scss-module__wCkjMW__header",hide:"MarkdownEditorLayout-module-scss-module__wCkjMW__hide",input:"MarkdownEditorLayout-module-scss-module__wCkjMW__input",main:"MarkdownEditorLayout-module-scss-module__wCkjMW__main",tabs:"MarkdownEditorLayout-module-scss-module__wCkjMW__tabs",toolBox:"MarkdownEditorLayout-module-scss-module__wCkjMW__toolBox",viewer:"MarkdownEditorLayout-module-scss-module__wCkjMW__viewer"})},211006,e=>{e.v({_lg:"MarkdownInput-module-scss-module__WSmi8G___lg",_md:"MarkdownInput-module-scss-module__WSmi8G___md",_sm:"MarkdownInput-module-scss-module__WSmi8G___sm",container:"MarkdownInput-module-scss-module__WSmi8G__container",input:"MarkdownInput-module-scss-module__WSmi8G__input"})},445964,e=>{e.v({_lg:"MarkdownViewer-module-scss-module__sa-oMG___lg",_md:"MarkdownViewer-module-scss-module__sa-oMG___md",_sm:"MarkdownViewer-module-scss-module__sa-oMG___sm",container:"MarkdownViewer-module-scss-module__sa-oMG__container",viewer:"MarkdownViewer-module-scss-module__sa-oMG__viewer"})},486854,e=>{e.v({_lg:"MarkdownTools-module-scss-module__vGj00q___lg",_md:"MarkdownTools-module-scss-module__vGj00q___md",_sm:"MarkdownTools-module-scss-module__vGj00q___sm",container:"MarkdownTools-module-scss-module__vGj00q__container",saveIndicator:"MarkdownTools-module-scss-module__vGj00q__saveIndicator"})},414608,e=>{e.v({_lg:"TimestampButton-module-scss-module__p-0nxq___lg",_md:"TimestampButton-module-scss-module__p-0nxq___md",_sm:"TimestampButton-module-scss-module__p-0nxq___sm",container:"TimestampButton-module-scss-module__p-0nxq__container"})},803335,e=>{e.v({_lg:"MemoList-module-scss-module__qVF3Sa___lg",_md:"MemoList-module-scss-module__qVF3Sa___md",_sm:"MemoList-module-scss-module__qVF3Sa___sm",body:"MemoList-module-scss-module__qVF3Sa__body",border:"MemoList-module-scss-module__qVF3Sa__border",buttons:"MemoList-module-scss-module__qVF3Sa__buttons",container:"MemoList-module-scss-module__qVF3Sa__container",filter:"MemoList-module-scss-module__qVF3Sa__filter",header:"MemoList-module-scss-module__qVF3Sa__header",label:"MemoList-module-scss-module__qVF3Sa__label",list:"MemoList-module-scss-module__qVF3Sa__list",more:"MemoList-module-scss-module__qVF3Sa__more",title:"MemoList-module-scss-module__qVF3Sa__title",top:"MemoList-module-scss-module__qVF3Sa__top"})},699977,e=>{e.v({_lg:"MemoItem-module-scss-module__g4VtJG___lg",_md:"MemoItem-module-scss-module__g4VtJG___md",_sm:"MemoItem-module-scss-module__g4VtJG___sm",breadcrumb:"MemoItem-module-scss-module__g4VtJG__breadcrumb",container:"MemoItem-module-scss-module__g4VtJG__container",content:"MemoItem-module-scss-module__g4VtJG__content",link:"MemoItem-module-scss-module__g4VtJG__link",topic:"MemoItem-module-scss-module__g4VtJG__topic"})},20085,e=>{e.v({_lg:"EmptyList-module-scss-module__Nw5Hlq___lg",_md:"EmptyList-module-scss-module__Nw5Hlq___md",_sm:"EmptyList-module-scss-module__Nw5Hlq___sm",container:"EmptyList-module-scss-module__Nw5Hlq__container",description:"EmptyList-module-scss-module__Nw5Hlq__description",icon:"EmptyList-module-scss-module__Nw5Hlq__icon"})},95342,e=>{e.v({_lg:"Memo-module-scss-module__a32_tG___lg",_md:"Memo-module-scss-module__a32_tG___md",_sm:"Memo-module-scss-module__a32_tG___sm",back:"Memo-module-scss-module__a32_tG__back",buttons:"Memo-module-scss-module__a32_tG__buttons",checked:"Memo-module-scss-module__a32_tG__checked",container:"Memo-module-scss-module__a32_tG__container",disabled:"Memo-module-scss-module__a32_tG__disabled",editor:"Memo-module-scss-module__a32_tG__editor",header:"Memo-module-scss-module__a32_tG__header",save:"Memo-module-scss-module__a32_tG__save",saving:"Memo-module-scss-module__a32_tG__saving"})},112158,e=>{e.v({_lg:"ReportModalContent-module-scss-module__h4GBqa___lg",_md:"ReportModalContent-module-scss-module__h4GBqa___md",_sm:"ReportModalContent-module-scss-module__h4GBqa___sm",button:"ReportModalContent-module-scss-module__h4GBqa__button",container:"ReportModalContent-module-scss-module__h4GBqa__container"})},715559,e=>{e.v({_lg:"DeprecatedNotification-module-scss-module__rJw-6W___lg",_md:"DeprecatedNotification-module-scss-module__rJw-6W___md",_sm:"DeprecatedNotification-module-scss-module__rJw-6W___sm",closeButton:"DeprecatedNotification-module-scss-module__rJw-6W__closeButton",container:"DeprecatedNotification-module-scss-module__rJw-6W__container",modal:"DeprecatedNotification-module-scss-module__rJw-6W__modal",notification:"DeprecatedNotification-module-scss-module__rJw-6W__notification"})},846812,e=>{e.v({_lg:"QuestionListItem-module-scss-module__nPIWLG___lg",_md:"QuestionListItem-module-scss-module__nPIWLG___md",_sm:"QuestionListItem-module-scss-module__nPIWLG___sm",accepted:"QuestionListItem-module-scss-module__nPIWLG__accepted",answer:"QuestionListItem-module-scss-module__nPIWLG__answer",answerWrapper:"QuestionListItem-module-scss-module__nPIWLG__answerWrapper",body:"QuestionListItem-module-scss-module__nPIWLG__body",checkIcon:"QuestionListItem-module-scss-module__nPIWLG__checkIcon",container:"QuestionListItem-module-scss-module__nPIWLG__container",content:"QuestionListItem-module-scss-module__nPIWLG__content",hoverUnderline:"QuestionListItem-module-scss-module__nPIWLG__hoverUnderline",title:"QuestionListItem-module-scss-module__nPIWLG__title"})},801340,e=>{e.v({_lg:"UnansweredQuestion-module-scss-module__jDypnq___lg",_md:"UnansweredQuestion-module-scss-module__jDypnq___md",_sm:"UnansweredQuestion-module-scss-module__jDypnq___sm",container:"UnansweredQuestion-module-scss-module__jDypnq__container",header:"UnansweredQuestion-module-scss-module__jDypnq__header",point:"UnansweredQuestion-module-scss-module__jDypnq__point",questionWrapper:"UnansweredQuestion-module-scss-module__jDypnq__questionWrapper",title:"UnansweredQuestion-module-scss-module__jDypnq__title"})},2191,e=>{e.v({_lg:"RelatedQuestions-module-scss-module__9EiqCG___lg",_md:"RelatedQuestions-module-scss-module__9EiqCG___md",_sm:"RelatedQuestions-module-scss-module__9EiqCG___sm",container:"RelatedQuestions-module-scss-module__9EiqCG__container",emptyText:"RelatedQuestions-module-scss-module__9EiqCG__emptyText",questionWrapper:"RelatedQuestions-module-scss-module__9EiqCG__questionWrapper"})},783880,e=>{e.v({_lg:"RelatedQuestionSection-module-scss-module__f3l05q___lg",_md:"RelatedQuestionSection-module-scss-module__f3l05q___md",_sm:"RelatedQuestionSection-module-scss-module__f3l05q___sm",buttons:"RelatedQuestionSection-module-scss-module__f3l05q__buttons",container:"RelatedQuestionSection-module-scss-module__f3l05q__container",title:"RelatedQuestionSection-module-scss-module__f3l05q__title"})},60258,e=>{e.v({_lg:"ClassroomContent-module-scss-module__arCpPW___lg",_md:"ClassroomContent-module-scss-module__arCpPW___md",_sm:"ClassroomContent-module-scss-module__arCpPW___sm",deprecatedNotification:"ClassroomContent-module-scss-module__arCpPW__deprecatedNotification","fade-in":"ClassroomContent-module-scss-module__arCpPW__fade-in","fade-out":"ClassroomContent-module-scss-module__arCpPW__fade-out",lessonContentViewer:"ClassroomContent-module-scss-module__arCpPW__lessonContentViewer",selfCheckWrapper:"ClassroomContent-module-scss-module__arCpPW__selfCheckWrapper",timestampButton:"ClassroomContent-module-scss-module__arCpPW__timestampButton"})},362169,e=>{e.v({_lg:"noteChildHover-module-scss-module__9mGX0W___lg",_md:"noteChildHover-module-scss-module__9mGX0W___md",_sm:"noteChildHover-module-scss-module__9mGX0W___sm",container:"noteChildHover-module-scss-module__9mGX0W__container",fadeIn:"noteChildHover-module-scss-module__9mGX0W__fadeIn",overlay:"noteChildHover-module-scss-module__9mGX0W__overlay",target:"noteChildHover-module-scss-module__9mGX0W__target",trigger:"noteChildHover-module-scss-module__9mGX0W__trigger"})},694396,e=>{e.v({_lg:"SelfCheckViewer-module-scss-module__6Xqv1q___lg",_md:"SelfCheckViewer-module-scss-module__6Xqv1q___md",_sm:"SelfCheckViewer-module-scss-module__6Xqv1q___sm",checkBox:"SelfCheckViewer-module-scss-module__6Xqv1q__checkBox",checkLabel:"SelfCheckViewer-module-scss-module__6Xqv1q__checkLabel",close:"SelfCheckViewer-module-scss-module__6Xqv1q__close",container:"SelfCheckViewer-module-scss-module__6Xqv1q__container",content:"SelfCheckViewer-module-scss-module__6Xqv1q__content",guide:"SelfCheckViewer-module-scss-module__6Xqv1q__guide",guides:"SelfCheckViewer-module-scss-module__6Xqv1q__guides",header:"SelfCheckViewer-module-scss-module__6Xqv1q__header",indicator:"SelfCheckViewer-module-scss-module__6Xqv1q__indicator",indicatorLabel:"SelfCheckViewer-module-scss-module__6Xqv1q__indicatorLabel",progress:"SelfCheckViewer-module-scss-module__6Xqv1q__progress",progressBar:"SelfCheckViewer-module-scss-module__6Xqv1q__progressBar",progressCircle:"SelfCheckViewer-module-scss-module__6Xqv1q__progressCircle",subtitle:"SelfCheckViewer-module-scss-module__6Xqv1q__subtitle",title:"SelfCheckViewer-module-scss-module__6Xqv1q__title"})},628721,e=>{e.v({_lg:"TopicInFiveDaysMissionProgress-module-scss-module__d8Ac6W___lg",_md:"TopicInFiveDaysMissionProgress-module-scss-module__d8Ac6W___md",_sm:"TopicInFiveDaysMissionProgress-module-scss-module__d8Ac6W___sm",container:"TopicInFiveDaysMissionProgress-module-scss-module__d8Ac6W__container",progress:"TopicInFiveDaysMissionProgress-module-scss-module__d8Ac6W__progress",track:"TopicInFiveDaysMissionProgress-module-scss-module__d8Ac6W__track"})},801294,e=>{e.v({_lg:"GlowingFloat-module-scss-module__sE-VAq___lg",_md:"GlowingFloat-module-scss-module__sE-VAq___md",_sm:"GlowingFloat-module-scss-module__sE-VAq___sm",container:"GlowingFloat-module-scss-module__sE-VAq__container",tooltip:"GlowingFloat-module-scss-module__sE-VAq__tooltip"})},78790,e=>{e.v({_lg:"GlowingTooltip-module-scss-module__hzobaq___lg",_md:"GlowingTooltip-module-scss-module__hzobaq___md",_sm:"GlowingTooltip-module-scss-module__hzobaq___sm",arrow:"GlowingTooltip-module-scss-module__hzobaq__arrow",blink:"GlowingTooltip-module-scss-module__hzobaq__blink","blink-dark":"GlowingTooltip-module-scss-module__hzobaq__blink-dark","blink-purple":"GlowingTooltip-module-scss-module__hzobaq__blink-purple","blink-purple-dark":"GlowingTooltip-module-scss-module__hzobaq__blink-purple-dark",close:"GlowingTooltip-module-scss-module__hzobaq__close",content:"GlowingTooltip-module-scss-module__hzobaq__content",description:"GlowingTooltip-module-scss-module__hzobaq__description",description2:"GlowingTooltip-module-scss-module__hzobaq__description2",purple:"GlowingTooltip-module-scss-module__hzobaq__purple",title:"GlowingTooltip-module-scss-module__hzobaq__title",tooltip:"GlowingTooltip-module-scss-module__hzobaq__tooltip"})},748679,e=>{e.v({_lg:"Header-module-scss-module__BAdnwq___lg",_md:"Header-module-scss-module__BAdnwq___md",_sm:"Header-module-scss-module__BAdnwq___sm",activeAnimation:"Header-module-scss-module__BAdnwq__activeAnimation",buttons:"Header-module-scss-module__BAdnwq__buttons",container:"Header-module-scss-module__BAdnwq__container",contentWrapper:"Header-module-scss-module__BAdnwq__contentWrapper",desktop:"Header-module-scss-module__BAdnwq__desktop",hamburger:"Header-module-scss-module__BAdnwq__hamburger",left:"Header-module-scss-module__BAdnwq__left",lessonTitle:"Header-module-scss-module__BAdnwq__lessonTitle",lessonTitleButton:"Header-module-scss-module__BAdnwq__lessonTitleButton",medium:"Header-module-scss-module__BAdnwq__medium",menuButton:"Header-module-scss-module__BAdnwq__menuButton",menus:"Header-module-scss-module__BAdnwq__menus",realTimeViews:"Header-module-scss-module__BAdnwq__realTimeViews",rolling:"Header-module-scss-module__BAdnwq__rolling",subscriptionNudge:"Header-module-scss-module__BAdnwq__subscriptionNudge",widgetButton:"Header-module-scss-module__BAdnwq__widgetButton",widgetButtonWrapper:"Header-module-scss-module__BAdnwq__widgetButtonWrapper",widgetButtons:"Header-module-scss-module__BAdnwq__widgetButtons"})},783645,e=>{e.v({_lg:"WidgetButtons-module-scss-module__Cch3Oq___lg",_md:"WidgetButtons-module-scss-module__Cch3Oq___md",_sm:"WidgetButtons-module-scss-module__Cch3Oq___sm",activeAnimation:"WidgetButtons-module-scss-module__Cch3Oq__activeAnimation",container:"WidgetButtons-module-scss-module__Cch3Oq__container",rolling:"WidgetButtons-module-scss-module__Cch3Oq__rolling",widgetButton:"WidgetButtons-module-scss-module__Cch3Oq__widgetButton",widgetButtons:"WidgetButtons-module-scss-module__Cch3Oq__widgetButtons"})},525853,e=>{e.v({_lg:"NGVProfile-module-scss-module__1mpahG___lg",_md:"NGVProfile-module-scss-module__1mpahG___md",_sm:"NGVProfile-module-scss-module__1mpahG___sm",container:"NGVProfile-module-scss-module__1mpahG__container",thumbnail:"NGVProfile-module-scss-module__1mpahG__thumbnail",thumbnailBtn:"NGVProfile-module-scss-module__1mpahG__thumbnailBtn"})},197865,e=>{e.v({_lg:"GlowingActionButton-module-scss-module__ooh5mW___lg",_md:"GlowingActionButton-module-scss-module__ooh5mW___md",_sm:"GlowingActionButton-module-scss-module__ooh5mW___sm",anchor:"GlowingActionButton-module-scss-module__ooh5mW__anchor",container:"GlowingActionButton-module-scss-module__ooh5mW__container",purple:"GlowingActionButton-module-scss-module__ooh5mW__purple",tooltip:"GlowingActionButton-module-scss-module__ooh5mW__tooltip"})},726383,e=>{e.v({_lg:"GuruButton-module-scss-module__K9qbia___lg",_md:"GuruButton-module-scss-module__K9qbia___md",_sm:"GuruButton-module-scss-module__K9qbia___sm",container:"GuruButton-module-scss-module__K9qbia__container",label:"GuruButton-module-scss-module__K9qbia__label",strong:"GuruButton-module-scss-module__K9qbia__strong",wrapper:"GuruButton-module-scss-module__K9qbia__wrapper"})},992019,e=>{e.v({_lg:"ClassroomSettingModal-module-scss-module__bbzNBG___lg",_md:"ClassroomSettingModal-module-scss-module__bbzNBG___md",_sm:"ClassroomSettingModal-module-scss-module__bbzNBG___sm",container:"ClassroomSettingModal-module-scss-module__bbzNBG__container"})},781089,e=>{e.v({_lg:"SettingOption-module-scss-module__61yN3W___lg",_md:"SettingOption-module-scss-module__61yN3W___md",_sm:"SettingOption-module-scss-module__61yN3W___sm",container:"SettingOption-module-scss-module__61yN3W__container",content:"SettingOption-module-scss-module__61yN3W__content",description:"SettingOption-module-scss-module__61yN3W__description",field:"SettingOption-module-scss-module__61yN3W__field",iconWrapper:"SettingOption-module-scss-module__61yN3W__iconWrapper",title:"SettingOption-module-scss-module__61yN3W__title"})},78140,e=>{e.v({_lg:"WidgetDrawer-module-scss-module__xK5sGW___lg",_md:"WidgetDrawer-module-scss-module__xK5sGW___md",_sm:"WidgetDrawer-module-scss-module__xK5sGW___sm",body:"WidgetDrawer-module-scss-module__xK5sGW__body",container:"WidgetDrawer-module-scss-module__xK5sGW__container",content:"WidgetDrawer-module-scss-module__xK5sGW__content",header:"WidgetDrawer-module-scss-module__xK5sGW__header",title:"WidgetDrawer-module-scss-module__xK5sGW__title"})},858319,e=>{e.v({_lg:"StreakWidget-module-scss-module__j6N_6W___lg",_md:"StreakWidget-module-scss-module__j6N_6W___md",_sm:"StreakWidget-module-scss-module__j6N_6W___sm",buttons:"StreakWidget-module-scss-module__j6N_6W__buttons",container:"StreakWidget-module-scss-module__j6N_6W__container",daily:"StreakWidget-module-scss-module__j6N_6W__daily",graph:"StreakWidget-module-scss-module__j6N_6W__graph",graphDate:"StreakWidget-module-scss-module__j6N_6W__graphDate",graphTitle:"StreakWidget-module-scss-module__j6N_6W__graphTitle",streakContainer:"StreakWidget-module-scss-module__j6N_6W__streakContainer",streakCount:"StreakWidget-module-scss-module__j6N_6W__streakCount",streakText:"StreakWidget-module-scss-module__j6N_6W__streakText",streakTitle:"StreakWidget-module-scss-module__j6N_6W__streakTitle",streakWrapper:"StreakWidget-module-scss-module__j6N_6W__streakWrapper",titleWrapper:"StreakWidget-module-scss-module__j6N_6W__titleWrapper"})},829727,e=>{e.v({_lg:"TilShareModalContent-module-scss-module__CraDVW___lg",_md:"TilShareModalContent-module-scss-module__CraDVW___md",_sm:"TilShareModalContent-module-scss-module__CraDVW___sm",container:"TilShareModalContent-module-scss-module__CraDVW__container",copyButton:"TilShareModalContent-module-scss-module__CraDVW__copyButton",input:"TilShareModalContent-module-scss-module__CraDVW__input",inputWrapper:"TilShareModalContent-module-scss-module__CraDVW__inputWrapper",mobileShare:"TilShareModalContent-module-scss-module__CraDVW__mobileShare"})},802080,e=>{e.v({_lg:"TargetGraduationDateModalContent-module-scss-module__bv1mTq___lg",_md:"TargetGraduationDateModalContent-module-scss-module__bv1mTq___md",_sm:"TargetGraduationDateModalContent-module-scss-module__bv1mTq___sm",button:"TargetGraduationDateModalContent-module-scss-module__bv1mTq__button","datePicker-popper":"TargetGraduationDateModalContent-module-scss-module__bv1mTq__datePicker-popper",datePickerWrapper:"TargetGraduationDateModalContent-module-scss-module__bv1mTq__datePickerWrapper",description:"TargetGraduationDateModalContent-module-scss-module__bv1mTq__description",motivation:"TargetGraduationDateModalContent-module-scss-module__bv1mTq__motivation",point:"TargetGraduationDateModalContent-module-scss-module__bv1mTq__point"})},773894,e=>{e.v({_lg:"Pacemaker-module-scss-module__hYN5eq___lg",_md:"Pacemaker-module-scss-module__hYN5eq___md",_sm:"Pacemaker-module-scss-module__hYN5eq___sm",activeAnimation:"Pacemaker-module-scss-module__hYN5eq__activeAnimation",arrow:"Pacemaker-module-scss-module__hYN5eq__arrow",arrowWrapper:"Pacemaker-module-scss-module__hYN5eq__arrowWrapper",arrows:"Pacemaker-module-scss-module__hYN5eq__arrows",avatar:"Pacemaker-module-scss-module__hYN5eq__avatar",averageLesson:"Pacemaker-module-scss-module__hYN5eq__averageLesson",averageText:"Pacemaker-module-scss-module__hYN5eq__averageText",bar:"Pacemaker-module-scss-module__hYN5eq__bar",barInfo:"Pacemaker-module-scss-module__hYN5eq__barInfo",bubble:"Pacemaker-module-scss-module__hYN5eq__bubble",bubbleText:"Pacemaker-module-scss-module__hYN5eq__bubbleText",button:"Pacemaker-module-scss-module__hYN5eq__button",container:"Pacemaker-module-scss-module__hYN5eq__container",flag:"Pacemaker-module-scss-module__hYN5eq__flag",flagBubble:"Pacemaker-module-scss-module__hYN5eq__flagBubble",flagBubbleText:"Pacemaker-module-scss-module__hYN5eq__flagBubbleText",flagLottie:"Pacemaker-module-scss-module__hYN5eq__flagLottie",header:"Pacemaker-module-scss-module__hYN5eq__header",myProgress:"Pacemaker-module-scss-module__hYN5eq__myProgress",ongoing:"Pacemaker-module-scss-module__hYN5eq__ongoing",option1:"Pacemaker-module-scss-module__hYN5eq__option1",option2:"Pacemaker-module-scss-module__hYN5eq__option2",optionWrapper:"Pacemaker-module-scss-module__hYN5eq__optionWrapper",pacemakerFlag:"Pacemaker-module-scss-module__hYN5eq__pacemakerFlag",pacemakerOption2:"Pacemaker-module-scss-module__hYN5eq__pacemakerOption2",point:"Pacemaker-module-scss-module__hYN5eq__point",progressBorder:"Pacemaker-module-scss-module__hYN5eq__progressBorder",purpleOption:"Pacemaker-module-scss-module__hYN5eq__purpleOption",slide:"Pacemaker-module-scss-module__hYN5eq__slide",targetProgress:"Pacemaker-module-scss-module__hYN5eq__targetProgress",title:"Pacemaker-module-scss-module__hYN5eq__title",titleWrapper:"Pacemaker-module-scss-module__hYN5eq__titleWrapper",topicLabel:"Pacemaker-module-scss-module__hYN5eq__topicLabel",topicTitle:"Pacemaker-module-scss-module__hYN5eq__topicTitle",trophy:"Pacemaker-module-scss-module__hYN5eq__trophy",unsetTarget:"Pacemaker-module-scss-module__hYN5eq__unsetTarget"})},906873,e=>{e.v({_lg:"ClassroomFooter-module-scss-module__fGW2EW___lg",_md:"ClassroomFooter-module-scss-module__fGW2EW___md",_sm:"ClassroomFooter-module-scss-module__fGW2EW___sm",homeAnchor:"ClassroomFooter-module-scss-module__fGW2EW__homeAnchor",homeButton:"ClassroomFooter-module-scss-module__fGW2EW__homeButton",homeText:"ClassroomFooter-module-scss-module__fGW2EW__homeText"})},31821,e=>{e.v({_lg:"Layout-module-scss-module__tqsCCa___lg",_md:"Layout-module-scss-module__tqsCCa___md",_sm:"Layout-module-scss-module__tqsCCa___sm",buttons:"Layout-module-scss-module__tqsCCa__buttons",container:"Layout-module-scss-module__tqsCCa__container",contents:"Layout-module-scss-module__tqsCCa__contents",left:"Layout-module-scss-module__tqsCCa__left",right:"Layout-module-scss-module__tqsCCa__right"})},165529,e=>{"use strict";var t,s,o,n,l,i,r,a=e.i(94601),d=e.i(866539),u=e.i(46533),c=e.i(136960),m=e.i(351623),_=e.i(280429);let p=m.gql`
  query GetIsFutureUnitPeriodTopic($key: String!) {
    topicByResourceKey(key: $key) {
      id
      currentUserUnitPeriod {
        isFuture
      }
    }
  }
`;var g=e.i(423833),h=e.i(585223),f=e.i(664402);let y=m.gql`
  query PingConnectionConflict {
    pingConnectionConflict {
      hasDeviceId
    }
  }
`;var v=e.i(37397);let x=async()=>{await v.default.get("/api/setDeviceId")};var b=e.i(957131),C=e.i(940275),w=e.i(446220),j=e.i(913212),S=e.i(473503),N=e.i(42075),k=e.i(568552),T=e.i(905674);let I="lessonNavigation";class M{static handle=I;static type="above-control-bar";static setVisible;static setIsFullScreen;static autoPlayNext=!1;wrapper;video;unbinds=[];constructor(e){this.wrapper=document.createElement("div"),this.wrapper.classList.add(I),this.video=e,this.unbinds.push(this.video.on("end",()=>this.showNavigation())),this.unbinds.push(this.video.on("play",()=>this.hideNavigation())),this.unbinds.push(this.video.on("cancelfullscreen",()=>{M.setIsFullScreen?.(!1)})),this.unbinds.push(this.video.on("enterfullscreen",()=>{M.setIsFullScreen?.(!0)}))}mount(e){e.appendChild(this.wrapper),M.autoPlayNext&&(this.video.play(),M.autoPlayNext=!1)}showNavigation(){M.setVisible?.(!0),this.wrapper.classList.add("visible")}hideNavigation(){M.setVisible?.(!1),this.wrapper.classList.remove("visible")}destroy(){this.unbinds.forEach(e=>e()),this.unbinds=[]}}var E=e.i(350890),A=e.i(717566),L=e.i(498952),G=e.i(284656);let D=E.default.bind(G.default),q=({amount:e,onFinish:t})=>{let[s,o]=(0,c.useState)(e);return(0,c.useEffect)(()=>{let e=setInterval(()=>{o(t=>{let s=Math.max(0,t-1);return s<1&&clearInterval(e),s})},1e3);return()=>{clearInterval(e)}},[e]),(0,c.useEffect)(()=>{s<1&&t?.()},[s]),(0,a.jsxs)("div",{className:D("container"),children:[(0,a.jsx)("div",{className:D("hold","left"),children:(0,a.jsx)("div",{className:D("fill"),style:{"--duration":`${e/2}s`}})}),(0,a.jsx)("div",{className:D("hold","right"),children:(0,a.jsx)("div",{className:D("fill"),style:{"--duration":`${e/2}s`}})}),(0,a.jsx)("div",{className:D("center"),children:(0,a.jsx)("span",{className:D("label"),children:s})})]})},R=E.default.bind(A.default),P=({active:e,onToggle:t,onCountFinish:s})=>(0,a.jsxs)("div",{className:R("container"),children:[e&&(0,a.jsx)(q,{amount:5,onFinish:s}),(0,a.jsx)("span",{className:R("label"),children:e?"  .":"   "}),(0,a.jsx)(L.Toggle,{active:e,onClick:()=>{t(!e)}})]});var W=e.i(396742),B=e.i(453126),F=e.i(200571);let V=({onCountFinish:e})=>{let{submittable:t,handleClickCompleteButton:s}=(0,W.useLessonComplete)(),{lessonAutoPass:o,setLessonAutoPass:n}=(0,F.useClassroomSetting)();return t?(0,a.jsx)(P,{active:o,onToggle:e=>{n(e),B.Amplitude.logEvent("click.video_lesson_toggle_keeping_complete",{activity:e})},onCountFinish:()=>{s(),o&&t&&(e?.(),B.Amplitude.logEvent("complete.video_lesson_by_auto"))}}):null};var O=e.i(852396),U=e.i(56947),$=e.i(906969),H=e.i(896267),K=e.i(45872),z=e.i(168872),Y=e.i(545375),X=e.i(551261);let Q=E.default.bind(Y.default),J=({direction:e,link:t="",onClick:s,lesson:o})=>(0,a.jsxs)(z.default,{href:t,prefetch:!1,passHref:!0,role:"link",className:Q("button",e),onClick:e=>{s&&s(e)},tabIndex:0,children:[(0,a.jsx)(K.Icon,{name:"direction",thickness:"bold",rotate:"right"===e?90:270}),(0,a.jsxs)("div",{className:Q("title"),children:[o.icon&&(0,a.jsx)(K.Icon,{name:o.icon,className:Q("lessonIcon")}),(0,a.jsx)("div",{className:Q("titleText"),children:(0,X.getLessonTitle)(o)})]})]});var Z=e.i(696370);let ee=E.default.bind(Z.default),et=({id:e,disabled:t=!1,passed:s,onClick:o,onMouseEnter:n,children:l})=>(0,a.jsx)("button",{id:e,type:"button",onClick:o,onMouseEnter:n,className:ee("button",{passed:s,disabled:t}),disabled:t,children:l});var es=e.i(157230);let eo=E.default.bind(es.default),en=()=>(0,a.jsxs)(et,{passed:!0,children:[(0,a.jsx)(K.Icon,{name:"check",thickness:"bold",color:"--purple50",className:eo("checked")}),""]});var el=e.i(404006),ei=e.i(682930),er=e.i(896567);let ea="shouldNotShowMarkDoneReminder",ed=()=>({getShouldNotShowMarkDoneReminder:()=>!!(0,er.getLocalStorage)(ea,!0),setShouldNotShowMarkDoneReminder:e=>{(0,er.setLocalStorage)(ea,JSON.stringify(e))}});var eu=e.i(567869),ec=e.i(803278);let em=E.default.bind(ec.default),e_=({className:e,title:t,visible:s,iconName:o,buttonText:n,hasCloseButton:l=!1,onClick:i,onClose:r,onVisible:d})=>{(0,c.useEffect)(()=>{s&&d?.()},[s]);let u=async()=>{await i?.(),r?.()};return(0,a.jsxs)("div",{className:em("container",e,{visible:s,infinite:l}),onAnimationEnd:e=>{e.animationName.indexOf("float-down")>-1&&r?.()},children:[(0,a.jsx)("p",{className:em("title"),children:t}),(0,a.jsxs)("button",{type:"button",className:em("button"),onClick:u,children:[(0,a.jsx)(K.Icon,{name:o,color:"--txt-purple-primary"}),n]}),l&&(0,a.jsx)(K.Icon,{name:"xMark",size:"medium",containerClassName:em("icon"),onClick:r})]})};var ep=e.i(804623),eg=e.i(938160),eh=e.i(829882);let ef=m.gql`
  fragment QuestionFields on Question {
    id
    typedId
    highlightedTitle
    title
    truncatedContent
    content
    status
    answers {
      id
      typedId
    }
    acceptedAnswer {
      id
      typedId
    }
  }
  query LessonRelatedQuestions($topicResourceKey: String!, $lessonResourceKey: String!) {
    topicByResourceKey(key: $topicResourceKey) {
      id
      lessonByResourceKey(key: $lessonResourceKey) {
        id
        relatedQuestions {
          ...QuestionFields
        }
        sampleUnansweredQuestion {
          ...QuestionFields
        }
      }
    }
  }
`,ey=({input:e})=>{let{data:t,loading:s}=(0,_.useQuery)(ef,{variables:e});return{relatedQuestions:t?.topicByResourceKey?.lessonByResourceKey?.relatedQuestions,sampleUnansweredQuestion:t?.topicByResourceKey?.lessonByResourceKey?.sampleUnansweredQuestion,loading:s}};var ev=e.i(732876),ex=e.i(318706),eb=e.i(819731);let eC=m.gql`
  query GetNextClassroomStudyGroupStep($topicResourceKey: String!) {
    currentUserNextClassroomStudyGroupStep(topicResourceKey: $topicResourceKey) {
      classroomStudyGroupStep {
        ...on TopicStudyGroupStep {
          id
          typedId
          topicResourceKey
          topic {
            id
            slug
            chapters(first: 1) {
              id
              lessons(first: 1) {
                id
                code
                seqId
              }
            }
          }
        }
        ...on ProjectTopicStudyGroupStep {
          id
          typedId
          projectTopicResourceKey
          projectTopic {
            id
            slug
            chapters(first: 1) {
              id
              lessons(first: 1) {
                id
                code
                seqId
              }
            }
          }
        }
      }
    }
  }
`,ew=E.default.bind(ev.default),ej=({amplitudePrefix:e})=>{let{lessonResourceKey:t,topicResourceKey:s,topicTypedId:o}=(0,h.useResourceKeyContext)(),{lesson:n}=(0,eh.useLessonDetailFromContext)(),{topic:l}=(0,$.useLessonAbstractFromPath)(),{sampleUnansweredQuestion:i}=ey({input:{topicResourceKey:s,lessonResourceKey:t}}),r=(0,H.useRouter)(),{previousLesson:d,nextLesson:u}=(0,el.useClassroomRouter)(),{nextTopic:m,firstLesson:p}=(0,eb.useNextKdcSession)({topicTypedId:u?"":o}),{nextTopic:g,firstLesson:f}=(e=>{let{data:t}=(0,_.useQuery)(eC,{variables:{topicResourceKey:e}}),s=t?.currentUserNextClassroomStudyGroupStep?.classroomStudyGroupStep??null;if(!s)return{nextTopicResourceKey:null,nextLesson:null};let o="TopicStudyGroupStep"===s.__typename?{...s.topic,topicResourceKey:s.topicResourceKey}:"ProjectTopicStudyGroupStep"===s.__typename?{...s.projectTopic,topicResourceKey:s.projectTopicResourceKey}:null,n=o?.chapters?.[0]?.lessons?.[0]??null;return{nextTopic:o,firstLesson:n}})(s),y=u??p??f,v=u?s:m?.slug??g?.topicResourceKey,{getShouldNotShowMarkDoneReminder:x}=ed(),{isDesktopSize:b}=(0,eu.useWindowSize)(),{submittable:w,visible:j,handleClickCompleteButton:S,lessonPassed:N,loading:k}=(0,W.useLessonComplete)(),{isKDCSprinter:T}=(0,eg.useGetIsKdcSprinter)(),I={lesson_name:n?.title,lesson_id:n?.id,topic_name:l?.title,topic_id:l?.id},{openLessonCompleteReminderModal:M}=(({routeToNextLesson:e,showCheckbox:t=!0})=>{let{setShouldNotShowMarkDoneReminder:s}=ed(),o=t?{checkboxText:"  ",onCloseModal:e=>{s(!!e)}}:{};return{openLessonCompleteReminderModal:()=>{(0,ei.openModal)({icon:"alert",title:"  ",content:"    ,      \n",primaryButton:{text:""},secondaryButton:{text:" ",onClick:t=>{e(),t()}},...o})}}})({routeToNextLesson:()=>{y&&v&&r.push(`/topics/${v}/lessons/${y.code}`)},showCheckbox:!T}),[E,A]=(0,c.useState)(!1);(0,c.useEffect)(()=>{A(!!(w&&b&&i?.id))},[w,b,i?.id]);let{drawer:L,setDrawer:G}=(0,ex.useDrawerState)();return(0,a.jsxs)(a.Fragment,{children:[d&&(0,a.jsx)(J,{direction:"left",link:`/topics/${s}/lessons/${d.code}`,lesson:d,onClick:()=>{B.Amplitude.logEvent(`click.${e}_left_arrow_button`,I)}}),y&&v&&(0,a.jsx)(J,{direction:"right",link:`/topics/${v}/lessons/${y.code}`,onClick:t=>{B.Amplitude.logEvent(`click.${e}_right_arrow_button`,I);let s=n?.type===O.LessonType.Video||n?.type===O.LessonType.Exercise;if(!x()&&j&&!N&&(!T||s)&&(!n?.gradingType||n.gradingType!==O.ExerciseGradingType.Submission)){t.preventDefault(),M();let e=window.Wistia?.api();e?.cancelFullscreen?.()}},lesson:y.id===u?.id?u:{title:"  "}}),N?(0,a.jsx)(en,{}):(0,a.jsx)("div",{className:ew("mainButtonContainer"),children:n?.gradingType===O.ExerciseGradingType.Self&&"selfCheck"!==L?(0,a.jsx)(et,{onClick:()=>{G("selfCheck")},children:" "}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(et,{id:"lessonDoneButton",onClick:()=>{S(),B.Amplitude.logEvent(`click.${e}_complete_lesson_button`,I)},disabled:!w,children:""}),!w&&j&&(0,a.jsx)(ep.Tooltip,{anchorSelect:"#lessonDoneButton",place:"top-end",content:(({lessonType:e,gradingType:t,submitted:s})=>{switch(e){case O.LessonType.Video:return"   ";case O.LessonType.Quiz:return"  ";case O.LessonType.Exercise:if(s)return"   ";if(t===O.ExerciseGradingType.Submission)return"  ";if(t===O.ExerciseGradingType.Self)return"   ";return"  "}})({lessonType:n?.type??null,gradingType:n?.gradingType,submitted:!!n?.studyNote?.submission?.submittedAt})})]})}),(0,a.jsx)(e_,{title:"      !   .",iconName:"textBalloon",buttonText:" ",onClick:()=>{document.getElementById("UnansweredQuestionSection")?.scrollIntoView(),B.Amplitude.logEvent("click.unanswered_question_toast_view_button")},visible:E,onVisible:()=>B.Amplitude.logEvent("view.unanswered_question_toast"),hasCloseButton:!0,onClose:()=>{A(!1),B.Amplitude.logEvent("click.unanswered_question_toast_close_button")}}),k&&(0,a.jsx)(C.CommonLoader,{title:""})]})},eS=E.default.bind(U.default),eN=()=>{let{lesson:e}=(0,$.useLessonAbstractFromPath)(),[t,s]=(0,c.useState)(),[o,n]=(0,c.useState)(!1),[l,i]=(0,c.useState)(!1);return(0,c.useLayoutEffect)(()=>{let e=document.getElementById("lessonContentViewer"),t=new MutationObserver(()=>{let o=e?.getElementsByClassName(I)?.item(0);o&&(s(e=>e??o),t.disconnect())});return e&&t.observe(e,{attributes:!1,childList:!0,subtree:!0}),()=>{s(void 0),t.disconnect()}},[e?.id]),(0,c.useEffect)(()=>(e?.type===O.LessonType.Video&&(M.setIsFullScreen=i,M.setVisible=n),window.Wistia?.defineControl?.(M),()=>{M.setIsFullScreen=null,M.setVisible=null}),[e?.type]),(0,c.useEffect)(()=>{n(!1)},[e?.id]),t?(0,T.createPortal)((0,a.jsx)("div",{className:eS("container"),children:l?(0,a.jsx)("div",{className:eS("bottomNav"),children:(0,a.jsx)(ej,{amplitudePrefix:"full_video_lesson_nav"})}):(0,a.jsx)("div",{className:eS("autoNext"),children:o&&(0,a.jsx)(V,{onCountFinish:()=>{M.autoPlayNext=!0}})})}),t):null};var ek=e.i(835180),eT=e.i(666060),eI=e.i(861130);let eM=({queryParams:e,retryCloseCodes:t=[],maxRetries:s=5,retryInterval:o=2e3})=>{let{isLoggedIn:n}=(0,b.useIsLoggedIn)(),{fetchSubscriptionToken:l}=(0,eI.useGetSubscriptionToken)(),[i,r]=(0,c.useState)("initial"),[a,d]=(0,c.useState)(null),[u,m]=(0,c.useState)(null),_=`${k.NEXT_PUBLIC_WS_API_SERVER}/record`,p=new URLSearchParams(e).toString(),g=p?`${_}?${p}`:_;return(0,c.useEffect)(()=>{let e,i;if(!n)return;let a=1,u=async()=>{r("initial"),m(null),d(null);let e=await l()??"";(i=new WebSocket(g.includes("?")?`${g}&token=${e}`:`${g}?token=${e}`)).addEventListener("open",()=>{r("open"),a=1}),i.addEventListener("message",e=>{d(e.data)}),i.addEventListener("close",e=>{m(e.code),4e3!==e.code&&(r("closed"),t.includes(e.code)&&c())})},c=()=>{a<=s&&(e=setTimeout(()=>{a++,u()},o))};return u(),()=>{clearTimeout(e),r("initial"),i?.close(4e3)}},[n,g,JSON.stringify(t),s,o]),{status:i,message:a,closeCode:u}};var eE=e.i(538234);let eA=()=>{let{lesson:e,topic:t}=(0,$.useLessonAbstractFromPath)(),s=(0,H.useRouter)(),{isLoggedIn:o}=(0,b.useIsLoggedIn)(),{status:n,message:l,closeCode:i}=eM({queryParams:{lessonId:e?.id??"",topicId:t?.id??""},retryCloseCodes:[1005,1006]}),r=(0,c.useRef)(null),a=(0,eT.useLogout)(),d=(0,eE.getWistiaApi)();return(0,c.useEffect)(()=>{if(o){if("closed"===n){d?.pause();let e=" .    .";1e3===i&&(e="   .\n   ."),r.current=(0,ei.openModal)({icon:"alert",title:"",content:e,disableCloseOnOverlayClick:!0,primaryButton:{text:"",onClick:()=>s.push("/")}})}"MIDNIGHT_SOON"===l&&a({redirectTo:null})}return()=>{r.current?.(),r.current=null}},[s,o,n,l,i,a,d]),null};var eL=e.i(604838);let eG=e=>(eM(e),null);var eD=e.i(982742),eq=e.i(835638);let eR=["click","mousemove","wheel","keydown","touchstart","focus"],eP=m.gql`
  mutation ActivityReport($studyNoteTypedId: ID!) {
    activityReport(studyNoteTypedId: $studyNoteTypedId) {
      newSession
      studyDuration
    }
  }
`;var eW=e.i(539520);let eB=()=>{let{team:e}=(0,eW.useMyTeam)(),{lesson:t}=(0,eh.useLessonDetailFromContext)();return(({studyNoteTypedId:e,enable:t})=>{let s=(0,eE.getWistiaApi)(),[o]=(0,eD.useMutation)(eP),n=(0,c.useCallback)((0,eq.throttle)(()=>{o({variables:{studyNoteTypedId:e}})},6e4,{trailing:!1}),[e]);(0,c.useEffect)(()=>{if(e&&t)return n(),eR.forEach(e=>{window.addEventListener(e,n)}),()=>{eR.forEach(e=>{window.removeEventListener(e,n)})}},[e,t,n]),(0,c.useEffect)(()=>{if(e&&t&&s)return s.bind("secondchange",n),()=>{s.unbind("secondchange",n)}},[e,t,s,n])})({studyNoteTypedId:t?.studyNote?.typedId,enable:!!e&&[O.TeamType.Pro,O.TeamType.Basic].includes(e.teamType)}),null};var eF=e.i(293499),eV=e.i(749654),eO=e.i(77383),eU=e.i(912398);function e$(e,t){return(0,eU.isSameDay)((0,eV.constructFrom)(t?.in||e,e),(0,eO.constructNow)(t?.in||e))}var eH=e.i(167513);let eK=()=>{let e=(0,H.useRouter)(),{topicResourceKey:t,lessonResourceKey:s,lessonTypedId:o}=(0,h.useResourceKeyContext)(),{checkKdsVerifyNeededLazy:n}=(0,eF.useCheckKDSVerifyNeededLazy)(),l=(0,c.useRef)(void 0);return(0,c.useEffect)(()=>{l.current=new Date;let i=window.setInterval(async()=>{if(!l.current)return;let i=new Date;if(!e$(l.current)){let r=await n({reason:O.VerificationReason.LessonEnter,lessonId:(0,eH.getObjectId)(o)});if(r?.needKDSVerify.need){let o=(0,eE.getWistiaApi)(),n=o?.time();e.replace({pathname:`/topics/${t}/lessons/${s}/kds-verify`,query:{timestamp:n?Math.floor(n):void 0}})}else l.current=i}},1e4);return()=>{l.current=void 0,window.clearInterval(i)}},[t,s,o]),null};var ez=e.i(225907),eY=e.i(44770);let eX=E.default.bind(eY.default),eQ=({children:e})=>(0,a.jsx)("div",{className:eX("container"),children:e}),eJ={src:e.i(844815).default,width:1152,height:640,blurWidth:8,blurHeight:4,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAECAYAAACzzX7wAAAAa0lEQVR42mXKyw6CMBQA0f7/t/mIiTFRFwSjFqKIpU0p7S0DIexYzGqOqi+e58ngKiF82aSK85vrocDqSPfIGD1gmx7XBLyJqK7MuNe4aL0XPveBfzXPNuHtDOpjpr2tYCf8ykSwgqRMisIETlF52TYr+d4AAAAASUVORK5CYII="};var eZ=e.i(642829),e0=e.i(253192);let e1=E.default.bind(eZ.default),e2=({img:e,title:t,description:s,primaryButton:o,secondaryButton:n})=>(0,a.jsx)("div",{className:e1("container"),children:(0,a.jsx)(e0.ImageModal,{args:{img:e,size:{s:"S"},title:t,description:s,primaryButton:o,secondaryButton:n},closeModal:()=>null})}),e5=({primaryButton:e,secondaryButton:t})=>(0,a.jsx)(e2,{img:{src:eJ,unoptimized:!0},title:"\n ,  ",description:"      ",primaryButton:e,secondaryButton:t}),e3={src:e.i(962793).default,width:1152,height:640,blurWidth:8,blurHeight:4,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAECAYAAACzzX7wAAAAiUlEQVR42hXJwQoBQQCA4XlGFx7CwTM4akskV0XKlpQsb6A8gM1Bqyy7O7Njk2aasaefPXynT6R1i9T3SEzAo27/dSg+fTLfpTkhL1tyE3FWR3K9R1YHtIzQdsPptkS8yjWZWRCrCOlWlD5EvXdoNyepQkRxHVO4AXcz4mmmZHaCtEPUNyAuZ/wA5O5tCPxKxsoAAAAASUVORK5CYII="};e.s(["default",0,e3],389595);let e6=({primaryButton:e,secondaryButton:t})=>(0,a.jsx)(e2,{img:{src:e3},title:"4000+  \n   ",description:"    \n   .",primaryButton:e,secondaryButton:t}),e4=()=>{let e=(0,H.useRouter)();return(0,a.jsx)(e2,{img:{src:e3},title:"   ",description:"  \n ",primaryButton:{text:" ",onClick:()=>{e.push("/")}},secondaryButton:{text:"",onClick:()=>{e.back()}}})},e9=()=>{let e=(0,H.useRouter)();return(0,a.jsx)(e2,{img:{src:e3},title:"    ",description:"    .\n          .",primaryButton:{text:" ",onClick:()=>{e.push("/subscription")}},secondaryButton:{text:"",onClick:()=>{e.back()}}})};var e8=e.i(389595),e8=e8;let e7=({reason:e})=>{let{topic:t,lesson:s}=(0,$.useLessonAbstractFromPath)(),o=(0,H.useRouter)(),{isLoggedIn:n}=(0,b.useIsLoggedIn)(),l={lesson:{id:s?.id,name:s?.title},topic:{id:t?.id,name:t?.title}};return(0,c.useEffect)(()=>{l.lesson.id&&l.topic.id&&B.Amplitude.logEvent(`view.${n?"lesson_page_blur_modal":"lesson_page_signup_modal"}`,l)},[n,l.lesson.id,l.topic.id]),(0,a.jsx)(eQ,{children:(()=>{switch(e){case O.CanAccessClassroomReason.LoginRequired:return(0,a.jsx)(e5,{primaryButton:{text:"3 ",onClick:()=>{o.push({pathname:"/signup",query:{landingLink:o.asPath}}),B.Amplitude.logEvent("click.lesson_page_signup_button",l)}},secondaryButton:{text:"",onClick:()=>{o.push({pathname:"/signin",query:{landingLink:o.asPath}}),B.Amplitude.logEvent("click.lesson_page_login_button",l)}}});case O.CanAccessClassroomReason.SubscriptionRequired:return(0,a.jsx)(e6,{primaryButton:{text:" ",onClick:()=>{o.push("/subscription/payment"),B.Amplitude.logEvent("click.lesson_page_blur_modal_enter_payment_button",l)}},secondaryButton:{text:" ",onClick:()=>{o.push("/subscription"),B.Amplitude.logEvent("click.lesson_page_blur_modal_membership_info_button",l)}}});case O.CanAccessClassroomReason.KdcUserIndividualSubscriptionRequired:return(0,a.jsx)(e9,{});case O.CanAccessClassroomReason.StudyGroupStudentSubscriptionRequired:return(0,a.jsx)(e2,{img:{src:e8},title:"    ",description:"      ",primaryButton:{text:"",onClick:()=>{o.back()}}});case O.CanAccessClassroomReason.StudyGroupStepEnded:return(0,a.jsx)(e2,{img:{src:e8},title:"  ",primaryButton:{text:"",onClick:()=>{o.back()}}});default:return(0,a.jsx)(e4,{})}})()})};var te=e.i(444253),tt=e.i(357678),ts=e.i(756359);let to=E.default.bind(ts.default),tn=({subscriptionButton:e})=>(0,a.jsx)("div",{className:to("container"),children:e});var tl=e.i(202042);let ti=E.default.bind(tl.default),tr=({topicResourceKey:e,title:t,totalLessonCount:s,passedLessonCount:o,onClose:n})=>(0,a.jsxs)("div",{className:ti("container"),children:[(0,a.jsx)("button",{className:ti("closeButton"),onClick:n,type:"button",children:(0,a.jsx)(K.Icon,{name:"xMark",size:{l:"large",m:"large"}})}),(0,a.jsx)(z.default,{href:`/topics/${e}`,prefetch:!1,children:(0,a.jsx)("h1",{className:ti("title"),children:t})}),"number"==typeof o&&(0,a.jsxs)("p",{className:ti("progress"),children:[`${o}/${s}`," "," "]})]});var ta=e.i(133464);let td=({onClick:e,href:t,size:s,fullWidth:o})=>(0,a.jsx)("a",{target:"_blank",rel:"noreferrer noopener",href:t,onClick:e,children:(0,a.jsx)(ta.Button,{variant:"primary",size:s,fullWidth:o,children:" "})}),tu=({size:e,fullWidth:t,lesson:s,amplitudeType:o,onClick:n})=>{let{showSubscriptionPromotion:l}=(0,eW.useMyTeam)(),{isLoggedIn:i}=(0,b.useIsLoggedIn)(),r=(({lessonId:e,lessonTitle:t,type:s})=>()=>B.Amplitude.logEvent("click.lesson_page_free_trial_cta",{lesson:{id:e,name:t},type:s}))({lessonId:s?.id,lessonTitle:s?.title,type:o});return l?(0,a.jsx)(td,{onClick:n??r,href:i?"/subscription/payment":"/signup?landingLink=/subscription/payment",size:e,fullWidth:t}):null};var tc=e.i(328748),tm=e.i(618606),t_=e.i(700172),tp=e.i(657364),tg=e.i(626004);let th=E.default.bind(tm.default),tf=({lesson:e,currentLessonSeqId:t,onClose:s,href:o})=>{let n=e.type===O.LessonType.Video,[l,i]=(0,c.useState)(n?500:375),r=(0,c.useCallback)(e=>{d.current&&i(Math.max(e-d.current.getBoundingClientRect().left,375))},[]),d=(0,c.useRef)(null),u=(0,tp.useDragHandler)("horizontal",{onDrag:r});return(0,a.jsx)(t_.default,{nodeRef:d,handle:"header",cancel:"section",children:(0,a.jsxs)("div",{ref:d,className:th("container"),style:{width:`${l}px`},children:[(0,a.jsx)("section",{className:th("splitHandlerSection"),tabIndex:0,onMouseDown:u,onTouchStart:u,children:(0,a.jsx)("div",{className:th("resize"),children:(0,a.jsx)(K.Icon,{name:"fullSizing",rotate:45,size:"small"})})}),(0,a.jsxs)("header",{className:th("header"),children:[(0,a.jsx)("div",{className:th("bar")}),(0,a.jsxs)("div",{className:th("lessonTitle"),children:[(0,a.jsxs)("span",{children:[((e.lessonIndex??0)+1).toString().padStart(2,"0"),". "]}),(0,a.jsx)("span",{children:e.title})]}),(0,a.jsxs)("div",{children:[t!==e.seqId&&(0,a.jsx)(z.default,{href:o,children:(0,a.jsx)(K.Icon,{name:"quitPIP",className:th("activeIcon"),id:"mini-content-viewer-quitPIP"})}),(0,a.jsx)(ep.Tooltip,{offset:10,place:"left",anchorSelect:"#mini-content-viewer-quitPIP",content:" "}),(0,a.jsx)(K.Icon,{name:"xMark",onClick:s,className:th("xMark")})]})]}),(0,a.jsx)("div",{className:th("content",{isVideoLesson:n}),children:(0,a.jsx)(tg.GeneralContentViewer,{content:e.content??void 0})}),(0,a.jsx)("div",{className:th("footer")})]})})},ty=m.gql`
  query GetLessonContent($topicResourceKey: String!, $lessonResourceKey: String!) {
    topicByResourceKey(key: $topicResourceKey) {
      id
      lessonByResourceKey(key: $lessonResourceKey) {
        id
        code
        seqId
        title
        type
        content
        lessonIndex
      }
    }
  }
`,tv=(0,c.createContext)({lessonArgs:{code:void 0},setLessonArgs:()=>{},initializeLessonArgs:()=>{}}),tx=()=>{let{lessonArgs:e,setLessonArgs:t,initializeLessonArgs:s}=(0,c.useContext)(tv);return{lessonArgs:e,setLessonArgs:t,initializeLessonArgs:s}},tb=()=>{let{lessonArgs:e,initializeLessonArgs:t}=tx(),{topicResourceKey:s,lessonSeqId:o}=(0,h.useResourceKeyContext)(),{lesson:n}=(0,$.useLessonAbstractFromPath)(),{data:l,loading:i}=(e=>{let{data:t,loading:s}=(0,_.useQuery)(ty,{variables:e,skip:!e.topicResourceKey||!e.lessonResourceKey});return{data:t?.topicByResourceKey?.lessonByResourceKey,loading:s}})({topicResourceKey:s,lessonResourceKey:e.code?.toString()??""}),r=l&&(l.type===O.LessonType.Video||l.type===O.LessonType.Note);(0,c.useEffect)(()=>{t()},[o]),(0,c.useEffect)(()=>{r&&B.Amplitude.logEvent("view.lesson_page_mini_content_viewer",{current:{lesson:{id:o,type:n?.type,name:n?.title}},mini:{lesson:{type:l.type,name:l.title,id:l.seqId}}})},[o,n?.type,n?.title,l]);let d=`/topics/${s}/lessons/${l?.code}`;return i||!r?null:(0,a.jsx)(tf,{lesson:l,currentLessonSeqId:o,onClose:()=>t(),href:d})};var tC=e.i(589843),tw=e.i(284695),tj=e.i(538912),tS=e.i(105013),tN=e.i(328456);let tk=E.default.bind(tc.default),tT=()=>{let{lessonTypedId:e,topicResourceKey:t}=(0,h.useResourceKeyContext)(),{topic:s}=(0,tN.useTopicDetailFromContext)(),{lesson:o}=(0,$.useLessonAbstractFromPath)(),n=(0,c.useRef)(null),l=(0,c.useRef)(void 0),[i,r]=(0,c.useState)(),{hadSubscription:d,isSubscribed:u}=(0,tt.useMySubscription)(),{drawer:m,resetDrawer:_}=(0,ex.useDrawerState)(),{setLessonArgs:p}=tx(),g=s?.chapters?.find(t=>t.lessons.some(t=>t.typedId===e))?.lessons.find(({type:e})=>e===O.LessonType.Video||e===O.LessonType.Note),[f,y]=(0,c.useState)(!1),v="nav"===m,x=()=>{l.current&&(n.current=setTimeout(()=>{r(l.current)},400)),_()};return((0,c.useEffect)(()=>()=>{n.current&&clearTimeout(n.current)},[]),(0,c.useEffect)(()=>{e&&(l.current=s?.chapters?.find(t=>t.lessons.some(t=>t.typedId===e))?.id,r(l.current))},[e,s?.chapters]),s)?(0,a.jsxs)("div",{className:tk("container"),children:[(0,a.jsx)(tb,{}),(0,a.jsxs)(te.UiDrawer,{open:v,position:"left",onClose:x,children:[s&&(0,a.jsx)("div",{className:tk("header"),children:(0,a.jsx)(tr,{topicResourceKey:t,title:s.title,totalLessonCount:s.lessonCount.total,passedLessonCount:s.currentUserEnrollment?.passedLesson?.totalCount,onClose:_})}),(0,a.jsx)("div",{className:tk("chapters"),children:s?.chapters?.filter(Boolean)?.map((e,s)=>(0,a.jsx)(tw.Chapter,{id:e.id,index:(e.chapterIndex??s)+1,title:e.title,inactive:i!==e.id,isExpanded:i===e.id,onClick:()=>{r(t=>{if(t!==e.id)return e.id})},lessonList:e.lessons.map(({id:e,code:s,icon:n,title:l,lessonIndex:i,type:r,duration:d,studyNote:c,trialLesson:m})=>(0,a.jsx)(tj.LessonItem,{id:e,type:r,icon:n,lessonIndex:i,title:l,href:`/topics/${t}/lessons/${s}`,duration:d,focused:o?.id===e,status:c?.status,runTutorial:f&&g?.id===e,trialLesson:!u&&m,onClick:x,onClickView:()=>{x(),p({code:s})}},e))},e.id))}),!d&&(0,a.jsx)(tn,{subscriptionButton:(0,a.jsx)(tu,{amplitudeType:"side-nav",lesson:{id:o?.id,title:o?.title},fullWidth:!0})})]}),v&&(0,a.jsx)(tC.TutorialTooltip,{tutorialKey:tS.LOCAL_STORAGE_KEY.isFinishedMiniContentViewerTutorial,locale:{close:""},steps:[{target:`#side-nav-viewer-icon-${g?.id}`,title:"  ",content:"       .",disableBeacon:!0,placement:"right"}],delay:400,onRunTutorial:()=>y(!0),onFinishTutorial:()=>y(!1)})]}):null};var tI=e.i(775176),tM=e.i(24191);let tE=(0,tM.default)(async()=>(await e.A(641159)).ContentViewer,{loadableGenerated:{modules:[795987]},ssr:!1,loading:()=>(0,a.jsx)("div",{style:{width:"100%",height:"auto",aspectRatio:"55/31",backgroundColor:"var(--gray10)"}})});var tA=e.i(182752),tL=e.i(766194),tG=e.i(830490);let tD=E.default.bind(tG.default),tq=({iframe:e,console:t})=>(0,a.jsxs)("div",{className:tD("container"),children:[(0,a.jsx)("div",{className:tD("iframe"),children:e}),(0,a.jsx)("div",{className:tD("console"),children:t})]});var tR=e.i(30624),tP=e.i(434564),tW=e.i(112578),tB=e.i(232415),tF=e.i(849251);let tV=({loading:e,enrollmentId:t,seqId:s,defaultOpenFilePath:o,onSuccess:n})=>{let{loading:l,terminalUrl:i}=(0,tR.useGetTerminalUrl)({language:O.Language.JupyterDsTrm,enrollmentId:t,seqId:s}),[r,d]=(0,c.useState)(),[u,m]=(0,c.useState)(),[_,p]=(0,c.useState)(!0);return(0,c.useEffect)(()=>{let e=e=>{var t;("string"==typeof(t=e.data)||!(0,tW.default)(t)&&(0,tB.default)(t)&&"[object String]"==(0,tP.default)(t))&&m(e.data),e.data.instanceIp&&d(e.data.instanceIp),e.stopPropagation()};return window.addEventListener("message",e),()=>{window.removeEventListener("message",e)}},[]),(0,c.useEffect)(()=>{r&&u&&setTimeout(()=>{n(`https://${r.replaceAll(".","-")}-${u}.terminal${"dev"===k.NEXT_PUBLIC_TARGET_SERVER?"-dev":""}.codeit.kr/notebooks/work${o??""}`),p(!1)},100)},[r,u,o,n]),(0,a.jsxs)(a.Fragment,{children:[(e||l||_)&&(0,a.jsx)(tF.Loading,{height:"100%"}),(0,a.jsx)("iframe",{style:{display:"none",position:"absolute"},title:"web-terminal-for-jupyter",src:i})]})},tO=e=>{let[t,s]=(0,c.useState)();return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(tV,{...e,onSuccess:e=>{s(e)}}),!!t&&(0,a.jsx)("iframe",{title:"jupyter",src:t})]})};var tU=e.i(711953);let t$=E.default.bind(tU.default),tH=({onReset:e,onReload:t,submissionInfo:s,submissionActionButton:o})=>(0,a.jsxs)("div",{className:t$("container"),children:[(0,a.jsxs)("div",{className:t$("actions"),children:[(0,a.jsx)("div",{className:t$("action"),children:o}),(0,a.jsx)(ta.Button,{variant:"tertiary",size:"medium",onClick:t,leftIcon:"rotateRight",children:""}),(0,a.jsx)(ta.Button,{variant:"tertiary",size:"medium",onClick:e,children:""})]}),s]});var tK=e.i(552648),tz=e.i(426521),tY=e.i(477484),tX=e.i(459808);let tQ=({submissionType:e,studyNote:t,...s})=>{let{resetProject:o,loading:n}=(0,tK.useResetProjectFiles)(),[l,i]=(0,c.useState)(!0),{enableShowReview:r,handleSubmitResult:d,handleShowReview:u,isReSubmit:m,hasSubmission:_}=(0,tz.useLessonSubmissionControl)(),p=()=>{i(!1),requestAnimationFrame(()=>{i(!0)})};return(0,c.useEffect)(()=>{p()},[t?.typedId]),(0,a.jsx)(tq,{iframe:l&&(0,a.jsx)(tO,{...s,loading:n}),console:(0,a.jsx)(tH,{onReset:()=>{(0,ei.openModal)({title:" ?",icon:"alert",content:"     \n     .",primaryButton:{text:"",onClick:async e=>{t?.typedId&&(e(),await o({studyNoteTypedId:t.typedId}),p())}},secondaryButton:{text:""}})},onReload:p,submissionInfo:_?(0,a.jsx)(tX.LessonSubmissionInfo,{enableShowReview:r,handleSubmit:d,submittedAt:t?.submission?.submittedAt,url:t?.projectLessonSubmission?.url}):void 0,submissionActionButton:e?(0,a.jsx)(tY.LessonSubmissionActionButton,{enableShowReview:r,handleSubmit:d,handleShowReview:u,isReSubmit:m}):void 0})})};var tJ=e.i(102863);let tZ=m.gql`
  ${tJ.STUDY_NOTE_FILE_FIELDS}
  query GetFiles($topicResourceKey: String!, $lessonResourceKey: String!, $topicTypedId: ID) {
    topicByResourceKey(key: $topicResourceKey) {
      id
      typedId
      lessonByResourceKey(key: $lessonResourceKey) {
        id
        typedId
        studyNote(topicTypedId: $topicTypedId) {
          id
          typedId
          files {
            ...StudyNoteFileFields
          }
        }
        templateFiles {
          ...StudyNoteFileFields
        }
      }
    }
  }
`;var t0=e.i(560585),t1=e.i(956712);let t2=E.default.bind(t1.default),t5=({loading:e,saved:t,savedText:s})=>e?(0,a.jsxs)("div",{className:t2("container","loading"),children:[(0,a.jsx)("span",{className:t2("loadingIcon")})," ..."]}):t?(0,a.jsxs)("div",{className:t2("container"),children:[(0,a.jsx)("div",{className:t2("checked"),children:(0,a.jsx)(K.Icon,{name:"check",thickness:"bold",size:"xsmall",color:"--txt-primary-invert"})}),s??""]}):null;var t3=e.i(557151);function t6(e,t,s,o){var n=this,l=(0,c.useRef)(null),i=(0,c.useRef)(0),r=(0,c.useRef)(0),a=(0,c.useRef)(null),d=(0,c.useRef)([]),u=(0,c.useRef)(),m=(0,c.useRef)(),_=(0,c.useRef)(e),p=(0,c.useRef)(!0);_.current=e;var g="undefined"!=typeof window,h=!t&&0!==t&&g;if("function"!=typeof e)throw TypeError("Expected a function");t=+t||0;var f=!!(s=s||{}).leading,y=!("trailing"in s)||!!s.trailing,v="maxWait"in s,x="debounceOnServer"in s&&!!s.debounceOnServer,b=v?Math.max(+s.maxWait||0,t):null;return(0,c.useEffect)(function(){return p.current=!0,function(){p.current=!1}},[]),(0,c.useMemo)(function(){var e=function(e){var t=d.current,s=u.current;return d.current=u.current=null,i.current=e,r.current=r.current||e,m.current=_.current.apply(s,t)},s=function(e,t){h&&cancelAnimationFrame(a.current),a.current=h?requestAnimationFrame(e):setTimeout(e,t)},c=function(e){if(!p.current)return!1;var s=e-l.current;return!l.current||s>=t||s<0||v&&e-i.current>=b},C=function(t){return a.current=null,y&&d.current?e(t):(d.current=u.current=null,m.current)},w=function e(){var o=Date.now();if(f&&r.current===i.current&&j(),c(o))return C(o);if(p.current){var n=t-(o-l.current);s(e,v?Math.min(n,b-(o-i.current)):n)}},j=function(){o&&o({})},S=function(){if(g||x){var o=Date.now(),r=c(o);if(d.current=[].slice.call(arguments),u.current=n,l.current=o,r){if(!a.current&&p.current)return i.current=l.current,s(w,t),f?e(l.current):m.current;if(v)return s(w,t),e(l.current)}return a.current||s(w,t),m.current}};return S.cancel=function(){a.current&&(h?cancelAnimationFrame(a.current):clearTimeout(a.current)),i.current=0,d.current=l.current=u.current=a.current=null},S.isPending=function(){return!!a.current},S.flush=function(){return a.current?C(Date.now()):m.current},S},[f,v,t,b,y,h,g,x,o])}let t4=m.gql`
  mutation UpdateCanvasElement($input: UpdateCanvasElementInput!) {
    updateCanvasElement(input: $input) {
      elements {
        ... on Textarea {
          id  
        }
      }
    }
  } 
`;var t9=e.i(148660),t8=e.i(57466);let t7=E.default.bind(t8.default),se=({size:e,content:t})=>{let s=`h${e}`;return(0,a.jsx)("div",{className:t7("container"),children:(0,a.jsx)(s,{children:t})})};var st=e.i(648837),ss=e.i(748978);let so=({name:e,defaultValue:t,rules:s,shouldUnregister:o,...n})=>{let{control:l}=(0,t3.useFormContext)();return(0,a.jsx)(t3.Controller,{name:e,control:l,defaultValue:t,shouldUnregister:o,rules:n.maxLength?{maxLength:n.maxLength,...s}:s,render:({field:e,fieldState:t})=>(0,a.jsx)(ss.Textarea,{...n,...e,error:!!t.error,helperText:t.error?.message})})},sn=E.default.bind(st.default),sl=({name:e,...t})=>(0,a.jsx)("div",{className:sn("container"),children:e?(0,a.jsx)(so,{...t,name:e,minHeight:"20rem",maxLength:1e3,rules:{required:!0}}):(0,a.jsx)(ss.Textarea,{...t,minHeight:"20rem",value:t.content})}),si=({namePrefix:e,canvasElements:t,onFocus:s})=>t.map((t,o)=>{switch(t.__typename){case"Heading":return(0,a.jsx)(se,{...t,size:t.size??3},t.typedId);case"Textarea":return(0,a.jsx)(sl,{...t,placeholder:t.placeholder??void 0,name:e?`${e}.${o}.value`:void 0,onFocus:()=>s?.(t.typedId)},t.typedId);default:return null}}),sr=E.default.bind(t0.default),sa="canvasElements",sd=e=>e.map(e=>({typedId:e.typedId,value:e.content})),su=({list:e,studyNote:t,submissionType:s})=>{let o=(0,t3.useForm)({defaultValues:{[sa]:sd(e)},mode:"onChange"}),[n,l]=(0,c.useState)(null),{getValues:i,reset:r}=o,{update:d,reset:u,data:m,loading:_}=(()=>{let[e,{loading:t,reset:s,data:o}]=(0,eD.useMutation)(t4);return{update:async t=>e({variables:{input:t}}),loading:t,reset:s,data:o}})(),p=(0,t9.useInvalidEnrollmentAlert)({alertType:"feature"}),{enableShowReview:g,handleSubmitResult:h,handleShowReview:f,isReSubmit:y,hasSubmission:v}=(0,tz.useLessonSubmissionControl)(),x=t6(async()=>{let e=i(sa).find(e=>e.typedId===n);t?.typedId?e&&await d({elementTypedId:e.typedId,studyNoteTypedId:t.typedId,textareaInput:{content:e.value}}):p()},500);return(0,c.useEffect)(()=>{r({[sa]:sd(e)})},[e]),(0,a.jsx)(t3.FormProvider,{...o,children:(0,a.jsx)("div",{className:sr("container"),children:(0,a.jsxs)("form",{onChange:()=>{u(),x()},children:[(0,a.jsx)("div",{className:sr("contents"),children:(0,a.jsx)(si,{namePrefix:sa,canvasElements:e,onFocus:e=>l(e)})}),(0,a.jsxs)("div",{className:sr("footer"),children:[(0,a.jsxs)("div",{className:sr("action"),children:[(0,a.jsx)("div",{className:sr("buttonWrapper"),children:s&&(0,a.jsx)(tY.LessonSubmissionActionButton,{enableShowReview:g,handleSubmit:h,handleShowReview:f,isReSubmit:y,disableSubmit:!o.formState.isValid})}),(0,a.jsx)(t5,{loading:_,saved:!!m})]}),v&&(0,a.jsx)(tX.LessonSubmissionInfo,{enableShowReview:g,handleSubmit:h,disableSubmit:!o.formState.isValid,submittedAt:t?.submission?.submittedAt,url:t?.projectLessonSubmission?.url})]})]})})})};var sc=e.i(545298),sm=e.i(352619);let s_=E.default.bind(sc.default),sp=({view:e,onChangeView:t,tools:s,input:o,viewer:n})=>(0,a.jsxs)("div",{className:s_("container"),children:[e&&t&&(0,a.jsx)("div",{className:s_("tabs"),children:(0,a.jsx)(sm.ClassroomTabs,{activeKey:e,tabs:[{key:"editor",icon:"textarea",label:""},{key:"viewer",icon:"eye",label:""}],onChange:t})}),(0,a.jsxs)("div",{className:s_("main"),children:[(0,a.jsxs)("div",{className:s_("input",{hide:"viewer"===e}),children:[(0,a.jsxs)("div",{className:s_("header"),children:[(0,a.jsxs)("div",{className:s_("left"),children:[(0,a.jsx)(K.Icon,{name:"textarea",size:"small",color:"--txt-caption"})," "]}),(0,a.jsx)("div",{className:s_("toolBox"),children:s})]}),o]}),(0,a.jsxs)("div",{className:s_("viewer",{hide:"editor"===e}),children:[(0,a.jsxs)("div",{className:s_("header"),children:[(0,a.jsx)(K.Icon,{name:"eye",size:"small",color:"--txt-caption"})," "]}),n]})]})]});var sg=e.i(211006);let sh=E.default.bind(sg.default),sf=({ref:e,onChange:t})=>{let{register:s}=(0,t3.useFormContext)(),o=(0,t3.useWatch)({name:"markdownFiles"}),n=o?Object.keys(o)[0]:null,{ref:l,...i}=(0,c.useMemo)(()=>s(`markdownFiles.${n}`),[n]);return(0,c.useImperativeHandle)(l,()=>e.current,[l]),(0,a.jsx)("div",{className:sh("container"),children:(0,a.jsx)("textarea",{ref:e,...i,onChange:e=>{i.onChange(e),t?.(e.target.value)},onKeyDown:e=>{if("Tab"!==e.key)return;e.preventDefault();let s=e.currentTarget,o=s.selectionStart,n=s.selectionEnd,l=s.value;e.shiftKey&&"	"===l.substring(o-1,o)?(s.value=l.substring(0,o-1)+l.substring(n),s.setSelectionRange(o-1,o-1)):(s.value=l.substring(0,o)+"	"+l.substring(n),s.setSelectionRange(o+1,o+1));let r=new Event("change",{bubbles:!0});Object.defineProperty(r,"target",{value:s}),i.onChange(r),t?.(s.value)},placeholder:"   ",className:sh("input")})})};var sy=e.i(445964),sv=e.i(847954);let sx=E.default.bind(sy.default),sb=(0,c.memo)(({ref:e,markup:t})=>(0,a.jsx)("div",{className:`${sx("viewer")} code-theme`,ref:e,dangerouslySetInnerHTML:{__html:t}}));sb.displayName="MarkdownBody";let sC=({ref:e})=>{let t=(0,sv.useRemarkableMarkdown)({applyLinePropsToTag:!0,enableChecklist:!0,enableEmoji:!0,enableLineBreaks:!0,enableOrderedListStart:!0}),s=Object.values((0,t3.useWatch)({name:"markdownFiles"}))[0],o=(0,c.useMemo)(()=>t.render(s),[s]);return(0,a.jsx)("div",{className:sx("container"),children:(0,a.jsx)(sb,{ref:e,markup:o})})};var sw=e.i(21762);let sj=({view:e,onChangeView:t,tools:s,onChange:o})=>{let n=(0,c.useRef)(null),l=(0,c.useRef)(null);return(({textareaRef:e,viewerRef:t})=>{let[s,o]=(0,c.useState)(!0),[n,l]=(0,c.useState)(0),i=(0,c.useRef)({}),r=(0,c.useCallback)((0,sw.debounce)(e=>{t.current?.scrollTo({top:e,behavior:"smooth"})},200,{leading:!1,trailing:!0}),[]),a=(0,c.useCallback)((0,sw.debounce)(e=>{let t=window.getComputedStyle(e),s=`${t.fontWeight} ${t.fontSize} ${t.fontFamily}`,o=parseFloat(t.width),n=parseFloat(t.letterSpacing);i.current={};let l=e.value.split("\n"),r=0,a=document.createElement("canvas").getContext("2d");if(a){a.font=s;for(let e=0;e<l.length;e++){let t=l[e];0===e?i.current[r]=0:(r+=Math.ceil((a.measureText(t).width-.2+(t.length-1)*n)/o),i.current[r]=e)}}},600),[]);return(0,c.useEffect)(()=>{if(!s)return;let o=t.current,n=e.current;if(!o||!n)return;let i=e=>{let t=e.target;a(t),t.selectionEnd>=t.value.length&&window.setTimeout(()=>{r(o.scrollHeight)},10)};n.addEventListener("input",i),a(n);let d=parseFloat(n.computedStyleMap().get("line-height")?.toString()??"25"),u=e=>{let t=e.target;t.scrollTop>t.scrollHeight-t.clientHeight-50?window.setTimeout(()=>{r(o.scrollHeight)},10):l(Math.floor(t.scrollTop/d))};return n.addEventListener("scroll",u),()=>{n.removeEventListener("input",i),n.removeEventListener("scroll",u)}},[s,a]),(0,c.useEffect)(()=>{let e=t.current;if(!s||!e)return;let o=i.current[n],l=e.querySelector(`.child[data-line="${o}"]`);l&&r(l.offsetTop-10)},[s,n,r])})({textareaRef:n,viewerRef:l}),(0,a.jsx)(sp,{view:e,onChangeView:t,tools:s,input:(0,a.jsx)(sf,{ref:n,onChange:o}),viewer:(0,a.jsx)(sC,{ref:l})})};var sS=e.i(636277),sN=e.i(486854),sk=e.i(405695),sT=e.i(165841),sI=e.i(435086),sM=e.i(891583);let sE=E.default.bind(sN.default),sA=({enabled:e,isSaving:t,onReset:s})=>{let{getHotKeyLabel:o}=(0,sI.useHotKeyLabel)();(0,sM.useOsHotKeys)(sT.HOT_KEY_CODE[sT.HotKeyName.RESET],s,{enabled:e,enableOnFormTags:!0,preventDefault:!0});let n=o(sT.HotKeyName.RESET);return(0,a.jsxs)("div",{className:sE("container"),children:[(0,a.jsx)("div",{className:sE("saveIndicator"),children:(0,a.jsx)(t5,{loading:t,saved:!0})}),(0,a.jsx)(sk.EditorButton,{onClick:s,icon:"reset",title:"",tooltip:`${n?` (${n})`:""}`,tooltipPlace:"bottom-end"})]})};var sL=e.i(685918);let sG=({studyNoteTypedId:e,file:t})=>{let s=(0,t3.useForm)({defaultValues:{markdownFiles:{[t.id]:t.content??""}}}),o=(0,t9.useInvalidEnrollmentAlert)({alertType:"feature"}),{saveProjectFiles:n}=(0,sS.useSaveProjectFiles)(),[l,i]=(0,c.useState)(!1),r=(0,c.useCallback)((0,sw.debounce)(async s=>{e?(i(!0),await n({inputs:[{lessonFileId:t.id,content:s}],studyNoteTypedId:e}),i(!1)):o()},500),[t,e]),{resetProject:d}=(0,tK.useResetProjectFiles)(),u=async()=>{if(!e)return;let t=await d({studyNoteTypedId:e}),o=t.data?.resetProjectFiles?.studyNote.files.find(({filePath:e})=>e?.endsWith(".md"));o&&s.setValue(`markdownFiles.${o.id}`,o.content??"")},{sideViewType:m,setSideViewType:_}=(0,sL.useSideViewState)();return(0,a.jsx)(t3.FormProvider,{...s,children:(0,a.jsx)(sj,{view:m??void 0,onChangeView:_,tools:(0,a.jsx)(sA,{enabled:"editor"===m,isSaving:l,onReset:u}),onChange:r})})},sD=({sideViewType:e})=>{let{lessonResourceKey:t,topicResourceKey:s,topicTypedId:o,lessonSeqId:n}=(0,h.useResourceKeyContext)(),{lesson:l}=(0,eh.useLessonDetailFromContext)(),{topic:i}=(0,tN.useTopicDetailFromContext)(),{loading:r,files:d}=(e=>{let{data:t,loading:s}=(0,_.useQuery)(tZ,{variables:e,skip:!e.topicResourceKey||!e.lessonResourceKey});return{loading:s,files:t?.topicByResourceKey?.lessonByResourceKey?.studyNote?.files??t?.topicByResourceKey?.lessonByResourceKey?.templateFiles??[],templateFiles:t?.topicByResourceKey?.lessonByResourceKey?.templateFiles??[]}})({lessonResourceKey:t,topicResourceKey:s,topicTypedId:o});switch(e){case tA.LessonSideViewType.codeEditor:if(r)return(0,a.jsx)(tF.Loading,{height:"100%"});if(!l)return null;return(0,a.jsx)(tL.CodeEditorLayout,{lesson:l,studyNote:l.studyNote??null,files:d,enrollmentId:i?.currentUserEnrollment?.id??null});case tA.LessonSideViewType.jupyter:if(!l)return null;return(0,a.jsx)(tQ,{enrollmentId:i?.currentUserEnrollment?.id??"",seqId:n,defaultOpenFilePath:l?.defaultOpenFilePath??void 0,submissionType:l.submissionType,studyNote:l.studyNote});case tA.LessonSideViewType.canvas:if(!l)return null;return(0,a.jsx)(su,{list:l?.studyNote?.canvasElements??l?.templateElements??[],studyNote:l.studyNote,submissionType:l.submissionType});case tA.LessonSideViewType.markdown:{let e=d.find(({filePath:e})=>e?.endsWith(".md"));if(!l||!e)return null;return(0,a.jsx)(sG,{studyNoteTypedId:l.studyNote?.typedId,file:e})}default:return null}};var sq=e.i(414608);function sR(){return(sR=Object.assign.bind()).apply(null,arguments)}var sP=function(e){return c.createElement("svg",sR({width:20,height:20,viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),t||(t=c.createElement("g",{clipPath:"url(#clip0_10060_19648)"},c.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M16.4371 0.43042C16.7961 0.43042 17.0871 0.721435 17.0871 1.08042V3.32192H19.3286C19.6876 3.32192 19.9786 3.61294 19.9786 3.97192C19.9786 4.33091 19.6876 4.62192 19.3286 4.62192H17.0871V6.86345C17.0871 7.22243 16.7961 7.51345 16.4371 7.51345C16.0782 7.51345 15.7871 7.22243 15.7871 6.86345V4.62192H13.5456C13.1866 4.62192 12.8956 4.33091 12.8956 3.97192C12.8956 3.61294 13.1866 3.32192 13.5456 3.32192H15.7871V1.08042C15.7871 0.721435 16.0782 0.43042 16.4371 0.43042ZM1.83161 1.87136C2.105 1.8346 2.47766 1.83322 3.06172 1.83322H12.6893C13.0483 1.83322 13.3393 1.5422 13.3393 1.18322C13.3393 0.824234 13.0483 0.53322 12.6893 0.53322H3.06172L3.01965 0.533218C2.49 0.533183 2.02877 0.533153 1.65838 0.58295C1.25953 0.636574 0.870211 0.758436 0.553574 1.07507C0.236939 1.39171 0.115076 1.78103 0.061451 2.17988C0.0116539 2.55027 0.0116845 3.01152 0.0117207 3.54118V3.58322V16.3415V16.3835C0.0116845 16.9132 0.0116539 17.3745 0.061451 17.7448C0.115076 18.1437 0.236939 18.533 0.553574 18.8497C0.870211 19.1663 1.25953 19.2882 1.65838 19.3418C2.02876 19.3916 2.49 19.3915 3.01963 19.3915H3.06172H17.1872C17.5462 19.3915 17.8372 19.1005 17.8372 18.7415C17.8372 18.3825 17.5462 18.0915 17.1872 18.0915H3.06172C2.47766 18.0915 2.105 18.0901 1.83161 18.0534C1.57691 18.0191 1.50765 17.9653 1.47281 17.9304C1.43798 17.8956 1.3841 17.8263 1.34986 17.5716C1.3131 17.2982 1.31172 16.9256 1.31172 16.3415V3.58322C1.31172 2.99916 1.3131 2.6265 1.34986 2.3531C1.3841 2.09841 1.43798 2.02915 1.47281 1.99431C1.50765 1.95947 1.57691 1.9056 1.83161 1.87136ZM16.6392 10.0459C17.2278 10.0459 17.705 10.5231 17.705 11.1117V15.4221C17.705 15.8293 17.3749 16.1594 16.9677 16.1594C16.5605 16.1594 16.2304 15.8293 16.2304 15.4221V11.453C16.2304 11.4375 16.2179 11.425 16.2024 11.425C16.1973 11.425 16.1922 11.4265 16.1879 11.4291L15.6585 11.7528C15.2945 11.9753 14.8274 11.7134 14.8274 11.2868C14.8274 11.098 14.9249 10.9226 15.0852 10.823L16.0764 10.2066C16.2453 10.1016 16.4403 10.0459 16.6392 10.0459ZM9.51768 15.4284C9.51768 15.8321 9.84499 16.1594 10.2488 16.1594H13.4475C13.7764 16.1594 14.0431 15.8928 14.0431 15.5639C14.0431 15.235 13.7764 14.9684 13.4475 14.9684H11.5924C11.5775 14.9684 11.5654 14.9563 11.5654 14.9414C11.5654 14.9339 11.5686 14.9267 11.5741 14.9216L12.2968 14.2549C12.7406 13.8689 13.0829 13.5375 13.3237 13.2609C13.5665 12.9843 13.7346 12.7316 13.8281 12.5027C13.9217 12.2738 13.9684 12.043 13.9684 11.8102C13.9684 11.444 13.8739 11.1226 13.6849 10.846C13.4978 10.5674 13.2331 10.3505 12.8908 10.1952C12.5485 10.04 12.1455 9.96239 11.6819 9.96239C11.2321 9.96239 10.8371 10.045 10.4968 10.2102C10.1585 10.3733 9.89579 10.6062 9.70872 10.9087C9.63431 11.029 9.57469 11.1583 9.52988 11.2966C9.4107 11.6644 9.74153 11.9863 10.1281 11.9863H10.3401C10.6096 11.9863 10.8048 11.752 10.9326 11.5146C11.0043 11.3853 11.1038 11.2868 11.2311 11.2191C11.3585 11.1495 11.5067 11.1146 11.6759 11.1146C11.8431 11.1146 11.9913 11.1475 12.1207 11.2131C12.25 11.2788 12.3515 11.3723 12.4252 11.4937C12.4988 11.6131 12.5356 11.7574 12.5356 11.9266C12.5356 12.0778 12.5048 12.2181 12.4431 12.3475C12.3814 12.4748 12.2918 12.6022 12.1744 12.7296C12.057 12.8549 11.9147 12.9932 11.7475 13.1445L9.76718 14.8783C9.60862 15.0171 9.51768 15.2176 9.51768 15.4284ZM7.7893 15.4728C7.57438 15.4728 7.3903 15.3972 7.23706 15.246C7.08582 15.0947 7.01119 14.9116 7.01318 14.6967C7.01119 14.4858 7.08582 14.3057 7.23706 14.1564C7.3903 14.0052 7.57438 13.9295 7.7893 13.9295C7.99229 13.9295 8.1714 14.0052 8.32662 14.1564C8.48384 14.3057 8.56344 14.4858 8.56543 14.6967C8.56344 14.84 8.52563 14.9703 8.45199 15.0877C8.38035 15.2052 8.28582 15.2987 8.16841 15.3683C8.05299 15.438 7.92662 15.4728 7.7893 15.4728ZM7.7893 12.5056C7.57438 12.5056 7.3903 12.43 7.23706 12.2788C7.08582 12.1275 7.01119 11.9444 7.01318 11.7295C7.01119 11.5186 7.08582 11.3385 7.23706 11.1892C7.3903 11.038 7.57438 10.9624 7.7893 10.9624C7.99229 10.9624 8.1714 11.038 8.32662 11.1892C8.48384 11.3385 8.56344 11.5186 8.56543 11.7295C8.56344 11.8728 8.52563 12.0032 8.45199 12.1206C8.38035 12.238 8.28582 12.3315 8.16841 12.4012C8.05299 12.4708 7.92662 12.5056 7.7893 12.5056ZM5.60501 11.1117C5.60501 10.5231 5.12783 10.0459 4.53919 10.0459C4.34027 10.0459 4.14533 10.1016 3.9764 10.2066L2.98516 10.823C2.82486 10.9226 2.72738 11.098 2.72738 11.2868C2.72738 11.7134 3.19451 11.9753 3.55845 11.7528L4.08784 11.4291C4.09223 11.4265 4.09728 11.425 4.10242 11.425C4.11786 11.425 4.13037 11.4375 4.13037 11.453V15.4221C4.13037 15.8293 4.46048 16.1594 4.86769 16.1594C5.2749 16.1594 5.60501 15.8293 5.60501 15.4221V11.1117Z",fill:"white"}))),s||(s=c.createElement("defs",null,c.createElement("clipPath",{id:"clip0_10060_19648"},c.createElement("rect",{width:20,height:20,fill:"white"})))))};let sW=m.gql`
  fragment MemoField on Memo {
    id
    typedId
    content
    lessonUrl
    topic {
      title
    }
    lesson {
      id
      code
      seqId
      typedId
      title
      type
      version
    }
  }
`,sB=m.gql`
  ${sW}
query RecentLessonMemo($input: GetRecentLessonMemoInput!) {
  recentLessonMemo(input: $input) {
    ...MemoField
  }
}
`,sF=e=>{let{loading:t,data:s,refetch:o}=(0,_.useQuery)(sB,{variables:{input:e},fetchPolicy:"network-only",skip:!e.lessonResourceKey||!e.topicResourceKey});return{loading:t,memo:s?.recentLessonMemo,refetch:o}},sV=m.gql`
  ${sW}
  mutation CreateNewLessonMemo($input: CreateNewLessonMemoInput!) {
    createNewLessonMemo(input: $input) {
      memo {
        ...MemoField
      }
    }
  }
`,sO=()=>{let[e,{loading:t,data:s,reset:o}]=(0,eD.useMutation)(sV);return{create:async t=>{let s=await e({variables:{input:t}});return s.data?.createNewLessonMemo?.memo},loading:t,data:s,reset:o}},sU=m.gql`
  ${sW}
  mutation UpdateLessonMemo($input: UpdateLessonMemoInput!) {
    updateLessonMemo(input: $input) {
      memo {
        ...MemoField
      }
    }
  }
`,s$=()=>{let[e,{loading:t,data:s,reset:o}]=(0,eD.useMutation)(sU);return{mutate:e,loading:t,data:s,reset:o}};var sH=e.i(137658),sK=e.i(598554);let sz=({memo:e,isSameLesson:t,timestamp:s})=>{let{topic:o,lesson:n}=e;return o?.slug||sK.captureMessage("slug is undefined in getTimestampTag"),(0,a.jsxs)(z.default,{href:{pathname:`/topics/${o.slug}/lessons/${n.code}`,query:{timestamp:s,isSameLesson:t?"true":"false"}},rel:"noreferrer noopener",target:"_blank",children:["@",s]})};var sY=e.i(699817);let sX=E.default.bind(sq.default),sQ=()=>{let{topicSlug:e,lessonTypedId:t,lessonSeqId:s,topicResourceKey:o,lessonResourceKey:n}=(0,h.useResourceKeyContext)(),{lesson:l}=(0,eh.useLessonDetailFromContext)(),{topic:i}=(0,tN.useTopicDetailFromContext)(),{memo:r}=sF({topicResourceKey:o,lessonResourceKey:n}),{create:d}=sO(),{mutate:u}=s$(),{toggleDrawer:c}=(0,ex.useDrawerState)(),{drawer:m}=(0,ex.useDrawerState)(),_=async()=>{if(B.Amplitude.logEvent("click.lesson_page_memo_timestamp_record_button_on_video",{lesson:{name:l?.title}}),"memo"===m){let e=document.getElementById("tiptap-editor-toolbar-timestamp"),t=new MouseEvent("click",{cancelable:!0});t.customSkipOnClick=!0,e?.dispatchEvent(t);return}let _=(0,eE.getWistiaApi)(),p=_?.time(),g=(({memo:e,isSameLesson:t,timestamp:s})=>(0,sH.renderToStaticMarkup)((0,a.jsx)(sz,{memo:e,isSameLesson:t,timestamp:s})).replaceAll("&amp;","$_$").replaceAll("%3A",":"))({memo:{lesson:{title:l?.title??"",typedId:t,code:l?.code??n,seqId:s,version:l?.version},topic:{slug:e,version:i?.version}},isSameLesson:!0,timestamp:p?(0,sY.formatSecondsToTimestamp)(p):"00:00"});r&&r.typedId?await u({variables:{input:{content:`${r.content+`<p>${g}</p>`}`,memoTypedId:r.typedId,counter:Date.now()}}}):await d({lessonResourceKey:n,topicResourceKey:o}),c("memo"),setTimeout(()=>{(()=>{let e=document.getElementById("memo-tiptap-editor-wrapper"),t=document.getElementsByClassName("tiptap")?.[0];if(!e||!t)return;let s=window.getSelection(),o=document.createRange(),n=t.lastChild;n&&s&&(s.removeAllRanges(),o.selectNodeContents(n),o.collapse(!1),s.addRange(o),e.scrollTo({top:e.scrollHeight,left:0,behavior:"smooth"}))})()},400)};return(0,a.jsx)("div",{className:sX("container"),onClick:_,children:(0,a.jsx)(sP,{})})};var sJ=e.i(656212);let sZ=m.gql`
  ${sJ.GURU_MESSAGE_FIELDS}
  query GuruThread($studyNoteTypedId: String!) {
    node(typedId: $studyNoteTypedId) {
      ... on StudyNote {
        id
        guruThread {
          id
          typedId
          messages {
            ... GuruMessageFields
          }
        }
      }
    }
  }
`,s0=(e,t)=>{let{data:s,loading:o,error:n,refetch:l}=(0,_.useQuery)(sZ,{...t,variables:{studyNoteTypedId:e},skip:!e});return{loading:o,thread:s?.node?.guruThread,error:n,refetch:l}},s1=m.gql`
  mutation ClearGuruThread($input: ClearGuruThreadInput!) {
    clearGuruThread(input: $input) {
      guruThread {
        id
      }
    }
  } 
`;var s2=e.i(213290),s5=e.i(477543);let s3=m.gql`
  ${sJ.GURU_MESSAGE_FIELDS}
  mutation DislikeGuruMessage($input: DislikeGuruMessageInput!) {
    dislikeGuruMessage(input: $input) {
      guruThread {
        id
        messages {
          ... GuruMessageFields
        }
      }
    }
  }
`,s6=m.gql`
  ${sJ.GURU_MESSAGE_FIELDS}
  mutation LikeGuruMessage($input: LikeGuruMessageInput!) {
    likeGuruMessage(input: $input) {
      guruThread {
        id
        messages {
          ... GuruMessageFields
        }
      }
    }
  } 
`,s4=m.gql`
  query GuruConversationStarter($topicResourceKey: String!, $lessonResourceKey: String!) {
    topicByResourceKey(key: $topicResourceKey) {
      lessonByResourceKey(key: $lessonResourceKey) {
        id
        ... on LessonNote {
          guruConversationStarters
        }
        ... on LessonVideo {
          guruConversationStarters
        }
      }
    }
  }
`;var s9=e.i(579781),s8=e.i(525528),s7=e.i(923735),oe=e.i(206056),ot=e.i(642198),os=e.i(313839),oo=e.i(914410),on=e.i(736976),ol=e.i(706324),oi=e.i(495266),or=e.i(598621);let oa=m.gql`
  subscription CreateGuruMessageSubscription(
    $requestType: GuruRequestType!,
    $clientSubscriptionId: String! = "",
    $authentication: String!,
    $studyNoteTypedId: ID!,
    $content: String,
    $selectedText: String,
    $code: String,
    $errorMessage: String,
    $output: String,
  ) {
    createGuruMessage(
      requestType: $requestType,
      clientSubscriptionId: $clientSubscriptionId,
      authentication: $authentication,
      studyNoteTypedId: $studyNoteTypedId,
      content: $content,
      selectedText: $selectedText,
      code: $code,
      errorMessage: $errorMessage,
      output: $output,
    )
  }
`;var od=e.i(746117),ou=e.i(144450),oc=e.i(454756);let om=({loading:e,size:t,className:s})=>{let[o,n]=(0,c.useState)("idle");return(0,c.useEffect)(()=>{if(e){n("in");let e=window.setTimeout(()=>{n("ing")},oc.ANIMATION_TIME);return()=>{n("out"),clearTimeout(e)}}},[e]),(0,a.jsx)(ou.GuruLogo,{status:o,size:t,className:s})},o_=({studyNoteTypedId:e})=>{let{thread:t}=s0(e),{input:s,contentListDomRef:o,setInput:n}=(0,ol.useGuruClassroomContext)(),[l,i]=(0,c.useState)(),r=(0,on.useGuruMyProfile)(),d=(0,c.useRef)(null);if((0,c.useEffect)(()=>{i(void 0)},[s?.clientSubscriptionId]),(0,c.useEffect)(()=>{if(s?.clientSubscriptionId){let e=window.setTimeout(()=>{let e=d.current;e&&o.current?.scrollTo({behavior:"smooth",top:Math.max(e.offsetTop-24,0)})},200);return()=>{window.clearTimeout(e)}}},[s?.clientSubscriptionId]),(0,c.useEffect)(()=>()=>{n(null),i(void 0)},[e]),!s||s.requestType===O.GuruRequestType.Message&&!s.content||s.requestType===O.GuruRequestType.CodeReview&&!s.code||t?.messages.some(e=>e.clientSubscriptionId===s.clientSubscriptionId))return null;let u=(()=>{switch(s.requestType){case O.GuruRequestType.Message:return s.content;case O.GuruRequestType.CodeReview:return"```\n"+s.code+"\n```";default:return""}})();return e!==s.studyNoteTypedId?null:(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(od.ChatMessage,{ref:d,type:"text",user:r,content:u}),l?(0,a.jsx)(od.ChatMessage,{type:"error",user:{role:"GURU",name:"GURU"},avatar:(0,a.jsx)(ou.GuruLogo,{status:"idle",size:28}),content:l}):(0,a.jsx)(op,{input:s,setErrorMessage:i},s.clientSubscriptionId)]})},op=({input:e,setErrorMessage:t})=>{let{setLoadingCreate:s}=(0,ol.useGuruClassroomContext)(),{loading:o,message:n}=(({variables:e,onData:t,onComplete:s,onError:o})=>{let[n,l]=(0,c.useState)(""),{subscriptionToken:i}=(0,eI.useSubscriptionToken)(),r=(0,oi.useApolloClient)(),{loading:a}=(0,or.useSubscription)(oa,{variables:{...e,authentication:i??""},skip:!e.requestType||!i||!e.studyNoteTypedId,onData:e=>{let s=e?.data?.data;s?.createGuruMessage&&(0,T.flushSync)(()=>{l(e=>e+s.createGuruMessage)}),t?.()},onComplete:()=>{r.refetchQueries({include:["GuruThread"]}),s?.()},onError:o});return{loading:a,message:n}})({variables:{requestType:e.requestType,clientSubscriptionId:e.clientSubscriptionId,studyNoteTypedId:e.studyNoteTypedId,content:e.requestType===O.GuruRequestType.Message?e.content:void 0,selectedText:e.requestType===O.GuruRequestType.Message?e.selectedText:void 0,code:e.requestType===O.GuruRequestType.CodeReview?e.code:void 0,errorMessage:e.requestType===O.GuruRequestType.CodeReview?e.errorMessage:void 0,output:e.requestType===O.GuruRequestType.CodeReview?e.output:void 0},onError:e=>{"You have reached your daily usage limit."===e.message?t(oc.EXCEEDED_MESSAGE):t(oc.GENERAL_ERROR_MESSAGE)}});return(0,c.useEffect)(()=>(s(o),()=>{s(!1)}),[o]),(0,a.jsx)(od.ChatMessage,{type:"text",user:{role:"GURU",name:"GURU"},avatar:(0,a.jsx)(om,{loading:o,size:28}),loading:o,content:n})};var og=e.i(883747);let oh=({onReport:e})=>{let{topicResourceKey:t,lessonResourceKey:s}=(0,h.useResourceKeyContext)(),{lesson:o}=(0,eh.useLessonDetailFromContext)(),{topic:n,lesson:l}=(0,$.useLessonAbstractFromPath)(),{setInput:i,contentListDomRef:r,isAvailable:d,loadingCreate:u}=(0,ol.useGuruClassroomContext)(),{thread:m,loading:p,error:g}=s0(o?.studyNote?.typedId??"",{onCompleted:()=>{r.current?.scrollTo({top:r.current.scrollHeight,behavior:"auto"})}}),f=(0,on.useGuruMyProfile)(),{resetDrawer:y}=(0,ex.useDrawerState)(),{clear:v}=(()=>{let[e]=(0,eD.useMutation)(s1,{refetchQueries:["GuruThread"]});return{clear:async t=>e({variables:{input:t}})}})(),x=(0,c.useMemo)(()=>m?.messages?(0,oo.mapThread)({raw:m.messages,myProfile:f}):[],[m?.messages]),b=x[x.length-1]?.id,{logGuruMessageSend:C}=(0,og.useLogGuruMessageSend)(),w=async e=>{if(!e)return;let t=o?.studyNote?.typedId;t&&(i({requestType:O.GuruRequestType.Message,studyNoteTypedId:t,content:e}),C({type:" ",content:e,placement:""}))},{isScrolled:j}=(0,s2.useIsScrolled)(r,b),[S,N]=(0,c.useState)(!1);(0,c.useEffect)(()=>{N(e=>e||u)},[u]);let k=(e,t)=>{B.Amplitude.logEvent(`click.${e}`,{topic:{id:n?.id},lesson:{id:l?.id,name:l?.title},...t})},{thumbsUp:T,thumbsDown:I}=(()=>{let{like:e}=(()=>{let[e]=(0,eD.useMutation)(s6);return{like:async t=>e({variables:{input:t}})}})(),{dislike:t}=(()=>{let[e]=(0,eD.useMutation)(s3);return{dislike:async t=>e({variables:{input:t}})}})();return{thumbsUp:({threadTypedId:t,messageTypedId:s,undo:o})=>e({guruMessageTypedId:s,guruThreadTypedId:t,undo:o}),thumbsDown:({threadTypedId:e,messageTypedId:s,undo:o})=>t({guruMessageTypedId:s,guruThreadTypedId:e,undo:o})}})(),M=(({topicResourceKey:e,lessonResourceKey:t})=>{let{data:s}=(0,_.useQuery)(s4,{variables:{topicResourceKey:e,lessonResourceKey:t},skip:!e||!t});return s?.topicByResourceKey?.lessonByResourceKey?.guruConversationStarters??[]})({topicResourceKey:t,lessonResourceKey:s});return p&&!Array.isArray(m?.messages)?(0,a.jsx)(tF.Loading,{}):(0,a.jsx)(s7.ChatLayout,{header:(0,a.jsx)(oe.ChatHeader,{isScrolled:j,buttons:(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(s8.IconButton,{button:{type:"button",onClick:()=>{(0,ei.openModal)({title:"   ?",content:"    .",primaryButton:{text:"",onClick:async e=>{if(i(null),m)try{await v({guruThreadTypedId:m.typedId})}finally{k("lesson_guru_thread_reset_button"),e()}}},hasXButton:!0})}},icon:{name:"rotateRight"}}),(0,a.jsx)(s8.IconButton,{button:{type:"button",onClick:y},icon:{name:"xMark"}})]})}),content:(0,a.jsx)(ot.ChatContent,{list:x,messageStreaming:o?.studyNote?.typedId&&(0,a.jsx)(o_,{studyNoteTypedId:o.studyNote.typedId}),onThumbsUp:(e,t)=>{T({threadTypedId:m.typedId,messageTypedId:e,undo:t});let s=x.findIndex(t=>t.typedId===e);k("lesson_page_guru_positive_feedback_button",{thread:{id:m.id},question_to_guru:{content:x[s-1]?.content},answer_from_guru:{content:x[s]?.content}})},onThumbsDown:(t,s)=>{I({threadTypedId:m.typedId,messageTypedId:t,undo:s});let o=x.findIndex(e=>e.typedId===t);k("lesson_page_guru_negative_feedback_button",{thread:{id:m.id},question_to_guru:{content:x[o-1]?.content},answer_from_guru:{content:x[o]?.content}}),s||e()},conversationStarter:(0,a.jsx)(s9.GuruConversationStarter,{list:M,onClick:e=>{w(e),m&&k("lesson_page_guru_conversation_starter",{thread:{id:m.id},question_to_guru:{content:e}})}}),isSubmitted:S}),contentWrapperRef:r,footer:d&&(0,a.jsx)(os.ChatFooter,{errorCode:(0,s5.getErrorCode)(g),onSubmit:w,onReport:()=>{e(),k("lesson_page_guru_report_button")}})})};var of=e.i(57878),oy=e.i(803335),ov=e.i(677201),ox=e.i(699977);let ob=E.default.bind(ox.default),oC=({typedId:e,content:t,topic:s,lesson:o,lessonUrl:n,onClick:l})=>(0,a.jsxs)("button",{className:ob("container"),onClick:l,children:[(0,a.jsx)("div",{className:ob("content"),children:(t??"").replace(/(<([^>]+)>)/ig,"").replaceAll("&lt;","<").replaceAll("&gt;",">").replaceAll("&amp;","&")}),(0,a.jsxs)("div",{className:ob("breadcrumb"),children:[(0,a.jsx)("div",{className:ob("topic"),children:s.title}),(0,a.jsx)(K.Icon,{name:"chevron",thickness:"bold",rotate:90,size:"xsmall",color:"--gray100"}),(0,a.jsx)("a",{href:n,onClick:t=>{t.stopPropagation(),B.Amplitude.logEvent("click.lesson_page_lesson_related_memo",{lesson:{typedId:o.typedId,name:o.title},memo:{typedId:e}})},target:"_blank",rel:"noreferrer noopener",className:ob("link"),children:o.title})]})]});var ow=e.i(20085);let oj=E.default.bind(ow.default),oS=({description:e,onNew:t})=>(0,a.jsxs)("div",{className:oj("container"),children:[(0,a.jsx)("div",{className:oj("icon"),children:(0,a.jsx)(K.Icon,{name:"pencil",size:"large"})}),(0,a.jsx)("div",{className:oj("description"),children:e}),(0,a.jsx)(ta.Button,{variant:"secondary",onClick:t,children:""})]});var oN=e.i(403687);let ok=E.default.bind(oy.default),oT=({loading:e,isMore:t,hasFilter:s,toggle:o,list:n,onClickNew:l,onClickItem:i,onScrollEnd:r})=>{let{resetDrawer:d}=(0,ex.useDrawerState)(),u=(0,c.useRef)(null),{isScrolled:m}=(0,s2.useIsScrolled)(u),{intersected:_,ref:p}=(0,oN.useIntersectionObserver)(),{setMemo:g}=(0,of.useMemoStore)();return(0,c.useEffect)(()=>{_&&r()},[_]),(0,a.jsxs)("div",{className:ok("container"),children:[(0,a.jsxs)("header",{className:ok("header",{border:m}),children:[(0,a.jsxs)("div",{className:ok("top"),children:[(0,a.jsx)("div",{className:ok("title"),children:""}),(0,a.jsxs)("div",{className:ok("buttons"),children:[(0,a.jsx)(ta.Button,{variant:"secondary",size:"small",onClick:l,children:" "}),(0,a.jsx)("button",{type:"button",onClick:d,children:(0,a.jsx)(K.Icon,{name:"xMark",hover:!0})})]})]}),(0,a.jsxs)("div",{className:ok("filter"),children:[(0,a.jsx)("span",{className:ok("label"),children:"    "}),(0,a.jsx)("div",{className:ok("toggle"),children:o})]})]}),(0,a.jsxs)("div",{className:ok("body"),children:[e&&(0,a.jsx)(ov.PopupLoader,{}),!e&&n?.length===0&&(0,a.jsx)(oS,{description:s?"    ":"  ",onNew:l}),(0,a.jsxs)("div",{className:ok("list"),ref:u,children:[n?.map(e=>(0,a.jsx)(oC,{...e,onClick:()=>{i(e),g(e)}},e.id)),(0,a.jsx)("div",{className:ok("more"),ref:p,children:t&&(0,a.jsx)(ov.PopupLoader,{})})]})]})]})},oI=m.gql`
  ${sW}
  query CurrentUserLessonMemosOffset($topicResourceKey: String, $first: Int, $after: String, $last: Int, $before: String) {
  currentUserLessonMemosOffset(topicResourceKey: $topicResourceKey, first: $first, after: $after, last: $last, before: $before, orderBy: {
    field: UPDATED_AT
    direction: DESC
  }) {
    totalCount
    pageInfo {
      hasNextPage
      endCursor
    }
    edges {
      node {
        ...MemoField
      }
    }
  }
}
`,oM=({topicResourceKey:e,hasFilter:t,toggle:s,onNew:o,onClickItem:n})=>{let{loading:l,memos:i,isMore:r,fetchMore:d}=(e=>{let{loading:t,data:s,fetchMore:o}=(0,_.useQuery)(oI,{variables:e,fetchPolicy:"cache-and-network"}),n=s?.currentUserLessonMemosOffset?.pageInfo?.hasNextPage,l=s?.currentUserLessonMemosOffset?.edges.map(({node:e})=>e)??[],i=async()=>{!t&&n&&await o({variables:{first:10,after:s?.currentUserLessonMemosOffset?.pageInfo?.endCursor}})};return{loading:t,memos:l,isMore:n,fetchMore:i}})(t?{topicResourceKey:e}:void 0);return(0,a.jsx)(oT,{loading:l,hasFilter:t,toggle:s,isMore:r,list:i,onClickNew:o,onClickItem:n,onScrollEnd:d})};var oE=e.i(95342),oA=e.i(596703);let oL=(0,tM.default)(async()=>(await e.A(173221)).TiptapMemoEditor,{loadableGenerated:{modules:[923328]},ssr:!1}),oG=E.default.bind(oE.default),oD=({initialContent:e,loading:t,hasData:s,onClickBack:o,onClose:n,onChange:l,onNew:i,onDelete:r})=>{let[d,u]=(0,c.useState)(!1),m=(0,c.useCallback)(e=>{d?u(!1):l(e)},[d,l]);return(0,a.jsxs)("div",{className:oG("container"),children:[(0,a.jsxs)("header",{className:oG("header",{disabled:t}),children:[(0,a.jsxs)("div",{className:oG("back"),children:[(0,a.jsx)(ta.Button,{variant:"text",leftIcon:(0,a.jsx)(K.Icon,{name:"chevron",thickness:"bold",rotate:270}),onClick:o,children:""}),(0,a.jsx)(t5,{loading:t,saved:s})]}),(0,a.jsxs)("div",{className:oG("buttons"),children:[e&&(0,a.jsx)(oA.MorePopover,{menus:[{text:" ",onClick:()=>{u(!0),i()}},{text:"",onClick:r}]}),(0,a.jsx)("button",{type:"button",onClick:n,children:(0,a.jsx)(K.Icon,{name:"xMark",hover:!0})})]})]}),(0,a.jsx)("div",{className:oG("editor"),children:(0,a.jsx)(oL,{onChange:m,isReset:d})})]})};var oq=e.i(252450);let oR=({lessonTypedId:e,lessonName:t,memoTypedId:s})=>{B.Amplitude.logEvent("click.lesson_page_memo_delete_button",{lesson:{typedId:e,name:t},memo:{typedId:s}})},oP=m.gql`
  ${sW}
  mutation RestoreDeletedLessonMemo($input: RestoreDeletedLessonMemoInput!) {
    restoreDeletedLessonMemo(input: $input) {
      memo {
        ...MemoField
      }
    }
  }
`,oW=m.gql`
  ${sW}
  mutation DeleteMemo($input: DeleteLessonMemoInput!) {
    deleteLessonMemo(input: $input) {
      memo {
        ...MemoField
      }
    }
  }
`,oB=()=>{let{lessonTypedId:e,topicResourceKey:t,lessonResourceKey:s}=(0,h.useResourceKeyContext)(),{lesson:o}=(0,eh.useLessonDetailFromContext)(),n=o?.title??"",{resetDrawer:l}=(0,ex.useDrawerState)(),{loading:i,memo:r,refetch:d}=sF({topicResourceKey:t,lessonResourceKey:s}),{create:u,loading:m,data:_,reset:p}=sO(),{mutate:g,loading:f,data:y,reset:v}=s$(),{deleteMemo:x,loading:b,data:C,reset:w}=(()=>{let[e,{loading:t,data:s,reset:o}]=(0,eD.useMutation)(oW);return{deleteMemo:t=>e({variables:{input:t}}),loading:t,data:s,reset:o}})(),{restoreMemo:j}=(()=>{let[e,{loading:t,data:s,reset:o}]=(0,eD.useMutation)(oP);return{restoreMemo:t=>e({variables:{input:t}}),loading:t,data:s,reset:o}})(),S=m||f||b,N=()=>{p(),v(),w()},[k,T]=(0,c.useState)(null),[I,M]=(0,c.useState)(!0),{memo:E,setMemo:A,page:G,setPage:D}=(0,of.useMemoStore)(),q=t6(async t=>{if(""===t.replace(/(<([^>]+)>)/ig,"")&&E){await g({variables:{input:{counter:Date.now(),content:"",memoTypedId:E.typedId}}}),oR({lessonTypedId:e,lessonName:n,memoTypedId:E.typedId}),A({...E,content:""});return}E&&(await g({variables:{input:{counter:Date.now(),content:t,memoTypedId:E.typedId}},onCompleted:({updateLessonMemo:e})=>{A(e.memo)}}),await (0,oq.wait)(1e3))},500),R=async()=>{let o=await u({topicResourceKey:t,lessonResourceKey:s});o&&(D("detail"),A(o),N(),(({lessonTypedId:e,lessonName:t})=>{B.Amplitude.logEvent("click.lesson_page_new_memo_button",{lesson:{typedId:e,name:t}})})({lessonTypedId:e,lessonName:n}))},P=async()=>{if(!E)return;let t=E.typedId;await x({memoTypedId:t}),T(t),oR({lessonTypedId:e,lessonName:n,memoTypedId:t}),D("list")};return((0,c.useEffect)(()=>{if(!i)return r&&A(r),()=>{A(null)}},[r?.id,i]),(0,c.useEffect)(()=>{D("detail"),e&&d()},[e]),i)?(0,a.jsx)(ov.PopupLoader,{}):(0,a.jsxs)(a.Fragment,{children:["detail"===G&&(0,a.jsx)(oD,{initialContent:E?.content??"",onClickBack:()=>{D("list"),A(null),(({lessonTypedId:e,lessonName:t})=>{B.Amplitude.logEvent("click.lesson_page_memo_list_button",{lesson:{typedId:e,name:t}})})({lessonTypedId:e,lessonName:n})},loading:S,hasData:!!_||!!y||!!C,onClose:()=>{S||l()},onChange:q,onNew:R,onDelete:P}),"list"===G&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(oM,{topicResourceKey:t,hasFilter:I,toggle:(0,a.jsx)(L.Toggle,{active:I,size:"small",onClick:()=>{M(e=>!e),(({lessonTypedId:e,lessonName:t})=>{B.Amplitude.logEvent("click.lesson_page_memo_list_related_topic_toggle",{lesson:{typedId:e,name:t}})})({lessonTypedId:e,lessonName:n})}}),onNew:R,onClickItem:t=>{T(null),N(),D("detail"),(({lessonTypedId:e,lessonName:t,memoTypedId:s})=>{B.Amplitude.logEvent("click.lesson_page_memo_detail",{lesson:{typedId:e,name:t},memo:{typedId:s}})})({lessonTypedId:e,lessonName:n,memoTypedId:t.typedId})}}),k&&(0,a.jsx)(e_,{title:" .",visible:!!k,iconName:"rotateRight",buttonText:"",onClick:async()=>{let{data:t}=await j({memoTypedId:k});A(t?.restoreDeletedLessonMemo?.memo??null),await d(),D("detail"),(({lessonTypedId:e,lessonName:t,memoTypedId:s})=>{B.Amplitude.logEvent("click.lesson_page_memo_delete_undo_button",{lesson:{typedId:e,name:t},memo:{typedId:s}})})({lessonTypedId:e,lessonName:n,memoTypedId:k})},onClose:()=>T(null)})]})]})};var oF=e.i(329946);let oV=({lesson:{language:e},topic:t})=>{let s=e===O.Language.Null,o=t?.currentUserEnrollment?.id,n=e&&(0,oF.isLanguageRequireTerminal)(e)&&!o;return s||n?tA.LessonSideViewType.none:e===O.Language.JupyterDsTrm?tA.LessonSideViewType.jupyter:e===O.Language.Canvas?tA.LessonSideViewType.canvas:e===O.Language.Markdown?tA.LessonSideViewType.markdown:tA.LessonSideViewType.codeEditor},oO=m.gql`
  mutation CreateLessonReport($input: CreateLessonReportInput!) {
    createLessonReport(input: $input) {
      report {
        id
      }
    }
  }
`;var oU=e.i(112158),o$=e.i(83909);let oH=E.default.bind(oU.default),oK=({lessonTypedId:e,topicTypedId:t,close:s})=>{let{handleSubmit:o,control:n}=(0,t3.useForm)(),{createReport:l,loading:i}=(()=>{let[e,{loading:t}]=(0,eD.useMutation)(oO);return{loading:t,createReport:async t=>{await e({variables:{input:t}})}}})(),r=async({content:o})=>{if(!i){if(o.length<1)return void(0,o$.openToast)({message:" .",icon:"warning"});await l({lessonTypedId:e,topicTypedId:t,content:o}),(0,o$.openToast)({message:".   ."}),s()}};return(0,a.jsx)("div",{className:oH("container"),children:(0,a.jsxs)("form",{onSubmit:o(r),children:[(0,a.jsx)(t3.Controller,{name:"content",defaultValue:"",control:n,render:({field:e})=>(0,a.jsx)(ss.Textarea,{value:e.value,onChange:e.onChange,placeholder:"  1~2    ,    .",maxLength:300})}),(0,a.jsx)(ta.Button,{type:"submit",variant:"primary",size:"medium",className:oH("button"),disabled:i,children:""})]})})};var oz=e.i(230680),oY=e.i(102289),oX=e.i(715559),oQ=e.i(478293),oJ=e.i(18287);let oZ=E.default.bind(oX.default),o0=({description:e,relatedTopics:t})=>(0,a.jsx)("div",{className:oZ("container"),children:(0,a.jsx)("div",{className:oZ("notification"),children:(0,a.jsx)(oz.UiNotificationBar,{onClick:()=>{(0,oQ.openPortal)(s=>(0,a.jsx)(oJ.ScreenOverlay,{onClick:s,children:(0,a.jsxs)("div",{className:oZ("modal"),children:[(0,a.jsx)(oY.UiRenewalDescription,{title:"  !",description:e,relatedTopics:t,theme:"gray"}),(0,a.jsx)(s8.IconButton,{button:{type:"button",onClick:s,className:oZ("closeButton")},icon:{name:"xMark",size:{l:"large"},color:"--txt-secondary"}})]})}))},children:"  !"})})});var o1=e.i(875537),o2=e.i(16260),o5=e.i(846812);let o3=E.default.bind(o5.default),o6=({questionLink:e,title:t,content:s,answerCount:o,isAccepted:n,hasHoverUnderline:l=!1,hasLargeTitle:i=!1,disableAnswer:r=!1})=>(0,a.jsx)(z.default,{href:e,passHref:!0,target:"_blank",children:(0,a.jsxs)("div",{className:o3("container",{hoverUnderline:l}),children:[(0,a.jsxs)("div",{className:o3("body"),children:[(0,a.jsx)("p",{className:o3("title",{largeTitle:i}),children:(0,a.jsx)(o2.HighlightText,{content:t,filteredStyle:{fontWeight:700}})}),(0,a.jsx)("p",{className:o3("content"),children:(0,o1.replaceTagString)(s??"")})]}),!r&&(0,a.jsx)("div",{className:o3("answerWrapper"),children:(0,a.jsxs)("div",{className:o3("answer",{accepted:n}),children:[n&&(0,a.jsx)(K.Icon,{name:"check",thickness:"bold",size:"small",color:"--mint70"}),(0,a.jsxs)("span",{children:[" ",o]})]})})]})});var o4=e.i(801340);let o9=E.default.bind(o4.default),o8=({question:e})=>(0,a.jsxs)("div",{className:o9("container"),id:"UnansweredQuestionSection",children:[(0,a.jsxs)("div",{className:o9("header"),children:[(0,a.jsx)("p",{className:o9("title"),children:"   "}),(0,a.jsx)("p",{className:o9("point"),children:"100XP"})]}),(0,a.jsx)("div",{className:o9("questionWrapper"),onClick:()=>{B.Amplitude.logEvent("click.lesson_page_unanswered_question_box",{question:{id:e.id,name:e.title}})},children:(0,a.jsx)(o6,{questionLink:`/community/questions/${e.typedId}`,title:e.highlightedTitle??e.title,content:e.truncatedContent??e.content,answerCount:e.answers?.length??0,isAccepted:!!e.acceptedAnswer?.id,disableAnswer:!0})})]});var o7=e.i(2191);let ne=E.default.bind(o7.default),nt=({relatedQuestions:e,unansweredQuestion:t})=>e.length>0||t?(0,a.jsxs)("div",{className:ne("container"),children:[e.map(e=>(0,a.jsx)("div",{className:ne("questionWrapper"),onClick:()=>{B.Amplitude.logEvent("click.lesson_page_related_question_box",{question:{id:e.id,name:e.title}})},children:(0,a.jsx)(o6,{questionLink:`/community/questions/${e.typedId}`,title:e.highlightedTitle??e.title,content:e.truncatedContent??e.content,answerCount:e.answers?.length??0,isAccepted:!!e.acceptedAnswer?.id})},e.id)),t&&(0,a.jsx)(o8,{question:t})]}):(0,a.jsx)("div",{className:ne("emptyText"),children:"    ."}),ns=({linkToSeeMore:e})=>(0,a.jsx)(z.default,{href:e,target:"_blank",rel:"noopener noreferrer",onClick:()=>{B.Amplitude.logEvent("click.lesson_page_more_related_question_button")},children:(0,a.jsx)(ta.Button,{type:"button",variant:"secondary",size:"medium",children:"  "})});var no=e.i(878061);let nn=({linkToAskQuestion:e,openMembershipModal:t})=>{let{canWrite:s}=(0,no.useMyCommunityPermission)();return(0,a.jsx)(z.default,{href:e,target:"_blank",rel:"noopener noreferrer",onClick:e=>{s?B.Amplitude.logEvent("click.ask_question_button"):(e.preventDefault(),t())},children:(0,a.jsx)(ta.Button,{type:"button",variant:"primary",size:"medium",leftIcon:"pencil",children:(0,a.jsx)("span",{children:""})})})};var nl=e.i(783880);let ni=E.default.bind(nl.default),nr=()=>{let{topicResourceKey:e,lessonResourceKey:t,lessonTypedId:s}=(0,h.useResourceKeyContext)(),{topic:o}=(0,tN.useTopicDetailFromContext)(),{relatedQuestions:n,sampleUnansweredQuestion:l}=ey({input:{topicResourceKey:e,lessonResourceKey:t}}),i=n&&n.length>0,{openToUseThisFeatureModal:r}=(()=>{let e=(0,H.useRouter)(),{hadSubscription:t}=(0,tt.useMySubscription)();return{openToUseThisFeatureModal:()=>{t?(0,ei.openModal)({title:"  .",content:"      .\n    !",primaryButton:{text:" ",onClick:()=>e.push("/me/account?tab=plan")},secondaryButton:{text:""}}):(0,ei.openModal)({title:"  .",content:"      .\n     !",primaryButton:{text:" ",onClick:()=>e.push("/subscription")},secondaryButton:{text:""}})}}})();return(0,a.jsxs)("div",{className:ni("container"),children:[(0,a.jsx)("p",{className:ni("title"),children:" "}),(0,a.jsx)(nt,{relatedQuestions:n?.filter(e=>(e?.answers??[]).length>0&&e?.status===O.QuestionStatus.Published)??[],unansweredQuestion:l??void 0}),(0,a.jsxs)("div",{className:ni("buttons"),children:[i&&(0,a.jsx)("div",{className:ni("buttonWrapper"),children:(0,a.jsx)(ns,{linkToSeeMore:{pathname:"/community/questions",query:{topicCode:o?.code,chapterId:o?.chapters?.find(e=>e.lessons.some(e=>e.typedId===s))?.id,lessonCode:t}}})}),(0,a.jsx)("div",{className:ni("buttonWrapper"),children:(0,a.jsx)(nn,{linkToAskQuestion:{pathname:"/community/questions/write",query:{topicResourceKey:e,lessonResourceKey:t}},openMembershipModal:r})})]})]})};var na=e.i(456402),nd=e.i(655770),nu=e.i(453833),nc=e.i(906993);let nm=m.gql`
  mutation DislikeLesson($input: DislikeLessonInput!) {
    dislikeLesson(input: $input) {
      dislike
    }
  }
`,n_=m.gql`
  mutation LikeLesson($input: LikeLessonInput!) {
    likeLesson(input: $input) {
      like
    }
  }
`,np=m.gql`
  mutation SubmitLessonFeedback($input: SubmitLessonFeedbackInput!) {
    submitLessonFeedback(input: $input) {
      submitted
    }
  }
`,ng=({lessonId:e,like:t,dislike:s})=>{let[o,n]=(0,c.useState)(null),{likeLesson:l}=(e=>{let[t]=(0,eD.useMutation)(n_);return{likeLesson:s=>{t({variables:{input:{lessonId:e,undo:s}}})}}})(e),{dislikeLesson:i}=(e=>{let[t]=(0,eD.useMutation)(nm);return{dislikeLesson:s=>{t({variables:{input:{lessonId:e,undo:s}}})}}})(e),{openFeedbackModal:r}=(0,nc.useFeedbackModal)(),{submitLessonFeedback:d}=(()=>{let[e]=(0,eD.useMutation)(np);return{submitLessonFeedback:e}})(),u=t=>{d({variables:{input:{lessonId:e,content:t}}})};return(0,c.useEffect)(()=>{t?n("like"):s?n("dislike"):n(null)},[s,t,e]),(0,a.jsx)(nu.UiContentEvaluation,{headerText:"  ?",currentEvaluation:o,onLikeButtonClick:()=>{"like"===o?(l(!0),n(null)):(l(!1),n("like"))},onDislikeButtonClick:()=>{"dislike"===o?(i(!0),n(null)):(i(!1),n("dislike"),r({onSubmit:u}))}})};var nh=e.i(104514),nf=e.i(60258),ny=e.i(321643);let nv={src:e.i(827278).default,width:1160,height:640,blurWidth:8,blurHeight:4,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAECAYAAACzzX7wAAAAj0lEQVR42gGEAHv/AGQ36v94QdX/jk2+/6JWpv+2YJD/yml4/99zYf/yf1L/AGg76v96RNX/ekqh/3dLhP9/UHX/o1xs/95xXv/xekj/AGg86v97RdX/fkum/31MiP+IVHr/qWBv/950YP/xe0n/AGk96v97Rtb/j0+//6FWpv+3Y5H/zG16/990Yf/ye0n/+0xSDYls4QUAAAAASUVORK5CYII="};var nx=e.i(795424),nb=e.i(1295),nC=e.i(362169),nw=e.i(491619);let nj={src:e.i(158474).default,width:84,height:84,blurWidth:8,blurHeight:8,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAICAYAAADED76LAAAA40lEQVR42lWPy2rCQBSGJ3NOJnbddUsvSYp1mtBEmcVUFCuUOqFUjOAFFLyCuPB9fAlfQdy7c+PCZ3FGUXBxVuf7bwQBIHZz/F/Wk0K2KgNfya9orF4fJKcUgYg3n1eCSDi2w5A6aIM+vGM591cYiAyqJZVhTD8Bym63Kb1RxygNpJ0SouJAZpDirBS1l73VfljcHT6fJg3tBh9eIkktDk/AXDy3Nv3FdlpYb937cQoXoFf5Ts4RFvSz+bT8+Jda1jVCkbz3zotcnEoyQGTUvi2pV0LwEvIf0VahX5PG1pS7zDwC8GUsRRzMSzoAAAAASUVORK5CYII="},nS={src:e.i(219783).default,width:84,height:84,blurWidth:8,blurHeight:8,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAICAYAAADED76LAAABC0lEQVR42hXQXStDYQDA8ecrSZSiZs4zbdamzHaxtjW2Y7SZKWxDSVGsSJFy46XcmEIudmNXluWlKe1Ia7PmkqxEU3bqr32Fn5CKxG0OkrScEDcUiPQ8E7Zf4bRFkdKECNg8HHkP2XdmSVnvmDNoqB1lVFlgyBpFZManKEZXuB7bJreR53S5wnS3hr/tFV9fFlFPOPiKu/jc2+S39ka99sNxskKk6wVfewnxPdOLPiv5243TfMzxcVPkYv6BBeMToU4NcTtiRJ800QwP0FhPUF7cIe06Y818z4ThHBGzKlS9/ehBOw3VSzW4RMaTJjV4ybAMIUyKQsyskHdYePePUlJXOXBv4bEEaBH8A++MpVSZpgYOAAAAAElFTkSuQmCC"},nN=E.default.bind(nC.default),nk=({targetNode:e,onStateChange:t,onSubmit:s})=>{let[o,n]=(0,c.useState)(!1),l=(0,c.useRef)(null),{lesson:i}=(0,eh.useLessonDetailFromContext)(),{topic:r}=(0,tN.useTopicDetailFromContext)(),{setIsGuruInContent:d}=(0,F.useClassroomSetting)();(0,c.useEffect)(()=>{t(o)},[o]),(0,c.useEffect)(()=>()=>{t(!1)},[]);let u="PRE"===e.tagName&&e.querySelector("code")?nb.CODE_GURU_ACTION_OPTION_PRESET:nb.DEFAULT_GURU_ACTION_OPTION_PRESET;return(0,a.jsxs)("div",{className:nN("container"),children:[(0,a.jsx)("div",{title:"GURU ",ref:l,role:"button",className:nN("trigger"),onMouseDown:e=>{e.stopPropagation(),e.preventDefault()},onMouseUp:()=>{window.getSelection()?.removeAllRanges()},onClick:()=>{n(e=>!e),(0,oQ.openPortal)((0,a.jsx)(a.Fragment,{}),{uniqId:"guru-note-text-select-action"}),B.Amplitude.logEvent("click.lesson_page_guru_popup_button",{topic:{id:r?.id,name:r?.title},lesson:{id:i?.id,name:i?.title,type:i?.type},placement:" "})},children:(0,a.jsx)(nw.default,{src:o?nS:nj,alt:"GURU",width:28,height:28,className:"plane"})}),o&&(0,a.jsxs)(a.Fragment,{children:[(0,T.createPortal)((0,a.jsx)("div",{className:nN("overlay")}),e),(0,a.jsx)(nx.UiGuruActionOption,{position:{top:e.clientHeight+4,left:0},onClose:()=>n(!1),onSubmit:s,presets:u,topic:{id:r?.id,name:r?.title},lesson:{id:i?.id,name:i?.title,type:i?.type},onClickOffButton:()=>d(!1)})]})]})},nT=E.default.bind(nC.default),nI=["wistia_embed","codeit-fiddle","file-tab","table-wrapper"],nM=()=>{let{isAvailable:e,setInput:t,loadingCreate:s}=(0,ol.useGuruClassroomContext)(),{isGuruInContent:o}=(0,F.useClassroomSetting)(),[n,l]=(0,c.useState)(null),[i,r]=(0,c.useState)(null),[d,u]=(0,c.useState)(!1),{lesson:m}=(0,eh.useLessonDetailFromContext)(),_=m?.studyNote?.typedId,p=(0,t9.useInvalidEnrollmentAlert)({alertType:"feature"}),{logGuruMessageSend:g}=(0,og.useLogGuruMessageSend)();return(0,c.useEffect)(()=>{if(!e||!o||s)return;let t=document.querySelector("#lessonContentViewer");if(!t)return;let n=(0,sw.debounce)(e=>{if(d)return;if(!(e.target instanceof HTMLElement))return void l(null);let t=e.target.closest(".general-content-viewer > *, .general-content-viewer li");l(t?.textContent?.trim()&&nI.every(e=>!t?.classList.contains(e))?t:null)},100),i=()=>{d||l(null)};return t.addEventListener("mouseover",n),t.addEventListener("mouseleave",i),()=>{t.removeEventListener("mouseover",n),t.removeEventListener("mouseleave",i)}},[e,d,s,o]),(0,c.useEffect)(()=>{if(n&&e&&o&&!s)return n.classList.add(nT("target")),r((0,T.createPortal)((0,a.jsx)(nk,{targetNode:n,onStateChange:u,onSubmit:(o,i)=>{if(!o||!e||!n||s)return;if(!_)return void p();let r=n.cloneNode(!0);r instanceof HTMLElement&&r.querySelector('[data-guru="action-option"]')?.remove();let a=r?.textContent?.trim()||"";t({requestType:O.GuruRequestType.Message,studyNoteTypedId:_,content:o,selectedText:a}),g({type:i.type,content:o,placement:" "}),l(null),u(!1)}}),n)),()=>{n.classList.remove(nT("target")),r(null)}},[n,e,s,_,o]),i};var nE=e.i(694396),nA=e.i(807475);let nL=E.default.bind(nE.default),nG=({onClose:e,guides:t,onCheck:s,studyNoteStatus:o})=>{let n=t.filter(e=>e.checked).length;return(0,a.jsxs)("div",{className:nL("container"),children:[(0,a.jsxs)("div",{className:nL("header"),children:[(0,a.jsx)("h2",{className:nL("title"),children:" "}),(0,a.jsx)("p",{className:nL("subtitle"),children:"   !"}),e&&(0,a.jsx)("div",{className:nL("close"),children:(0,a.jsx)(s8.IconButton,{button:{onClick:e,type:"button"},icon:{name:"xMark",size:"medium"}})})]}),(0,a.jsxs)("div",{className:nL("content"),children:[o&&o!==O.StudyNoteStatus.Passed&&t.length>0&&(0,a.jsxs)("div",{className:nL("indicator"),children:[n===t.length?(0,a.jsx)(K.Icon,{name:"check",size:"medium",color:"--purple60",thickness:"bold"}):(0,a.jsxs)("svg",{className:nL("progress"),children:[(0,a.jsx)("circle",{cx:10,cy:10,r:9,strokeWidth:2,fill:"transparent",className:nL("progressCircle")}),(0,a.jsx)("circle",{cx:10,cy:10,r:9,strokeWidth:2,strokeLinecap:"round",fill:"transparent",strokeDasharray:2*Math.PI*9,strokeDashoffset:2*Math.PI*9*(1-n/t.length),className:nL("progressBar")})]}),(0,a.jsxs)("p",{className:nL("indicatorLabel"),children:["  ",(0,a.jsx)("mark",{children:n}),"/",t.length]})]}),(0,a.jsx)("div",{className:nL("guides"),children:t.map(e=>(0,a.jsxs)("div",{className:nL("guide"),onClick:()=>s?.(e.id,!e.checked),role:"button",tabIndex:0,children:[(0,a.jsx)("div",{className:nL("checkBox"),children:(0,a.jsx)(nA.Checkbox,{checked:e.checked})}),(0,a.jsx)("div",{className:nL("guideLabel"),children:(0,a.jsx)(tg.GeneralContentViewer,{content:e.content??""})})]},e.id))})]})]})};var nD=e.i(392033);let nq=m.gql`
  ${nD.EXPLANATION_AND_HINTS_FRAGMENT}
  mutation SubmitGuideCheck(
    $input: SelfCheckInput!,
  ) { 
    submitGuideCheck(input: $input) {
      __typename
      id
      selfCheckedGuides
      status
      ...explanationAndHintsFragment
    }
  }
`,nR=m.gql`
  ${nD.EXPLANATION_AND_HINTS_FRAGMENT}
  mutation CancelGuideCheck(
    $input: SelfCheckInput!,
  ) {
    cancelGuideCheck(input: $input) {
      __typename
      id
      selfCheckedGuides
      status
      ...explanationAndHintsFragment
    }
  }
`;var nP=e.i(376109),nW=e.i(453248);let nB=()=>{let{resetDrawer:e}=(0,ex.useDrawerState)(),{lesson:t}=(0,eh.useLessonDetailFromContext)(),{topic:s}=(0,tN.useTopicDetailFromContext)(),{toggle:o}=(()=>{let[e]=(0,eD.useMutation)(nq),[t]=(0,eD.useMutation)(nR);return{toggle:async({checked:s,input:o})=>{if(s){let{data:t}=await e({variables:{input:o}});return t?.submitGuideCheck}let{data:n}=await t({variables:{input:o}});return n?.cancelGuideCheck}}})(),n=(0,t9.useInvalidEnrollmentAlert)({alertType:"feature"}),[l,i]=(0,c.useState)(!1),r=async(e,l)=>{let r=s?.currentUserEnrollment?.id;if(!r)return void n();if(!t?.studyNote)return;let a=await o({checked:l,input:{guideId:e,enrollmentId:r,lessonId:t.id}});"number"==typeof a?.selfCheckedGuides.length&&a.selfCheckedGuides.length===t.guides?.length&&i(!0)};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(nG,{onClose:e,guides:t?.guides?.reduce((e,s)=>s?[...e,{id:s.id,content:s.content,checked:t?.studyNote?.selfCheckedGuides?.includes(s.id)??!1}]:e,[])??[],onCheck:r,studyNoteStatus:t?.studyNote?.status}),(0,a.jsx)(nW.Portal,{selector:"#portal",children:(0,a.jsx)(nP.ExerciseResult,{visible:l,onClose:()=>i(!1),status:"pass",passedTitle:" !"})})]})},nF=E.default.bind(nf.default),nV=()=>{var e;let{topicResourceKey:t,topicTypedId:s,lessonTypedId:o}=(0,h.useResourceKeyContext)(),{lesson:n}=(0,eh.useLessonDetailFromContext)(),{topic:l}=(0,tN.useTopicDetailFromContext)(),i=n&&l?oV({lesson:n,topic:l}):tA.LessonSideViewType.none,{isSideViewOpen:r,setSideViewType:d}=(0,sL.useSideViewState)(),{openReportLessonModal:u}=(e={lessonTypedId:o,topicTypedId:s},{openReportLessonModal:()=>{(0,ei.openModal)({title:" .",icon:"alert",width:{l:"51rem",m:"51rem",s:"32.5rem"},content:t=>(0,a.jsx)(oK,{...e,close:t}),hasXButton:!0})}}),{open:m}=(e=>{let{toggleDrawer:t}=(0,ex.useDrawerState)(),{isSubscribed:s,hasTeamProSubscription:o}=(0,tt.useMySubscription)();return{open:()=>{let n="true"===(0,er.getLocalStorage)("isClassroomTutorialFinished"),l="true"===(0,er.getLocalStorage)("isGuruMarketingModalFinished"),i=window.innerWidth>=1200;(s||e)&&!o&&!l&&n&&i&&((0,ny.openImageModal)({img:nv,primaryButton:{text:"GURU  ",onClick:e=>{t("guru"),B.Amplitude.logEvent("click.lesson_page_popup_guru_button"),e()}},secondaryButton:{text:" ",onClick:e=>{B.Amplitude.logEvent("click.lesson_page_popup_guru_close_button"),e()}},title:"  \nGURU AI Chat",description:" ,      GURU "}),(0,er.setLocalStorage)("isGuruMarketingModalFinished","true"))}}})(n?.trialLesson||l?.isTrial),_=(0,t9.useInvalidEnrollmentAlert)({alertType:"terminal",secondaryButton:{text:"  "},onEnrolled:()=>{m()}}),{isDeprecated:p,renewalInfo:g}=(0,nh.useTopicRenewalInfo)({key:t}),{team:f}=(0,eW.useMyTeam)(),y=!!f?.teamType&&[O.TeamType.Kdt,O.TeamType.KdtT2].includes(f.teamType),{drawer:v,resetDrawer:x,setDrawer:b}=(0,ex.useDrawerState)(),{memo:C}=(0,of.useMemoStore)(),w=Number((0,H.useRouter)().query.timestamp)||0;return(0,c.useEffect)(()=>{n&&!n.studyNote&&(0,oF.isLanguageRequireTerminal)(n.language??O.Language.Python)&&_()},[n?.id]),(0,c.useEffect)(()=>{n?.gradingType===O.ExerciseGradingType.Self&&n.studyNote?.status===O.StudyNoteStatus.Passed?b("selfCheck"):x(),n?.studyNote&&m()},[n?.id]),(({lessonId:e,memoLessonTypedId:t})=>{let s=(0,eE.getWistiaApi)(),o=s?.ready();(0,c.useEffect)(()=>{let e=document.getElementById("lessonContentViewer"),t=e?.querySelector(".wistia_embed");if(!t)return;let s=()=>{let e=document.getElementById("lessonContentViewer"),t=e?.querySelector(".wistia_embed"),s=document.querySelector(".w-bottom-bar")?.clientHeight||40,o=document.getElementById("classroom-timestamp-button");o&&e&&t&&o.style.setProperty("bottom",`${e.clientHeight-t.clientHeight+s+10}px`)};s();let o=new ResizeObserver(s);return o.observe(t),()=>{o.disconnect()}},[o,e,t])})({lessonId:n?.id??"",memoLessonTypedId:C?.lesson.typedId}),(()=>{let{lesson:e}=(0,eh.useLessonDetailFromContext)(),{topic:t}=(0,tN.useTopicDetailFromContext)(),s=e?.studyNote?.typedId,{setInput:o,isAvailable:n,loadingCreate:l}=(0,ol.useGuruClassroomContext)(),{isGuruInContent:i,setIsGuruInContent:r}=(0,F.useClassroomSetting)(),d=(0,t9.useInvalidEnrollmentAlert)({alertType:"feature"}),{logGuruMessageSend:u}=(0,og.useLogGuruMessageSend)();return(0,c.useEffect)(()=>{if(!n||!i||l)return;let c=(0,sw.debounce)(i=>{let c,m=window.getSelection();if(!m||"Range"!==m.type||(i.target instanceof HTMLElement||i.target instanceof SVGElement)&&(i.target.closest('[data-guru="action-option"],[data-guru="selection-exclude"]')||i.target.querySelector('[data-guru="selection-exclude"]')))return;let _=m.getRangeAt(0),p=m.toString().trim(),g=document.querySelector("#lessonContentViewer");if(!p||!g?.contains(_.commonAncestorContainer))return;let h=_.getClientRects(),f=(()=>{for(let e=h.length-1;e>=0;e--){let t=h[e];if(t.width>0&&t.height>0)return t}})(),y=(()=>{for(let e=0;e<h.length;e++){let t=h[e];if(t.width>0&&t.height>0)return t}})();if(!f||!y)return;let v=f.bottom>window.innerHeight-260,x=y.top<260,b=v?x?{top:Math.max(y.top,60),left:_.getBoundingClientRect().right+8}:{bottom:window.innerHeight-y.top+8,left:y.left}:{top:f.bottom+8,left:Math.max(f.right-30,f.left)},C=(c=_.commonAncestorContainer instanceof HTMLElement?_.commonAncestorContainer:_.commonAncestorContainer.parentElement)&&c.closest("pre > code")?nb.CODE_GURU_ACTION_OPTION_PRESET:nb.DEFAULT_GURU_ACTION_OPTION_PRESET;(0,oQ.openPortal)(i=>(0,a.jsx)(nx.UiGuruActionOption,{position:b,onClose:i,presets:C,onSubmit:(e,{type:t})=>{((e,t,i)=>{if(e&&n&&!l){if(!s)return d();o({requestType:O.GuruRequestType.Message,studyNoteTypedId:s,content:e,selectedText:t}),u({type:i,content:e,placement:" "})}})(e,p,t),i()},selection:m,lesson:{id:e?.id,name:e?.title,type:e?.type},topic:{id:t?.id,name:t?.title},onClickOffButton:()=>{window.getSelection()?.removeAllRanges(),r(!1)}}),{uniqId:"guru-note-text-select-action"})},100);return document.addEventListener("mouseup",c),()=>{document.removeEventListener("mouseup",c)}},[n,l,s,i])})(),(0,a.jsx)(tI.ContentLayout,{content:(0,a.jsxs)(na.ContentViewerWrapper,{lessonType:n?.type,footer:(0,a.jsx)(ta.Button,{variant:"secondary",onClick:u,size:"medium",children:" "}),children:[p&&(0,a.jsx)("div",{className:nF("deprecatedNotification"),children:(0,a.jsx)(o0,{description:g?.description,relatedTopics:g?.renewedContents})}),(0,a.jsxs)("div",{id:"lessonContentViewer",className:nF("lessonContentViewer"),children:[n?.type===O.LessonType.Video&&"memo"!==v&&(0,a.jsx)("div",{className:nF("timestampButton"),id:"classroom-timestamp-button",children:(0,a.jsx)(sQ,{})}),(0,a.jsx)(tE,{timestamp:w}),(0,a.jsx)(nM,{})]}),(0,a.jsx)(ng,{lessonId:n?.id??"",like:n?.like??null,dislike:n?.dislike??null}),(0,a.jsx)(nr,{})]}),exercise:(0,a.jsx)(sD,{sideViewType:i}),codeReview:n?.studyNote&&y?(0,a.jsx)(nd.CodeReviewBox,{studyNoteId:n.studyNote.id,studyNoteTypedId:n.studyNote.typedId}):void 0,drawer:(()=>{switch(v){case"memo":return(0,a.jsx)(oB,{});case"guru":if(!n?.studyNote)return null;return(0,a.jsx)(oh,{onReport:u});case"selfCheck":return(0,a.jsx)(nB,{});default:return null}})(),sideViewType:i,isSideViewOpen:r,setSideViewType:d,initialContentWidth:50*(n?.language!==O.Language.Markdown)})};var nO=e.i(91632),nU=e.i(689696);let n$=()=>{let{lesson:e}=(0,eh.useLessonDetailFromContext)();return(({lessonId:e,editorOpened:t})=>{let{setSideViewType:s}=(0,sL.useSideViewState)();(0,c.useEffect)(()=>{if(!e)return;let o=k.isRenderingClient&&window.innerWidth<nU.DESKTOP_1200_STARTING_SIZE;s(t&&!o?"editor":null)},[t,e])})({lessonId:e?.id,editorOpened:e?.language!==O.Language.Null&&!!e?.editorOpened}),null};var nH=e.i(838721),nK=e.i(8133),nz=e.i(819107);let nY=m.gql`
  query HistoryLessonCollection(
    $userByIdId: ObjectId!
    $lessonType: LessonType
    $orderBy: LessonCollectionItemOrder
    $first: Int
  ) {
    userById(id: $userByIdId) {
      historyLessonCollection {
        typedId
        id
        title
        items(lessonType: $lessonType, first: $first, orderBy: $orderBy) {
          totalCount
          edges {
            node {
              addedAt
            }
          }
        }
      }
    }
  }
`,nX=()=>{let[e,t]=(0,c.useState)(!1),{fetchHistoryLessonCollection:s}=(()=>{let{userId:e}=(0,b.useIsLoggedIn)(),[t]=(0,f.useLazyQuery)(nY,{fetchPolicy:"network-only"});return{fetchHistoryLessonCollection:async({first:s,lessonType:o})=>{let n=await t({variables:{userByIdId:e,lessonType:o,first:s,orderBy:{direction:"DESC",field:"ADDED_AT"}}});return n.data?.userById?.historyLessonCollection}}})(),o=async()=>{let e=await s({first:2}),o=e?.items?.edges?.[1]?.node.addedAt;o&&e$(new Date(o??""))||t(!0)};return(0,c.useEffect)(()=>{o()},[]),{isOpen:e,setIsOpen:t}};var nQ=e.i(931981),nJ=e.i(628721);let nZ=E.default.bind(nJ.default),n0=({className:e,progress:t,size:s="l"})=>{let[o,n]="l"===s?[31,4]:[24,2],l=o-n,i=2*l*Math.PI;return(0,a.jsxs)("div",{className:nZ("container",e),children:[(0,a.jsxs)("svg",{height:2*o,width:2*o,className:nZ("circle"),children:[(0,a.jsxs)("defs",{children:[(0,a.jsxs)("linearGradient",{id:"progressCircleBackgroundPurple",children:[(0,a.jsx)("stop",{offset:"0%",stopColor:"#A64EFF"}),(0,a.jsx)("stop",{offset:"100%",stopColor:"#8F00FF"})]}),(0,a.jsxs)("linearGradient",{id:"progressCircleBackgroundGreen",children:[(0,a.jsx)("stop",{offset:"0%",stopColor:"#65D9CF"}),(0,a.jsx)("stop",{offset:"100%",stopColor:"#21C8CC"})]})]}),(0,a.jsx)("circle",{className:nZ("track"),r:l,cx:o,cy:o}),(0,a.jsx)("circle",{className:nZ("progress"),strokeDasharray:`${t/1*i} ${i-t/1*i}`,strokeDashoffset:`${.25*i}`,r:l,cx:o,cy:o,strokeLinecap:"round"})]}),(0,a.jsx)(nw.default,{src:"/images/classroom/locked.png",alt:"locked",width:32,height:32,loader:nQ.staticImageLoader})]})};var n1=e.i(182905),n2=e.i(801294),n5=e.i(78790),n3=e.i(349338);let n6=E.default.bind(n5.default),n4=({id:e,theme:t,isOpen:s,setIsOpen:o,iconSrc:n,mainIcon:l,label:i,title:r,description:d,className:u,place:c="bottom",noArrow:m})=>(0,a.jsxs)(n3.Tooltip,{id:e,place:c,openOnClick:!0,classNameArrow:n6("arrow"),className:n6("tooltip",t,u),clickable:!0,isOpen:s,noArrow:m,children:[(0,a.jsx)("button",{onClick:e=>{e.preventDefault(),o(!1)},type:"button",className:n6("close"),children:(0,a.jsx)(K.Icon,{name:"xMark",size:"small"})}),l??(n&&(0,a.jsx)(nw.default,{src:n,alt:r,width:48,height:48})),(0,a.jsxs)("div",{className:n6("content"),children:[(0,a.jsx)("p",{className:n6("title"),children:i}),(0,a.jsx)("p",{className:n6("description"),children:r}),(0,a.jsx)("p",{className:n6("description2"),children:d})]})]}),n9=E.default.bind(n2.default),n8=({href:e,target:t,anchor:s,setIsOpen:o,onClick:n,isOpen:l,...i})=>{let r=(0,c.useId)();return(0,a.jsxs)("div",{className:n9("container"),children:[(0,a.jsx)("button",{type:"button",onClick:()=>o(e=>!e),"data-tooltip-id":r,children:s}),l&&(0,a.jsx)(z.default,{href:e,target:t,rel:"_blank"===t?"noreferrer noopener":void 0,onClick:n,children:(0,a.jsx)(n4,{id:r,isOpen:l,setIsOpen:o,...i,place:"right-end",className:n9("tooltip"),noArrow:!0})})]})},n7=({dDay:e,progress:t=0})=>{let{isOpen:s,setIsOpen:o}=nX(),{isMobileSize:n}=(0,eu.useWindowSize)();return(0,a.jsx)(n8,{href:`/dashboard?tab=${n1.DASHBOARD_TAB_TYPE.MY_BADGE}`,anchor:(0,a.jsx)(n0,{progress:t,size:n?"s":"m"}),theme:"blue",isOpen:s,setIsOpen:o,label:`   ! D-${e}`,title:"  5    ",description:"     .    5     !",noArrow:!0})};var le=e.i(344127),lt=e.i(608911),ls=e.i(441139);let lo=m.gql`
  query getRealTimeViews {
    activeUserCount
  }
`,ln=()=>{let{data:e,refetch:t}=(0,_.useQuery)(lo);return{realTimeViews:e?.activeUserCount??0,refetch:t}};var ll=e.i(106317),li=e.i(876855);let lr=()=>{let{topicResourceKey:e,lessonResourceKey:t}=(0,h.useResourceKeyContext)(),{bookmark:s}=(0,ll.useBookmark)({topicResourceKey:e,lessonResourceKey:t}),o=(0,c.useContext)(ls.OsNameContext),{createBookmark:n,deleteBookmark:l}=(0,li.useLessonBookmark)(),{getHotKeyLabel:i}=(0,sI.useHotKeyLabel)(),r=!!s?.id,d=async()=>{B.Amplitude.logEvent("click.lesson_page_bookmark_button"),r?await l({bookmarkTypedId:s.typedId}):(await n({topicResourceKey:e,lessonResourceKey:t}),(0,ei.openModal)({title:" !",icon:"complete",content:"    .",primaryButton:{text:""}}))};return(0,sM.useOsHotKeys)(sT.HOT_KEY_CODE[sT.HotKeyName.BOOKMARK],d,{enableOnFormTags:!0,preventDefault:!0}),(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(s8.IconButton,{button:{type:"button",id:"classroom-header-bookmark",onClick:d},icon:{name:r?"bookmark-fill":"bookmark",color:r?"--purple50":void 0}}),(o===lt.OSName.MacOS||o===lt.OSName.Windows)&&(0,a.jsx)(ep.Tooltip,{anchorSelect:"#classroom-header-bookmark",content:` (${i(sT.HotKeyName.BOOKMARK)})`,place:"bottom"})]})};var la=e.i(966e3),ld=e.i(804167),lu=e.i(748679),lc=e.i(820959),lm=e.i(807679),l_=e.i(783645),lp=e.i(627694),lg=e.i(94609);let lh=m.gql`
  query GetTargetTopic($slug: String!, $onDay: Int!, $to: DateTime) {
    topicByResourceKey(key: $slug) {
      id
      typedId
      slug
      title
      averageDaysEnrolled
      averagePassedLessonCount(onDay: $onDay)
      lessonCount {
        total
      }
      currentUserEnrollment {
        id
        typedId
        passedLessonCount
        daysEnrolled
        targetGraduationDate
        status
        studyNotesV2(to: $to) {
          totalCount
        }
      }
    }
  }
`,lf=({slug:e,onDay:t,to:s})=>{let{data:o,previousData:n,loading:l}=(0,_.useQuery)(lh,{variables:{slug:e,onDay:t,to:e$((0,lp.parseISO)(s??""))?s:(0,lg.startOfDay)(new Date).toISOString()},skip:!e});return{topic:o?.topicByResourceKey??n?.topicByResourceKey,loading:l}},ly=({topic:e,daysEnrolled:t=0})=>{let s=e?.lessonCount.total??0,o=e?.currentUserEnrollment?.passedLessonCount??0,n=e?.currentUserEnrollment?.targetGraduationDate,l=e?.averageDaysEnrolled??0,i=!!n,{arrowLength:r,currentTargetProgress:a,currentMyProgress:d,targetPassedLessonCount:u,targetDateDiff:c,missionStatus:m}=i?(({targetGraduationDate:e,myPassedLessonCount:t,totalTopicLessonCount:s,passedLessonsCountUntilYesterday:o})=>{let n=new Date,l=(0,lp.parseISO)(e),i=(0,ld.differenceInCalendarDays)(l,n),r=Math.round((s-o)/(i+1)),a=i<=0?s:r+o,d="ONGOING";return i<0&&(d="OVERTIME"),i>=0&&t>=a&&(d="ACHIEVED"),{arrowLength:a/s*17,currentTargetProgress:a/s*25.8,currentMyProgress:t/s*25,targetPassedLessonCount:a,targetDateDiff:i,missionStatus:d}})({targetGraduationDate:n,myPassedLessonCount:o,totalTopicLessonCount:s,passedLessonsCountUntilYesterday:e.currentUserEnrollment.studyNotesV2?.totalCount??0}):(({daysEnrolled:e,averageDaysToGraduate:t,totalTopicLessonCount:s,myPassedLessonCount:o})=>{let n=t-e,l=Math.round(s/t),i=n<=0?s:Math.min(l*e,s),r="ONGOING";n<0&&(r="OVERTIME"),n>=0&&o>=i&&(r="ACHIEVED"),0===t&&(r="NO_AVERAGE");let a=Math.min(Math.floor(100/t*.17*e),17);return{arrowLength:a,currentTargetProgress:Math.min(25.8/t*e,25.8),currentMyProgress:o/s*25,targetPassedLessonCount:i,targetDateDiff:n,missionStatus:r}})({daysEnrolled:t,averageDaysToGraduate:l,totalTopicLessonCount:s,myPassedLessonCount:o});return{arrowLength:r,currentTargetProgress:a,currentMyProgress:d,targetPassedLessonCount:u,targetDateDiff:c,missionStatus:m,targetMode:i,myPassedLessonCount:o,totalTopicLessonCount:s}};var lv=e.i(99073);let lx=E.default.bind(l_.default),lb=({topicSlug:e,shouldRenderTopicInFiveMission:t,onToggleWidget:s})=>{let{isMobileSize:o}=(0,eu.useWindowSize)(),{daysEnrolled:n=1,setTargetGraduationDateAt:l}=(0,lm.useGetEnrollment)(e),{topic:i}=lf({slug:e,onDay:n,to:l}),{daysInRow:r}=(0,lv.useGetMyStreak)(),d=i?.averageDaysEnrolled,u=i&&i.currentUserEnrollment?.status!==O.EnrollmentStatus.Graduated,{targetPassedLessonCount:m,myPassedLessonCount:_}=ly({topic:i,daysEnrolled:n}),{realTimeViews:p}=ln(),g=(0,c.useMemo)(()=>p>1&&!t,[p,t]),h=()=>{s(),B.Amplitude.logEvent("click.lesson_page_lecture_tools")};return o?(0,a.jsx)(s8.IconButton,{button:{onClick:h,type:"button"},icon:{name:"widget"}}):(0,a.jsxs)("button",{className:lx("container"),onClick:h,type:"button",children:[(0,a.jsx)(K.Icon,{name:"widget"}),(0,a.jsx)("div",{className:lx("widgetButtons"),children:[1,2,3].map(e=>(0,a.jsxs)(c.Fragment,{children:[(0,a.jsxs)("div",{className:lx("widgetButton",{activeAnimation:u}),children:[r,"   "]}),u&&(0,a.jsxs)("div",{className:lx("widgetButton"),children:["  ",d||l?`${_}/${m}`:""]}),g&&(0,a.jsxs)("div",{className:lx("widgetButton"),children:[p,"  "]})]},e))})]})};var lC=e.i(350090),lw=e.i(855762),lj=e.i(784320);let lS=e=>new Promise(t=>{let s=document.querySelector(e);if(!s)return void t(!1);let o=new IntersectionObserver(e=>{let[s]=e,n=s.isIntersecting;o.disconnect(),t(n)},{root:null,threshold:0});o.observe(s)}),lN=[{target:"#classroom-header-bookmark",title:" ",content:"   !",disableBeacon:!0,placement:"bottom-end"},{target:"#classroom-header-memo",title:"",content:"   !",disableBeacon:!0,placement:"bottom-end"},{target:"#classroom-header-guru",title:"GURU AI Chat",content:"  GURU   !",disableBeacon:!0,placement:"bottom-end"}],lk=[{target:"#split-view-handle-button",title:"   ",content:"      !",disableBeacon:!0,placement:"left"}],lT=[{target:"#split-view-handle-bar",title:"   ",content:"      .",disableBeacon:!0,placement:"left-end"}],lI=[{target:".classroom-content-copy-button",title:" ",content:"       .",disableBeacon:!0,placement:"right-end"}],lM=()=>{let[e,t]=(0,c.useState)(!1),s=!(0,er.getLocalStorage)("isClassroomTutorialFinished"),o=!(0,er.getLocalStorage)("isSplitviewTutorial1Finished"),n=!(0,er.getLocalStorage)("isSplitviewTutorial2Finished"),l=!(0,er.getLocalStorage)("isContentViewerTutorialFinished"),[i,r]=(0,c.useState)([]);(0,c.useEffect)(()=>{let e=setTimeout(async()=>{let e=async()=>{let e=[...s?lN:[],...o?lk:[],...n?lT:[],...l?lI:[]];r((await Promise.all(e.map(async e=>({step:e,isVisible:await lS(e.target)})))).filter(e=>e.isVisible).map(e=>e.step))};await e(),t(!0)},800);return()=>{clearTimeout(e)}},[]);let d=async e=>await Promise.all(e.map(e=>lS(e.target))).then(e=>e.some(e=>e)),u=async()=>{await d(lN)&&((0,er.setLocalStorage)("isClassroomTutorialFinished","true"),(0,er.setLocalStorage)("isGuruMarketingModalFinished","true")),await d(lk)&&(0,er.setLocalStorage)("isSplitviewTutorial1Finished","true"),await d(lT)&&(0,er.setLocalStorage)("isSplitviewTutorial2Finished","true"),await d(lI)&&(0,er.setLocalStorage)("isContentViewerTutorialFinished","true")},m=async({action:e})=>{[lC.ACTIONS.CLOSE,lC.ACTIONS.RESET].includes(e)&&(t(!1),await u())};return(0,a.jsx)(lw.JoyRide,{tooltipComponent:lj.JoyRideTooltip,callback:m,continuous:!0,locale:{next:"",back:"",last:""},run:e,steps:i,disableScrolling:!0,styles:{options:{arrowColor:"var(--gray00)"},spotlight:{borderRadius:10}}})};function lE(){return(lE=Object.assign.bind()).apply(null,arguments)}var lA=function(e){return c.createElement("svg",lE({width:25,height:25,viewBox:"0 0 25 25",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),o||(o=c.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M2.73999 4C2.46385 4 2.23999 4.22386 2.23999 4.5V6.16669C2.23999 6.44283 2.46385 6.66669 2.73999 6.66669H20.5225C20.7987 6.66669 21.0225 6.44283 21.0225 6.16669V4.5C21.0225 4.22386 20.7987 4 20.5225 4H2.73999ZM8.81406 10.7224C8.81406 10.4462 9.03791 10.2224 9.31406 10.2224H23.3401C23.6162 10.2224 23.8401 10.4462 23.8401 10.7224V12.3891C23.8401 12.6652 23.6162 12.8891 23.3401 12.8891H9.31406C9.03791 12.8891 8.81406 12.6652 8.81406 12.3891V10.7224ZM3.17919 17.8334C3.17919 17.5572 3.40305 17.3334 3.67919 17.3334H16.7661C17.0422 17.3334 17.2661 17.5572 17.2661 17.8334V19.5001C17.2661 19.7762 17.0422 20.0001 16.7661 20.0001H3.67919C3.40305 20.0001 3.17919 19.7762 3.17919 19.5001V17.8334Z",fill:"white"})))},lL=e.i(525853),lG=k,lD=e.i(506505),lq=e.i(534667),lR=e.i(226355);let lP=E.default.bind(lL.default),lW=({profileImage:e=lG.DEFAULT_PROFILE_IMAGE,name:t,onLogout:s})=>{let{isOpened:o,togglePopover:n,closePopover:l,anchorElement:i}=(0,lq.usePopover)();return(0,a.jsxs)("div",{className:lP("container"),children:[(0,a.jsx)("button",{className:lP("thumbnailBtn"),onClick:n,children:(0,a.jsx)("img",{className:lP("thumbnail"),src:e,alt:"thumbnail"})}),(0,a.jsx)(lD.Popover,{open:o,anchorElement:i,onClose:l,anchorPosition:{top:"5.2rem",right:"0"},children:(0,a.jsx)(lR.ProfilePopoverContent,{thumbnailUrl:e,name:t??"",onClickLogout:s,onClose:l})})]})};var lB=e.i(197865);let lF=E.default.bind(lB.default),lV=({theme:e,isOpen:t,setIsOpen:s,anchorTitle:o,onClick:n,iconSrc:l,href:i,target:r,...d})=>{let u=(0,c.useId)();return(0,a.jsxs)("div",{className:lF("container",e),children:[(0,a.jsxs)("button",{className:lF("anchor"),"data-tooltip-id":u,onClick:()=>s(e=>!e),type:"button",children:[(0,a.jsx)(nw.default,{src:l,alt:o,width:30,height:30,unoptimized:!0}),o]}),t&&(0,a.jsx)(z.default,{href:i,target:r,rel:"_blank"===r?"noreferrer noopener":void 0,onClick:n,children:(0,a.jsx)(n4,{id:u,theme:e,isOpen:t,setIsOpen:s,iconSrc:l,...d,className:lF("tooltip")})})]})},lO={src:e.i(865983).default,width:600,height:600,blurWidth:8,blurHeight:8,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAICAYAAADED76LAAAA7UlEQVR42l2Pu2rCYACF/z9bXEysLgmFDg10zCotrW2gS/u3IkQQBxVEwUFEnFzUwRgEH0RfQBx8h3gnxgsaDV5INnGSKKgBPev3cQ4HgEsghmEOxwNNECQNIcTAfZ6ZFzfy+kXk5UX68cl9AxmGsaUzWSEUjvKxeIIPBCNFHLfhlpDLF/5VbWvMFht9vtzoUkfWPzxf6LwNIRBK5Yi2Mg5SWzG7/ampjNXDz+9fyGpIJlNIWxt7WZmbw5FqtjrD/evbO7IElmWd9Uaz1htMdlJb3glipWq3E05LOD0EFEW5OO7b5/nkfARJuq7sCF7iT3gaLnXYAAAAAElFTkSuQmCC"},lU=({dDay:e,progress:t=0})=>{let{isOpen:s,setIsOpen:o}=nX();return(0,a.jsx)(lV,{theme:"blue",isOpen:s,setIsOpen:o,anchorTitle:`  D-${e}`,iconSrc:lO,href:`/dashboard?tab=${n1.DASHBOARD_TAB_TYPE.MY_BADGE}`,label:"   !",title:"  5    ",description:"     .    5     !",mainIcon:(0,a.jsx)(n0,{progress:t})})};var l$=e.i(726383),lH=e.i(807119);let lK={src:e.i(733940).default,width:64,height:40,blurWidth:8,blurHeight:5,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAFCAYAAAB4ka1VAAAAjUlEQVR42oWOTwuCMByGf36Auo7GCMJsomArV9g2g/7BIKHDMMigTl0MOtelz+DJzyuinn3gfeG5PWBBD2fqyeOMr33MqIMlDSfmEJBEjYaeQwYLH/47/XpvH9ktytNk9TN3WX6vYfGJxs+LInkGmrL45MaS23rDp0bYSDAX7YMlTsUcGQV1g9V+s47GK0ybFt6nMxm1AAAAAElFTkSuQmCC"},lz=E.default.bind(l$.default),lY=({disabled:e,onClick:t})=>(0,a.jsx)("button",{id:"classroom-header-guru",type:"button",className:lz("container"),onClick:t,disabled:e,children:(0,a.jsxs)("div",{className:lz("wrapper"),children:[(0,a.jsx)(lH.Logo,{size:"xsmall"}),(0,a.jsx)(nw.default,{className:lz("strong"),src:lK,alt:"guru"}),(0,a.jsx)("span",{className:lz("label"),children:"AI"}),(0,a.jsx)("span",{className:lz("label"),children:"Chat"})]})});var lX=e.i(520056),lQ=e.i(992019),lJ=e.i(781089);let lZ=E.default.bind(lJ.default),l0=({icon:e,title:t,description:s,field:o})=>(0,a.jsxs)("div",{className:lZ("container"),children:[(0,a.jsx)("div",{className:lZ("iconWrapper"),children:"string"==typeof e?(0,a.jsx)(K.Icon,{name:e,size:"medium",color:"--txt-secondary"}):e}),(0,a.jsxs)("div",{className:lZ("content"),children:[(0,a.jsx)("p",{className:lZ("title"),children:t}),(0,a.jsx)("p",{className:lZ("description"),children:s})]}),(0,a.jsx)("div",{className:lZ("field"),children:o})]});var l1=e.i(188959),l2=e.i(130322);let l5=E.default.bind(lQ.default),l3=[{value:O.Classroom_Theme.OsDefault,text:" "},{value:O.Classroom_Theme.Light,text:" "},{value:O.Classroom_Theme.Dark,text:" "}],l6=({settingContext:e,isGuruAvailable:t})=>(0,a.jsxs)("div",{className:l5("container"),children:[(0,a.jsx)(l0,{icon:"theme",title:" ",description:" ,  ,  ",field:(0,a.jsx)(a.Fragment,{children:(0,a.jsxs)(l1.Dropdown,{children:[(0,a.jsx)(l1.Dropdown.Trigger,{children:(0,a.jsx)(l2.DropdownRotateMenu,{text:l3.find(t=>t.value===e.currentTheme)?.text?.toString()??""})}),(0,a.jsx)(l1.Dropdown.Content,{width:"auto",children:(0,a.jsx)(l1.Dropdown.SingleSelectMenu,{items:l3,activeItem:l3.find(t=>t.value===e.currentTheme),onClickItem:({value:t})=>{B.Amplitude.logEvent("click.lesson_page_theme_button",{button:{value:t}}),e.setTheme(t)},align:"center"})})]})})}),(0,a.jsx)(l0,{icon:"video",title:"  ",description:"     .",field:(0,a.jsx)(L.Toggle,{active:e.lessonAutoPass,size:"large",onClick:t=>{B.Amplitude.logEvent("click.lesson_page_autoplay_setting_button",{button:{value:t?"on":"off"}}),e.setLessonAutoPass(t)}})}),t&&(0,a.jsx)(l0,{icon:(0,a.jsx)(ou.GuruLogo,{size:20,status:"idle"}),title:"  AI GURU ",description:"    .",field:(0,a.jsx)(L.Toggle,{active:e.isGuruInContent,size:"large",onClick:t=>{B.Amplitude.logEvent("click.lesson_guru_popup_setting_button",{button:{value:t?"on":"off"}}),e.setIsGuruInContent(t)}})})]});var l4=e.i(114403);let l9=()=>{let e=(0,F.useClassroomSetting)(),[t,s]=(0,c.useState)(!1),{isAvailable:o}=(0,ol.useGuruClassroomContext)();return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(s8.IconButton,{button:{type:"button",onClick:()=>{s(!0),B.Amplitude.logEvent("click.lesson_page_setting_button")}},icon:{name:"setting"}}),t&&(0,a.jsx)(nW.Portal,{selector:"#portal",children:(0,a.jsx)(l4.GlobalModal,{modalArgs:{title:"  ",hasXButton:!0,width:"50.4rem",content:(0,a.jsx)(l6,{settingContext:e,isGuruAvailable:o})},closeModal:()=>s(!1)})})]})},l8=E.default.bind(lu.default),l7=()=>{let{lesson:e}=(0,$.useLessonAbstractFromPath)(),{lesson:t}=(0,eh.useLessonDetailFromContext)(),{topic:s}=(0,tN.useTopicDetailFromContext)(),{topicTypedId:o,lessonTypedId:n,topicResourceKey:l}=(0,h.useResourceKeyContext)(),i=(0,c.useContext)(ls.OsNameContext),{isMobileSize:r}=(0,eu.useWindowSize)(),{currentUser:d}=(0,la.useMyProfile)(),u=(0,H.useRouter)().query.guruOpen,{loading:m,hadSubscription:_,subscriptions:p,isSubscribed:g}=(0,tt.useMySubscription)(),f=p&&0!==p.length?[...p].sort((e,t)=>new Date(e.startAt).getTime()-new Date(t.startAt).getTime())[0]:null,{getHotKeyLabel:y}=(0,sI.useHotKeyLabel)(),v=5-(0,ld.differenceInCalendarDays)(new Date,new Date(f?.startAt??"")),{badges:x}=(0,nK.useGetMyBadges)({skip:!1}),b=!!x?.find(({title:e})=>"  "===e)?.achieved,{isKdcTeam:C}=(0,lX.useMyKdcRole)(),w=v>=0&&!b&&!C,{isT1Sprinter:j}=(0,le.useGetIsKdtSprinter)(),{toggleDrawer:S}=(0,ex.useDrawerState)(),N=(0,eT.useLogout)(),T=(0,t9.useInvalidEnrollmentAlert)({alertType:"feature"}),{isAvailable:I}=(0,ol.useGuruClassroomContext)(),M=()=>{B.Amplitude.logEvent("click.lesson_page_nav_button"),S("nav")},E=()=>{d&&(B.Amplitude.logEvent("click.lesson_page_memo_button",{lesson:{typedId:t?.typedId,name:t?.title}}),S("memo"))};(0,sM.useOsHotKeys)(sT.HOT_KEY_CODE[sT.HotKeyName.MEMO],E,{enableOnFormTags:!0,preventDefault:!0}),(0,sM.useOsHotKeys)(sT.HOT_KEY_CODE[sT.HotKeyName.TOGGLE_SIDE_NAV],M,{enableOnFormTags:!0,preventDefault:!0});let{refetch:A}=ln();(0,c.useEffect)(()=>{A()},[t?.id]);let L=()=>{t?.studyNote?.id?(S("guru"),B.Amplitude.logEvent("click.lesson_page_guru_button",{topic:{id:s?.id,name:s?.title},lesson:{id:t.id,name:t.title,type:t.type}})):T()};return(0,c.useEffect)(()=>{u&&I&&setTimeout(()=>{L()},500)},[u,I]),(0,a.jsxs)("header",{className:l8("container"),children:[!m&&(0,a.jsx)(lM,{}),(0,a.jsxs)("div",{className:l8("contentWrapper","left"),children:[(0,a.jsx)("button",{className:l8("menuButton"),onClick:M,type:"button","data-tooltip-id":"classroom-side-nav",children:(0,a.jsx)(lA,{className:l8("hamburger")})}),(i===lt.OSName.MacOS||i===lt.OSName.Windows)&&(0,a.jsx)(ep.Tooltip,{id:"classroom-side-nav",content:` (${y(sT.HotKeyName.TOGGLE_SIDE_NAV)})`,place:"right"}),(0,a.jsxs)("button",{className:l8("lessonTitleButton"),type:"button",onClick:M,children:[(0,a.jsx)("h1",{className:l8("lessonTitle"),children:e&&(0,X.getLessonTitle)(t??e)}),(0,a.jsx)(K.Icon,{name:"chevron",thickness:"bold",rotate:90,size:"small"})]})]}),(0,a.jsx)("div",{className:l8("contentWrapper"),children:!!d&&(0,a.jsxs)("div",{className:l8("buttons"),children:[j&&(0,a.jsx)("div",{children:(0,a.jsx)(nz.Tracker,{lessonTypedId:n,topicTypedId:o,popoverAlignment:"right"})}),w&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:l8("desktop"),children:(0,a.jsx)(lU,{dDay:v,progress:s?.currentUserEnrollment?.progress??0})}),(0,a.jsx)("div",{className:l8("medium"),children:(0,a.jsx)(n7,{dDay:v,progress:s?.currentUserEnrollment?.progress??0})})]}),(0,a.jsxs)("div",{className:l8("menus"),children:[!j&&l&&(0,a.jsx)("div",{children:(0,a.jsx)(lb,{topicSlug:l,shouldRenderTopicInFiveMission:w,onToggleWidget:()=>S("widget")})}),(0,a.jsx)("div",{children:(0,a.jsx)(lr,{})}),(0,a.jsxs)("div",{children:[(0,a.jsx)(s8.IconButton,{button:{type:"button",id:"classroom-header-memo",onClick:E},icon:{name:"write"}}),(i===lt.OSName.MacOS||i===lt.OSName.Windows)&&(0,a.jsx)(ep.Tooltip,{anchorSelect:"#classroom-header-memo",content:` (${y(sT.HotKeyName.MEMO)})`,place:"bottom"})]}),(0,a.jsx)("div",{className:l8("desktop"),children:(0,a.jsx)(l9,{})})]}),I&&(0,a.jsx)("div",{className:l8("desktop"),children:(0,a.jsx)(lY,{onClick:L,disabled:!(g||t?.trialLesson||s?.isTrial)})}),!_&&e&&(0,a.jsx)("div",{className:l8("subscriptionNudge"),children:(0,a.jsx)(tu,{lesson:e,size:r?"medium":void 0,amplitudeType:"header"})}),k.IS_NGV_CUSTOM?(0,a.jsx)(lW,{profileImage:d?.profile?.photo??void 0,name:d?.name,onLogout:N}):(0,a.jsx)(lc.ClassroomNav,{hasProfile:!!d,profileImage:d?.profile?.photo??void 0,username:d?.name})]})})]})};var ie=e.i(78140),it=e.i(858319),is=e.i(80546),io=e.i(967871),il=e.i(829727),ii=e.i(534712),ir=e.i(221523);let ia=m.gql`
mutation SendTILKakaoMessage {
  sendTILKakaoMessage {
    result
  }
}
`,id=E.default.bind(il.default),iu=({tilUrl:e})=>{let t=(()=>{let[e]=(0,eD.useMutation)(ia);return e})(),{currentUser:s}=(0,la.useMyProfile)(),o=s?.profile?.phoneNumber,n=async()=>{try{let e=await t();if(e?.data?.sendTILKakaoMessage.result)(0,o$.openToast)({message:" ."});else throw Error()}catch{(0,o$.openToast)({message:"  .",icon:"warning"})}};return(0,a.jsxs)("div",{className:id("container"),children:[(0,a.jsxs)("div",{className:id("inputWrapper"),children:[(0,a.jsx)(ii.InputTextField,{placeholder:"  ",label:" ",value:e,className:id("input")}),(0,a.jsx)("button",{onClick:()=>{(0,ir.copyToClipboard)(`${window.location.origin}${e}`),(0,o$.openToast)({message:"  ."})},className:id("copyButton"),children:(0,a.jsx)(K.Icon,{name:"copy"})})]}),o&&(0,a.jsx)("button",{className:id("mobileShare"),onClick:n,type:"button",children:" "})]})};var ic=e.i(932024);let im=async()=>{let e=document.getElementById("streak_widget");if(!e)return;let t=e.cloneNode(!0);t.id="cloned_streak_widget",t.setAttribute("style","margin-top: 9999px");let s=document.getElementById("widget_drawer_body");s?.appendChild(t);let o=document.getElementById("cloned_streak_widget");if(!o)return;o.lastChild&&o.removeChild(o.lastChild);let n=await (0,ic.convertElementToImage)(o);return s?.removeChild(o),n};var i_=e.i(995745);let ip=async()=>{let e=await im();if(!e)return;let t=(0,i_.formatDate)(new Date,"yyyy-MM-dd"),s=window.document.createElement("a");s.setAttribute("style","display:none;"),s.download=`  _${t}.png`,s.href=e??"",document.body.appendChild(s),s.click(),document.body.removeChild(s),s.remove()},ig=async(e,t="image.jpg")=>{let s=await fetch(e),o=await s.blob();return new File([o],t,{type:o.type})},ih=async e=>{var t;if(!document.getElementById("streak_widget"))return void(0,o$.openToast)({message:"  . (streak_widget)",icon:"warning"});let s=await im();if(!s)return void(0,o$.openToast)({message:"  . (imageSource)",icon:"warning"});let o=(0,i_.formatDate)(new Date,"yyyy-MM-dd"),n=await ig(s,`  _${o}.png`);return n&&(e=>{let{navigator:t}=window;return!!t.canShare&&window.navigator.canShare(e)})({files:[n]})?{shareLink:e,imageFile:n}:void(t=e,(0,ir.copyToClipboard)(t),(0,o$.openToast)({message:"  ."}))},iy=({type:e})=>{B.Amplitude.logEvent("click.lesson_page_til_share_button",{button:{type:e}})},iv=E.default.bind(it.default),ix=({days:e,daysInRow:t,weeksInRow:s,maxAttendanceCountInWeek:o,passedLessonCount:n,tilUrl:l})=>{let i=(0,i_.formatDate)(new Date,"M d"),{openTilShareModal:r}={openTilShareModal:e=>(0,ei.openModal)({title:"",hasXButton:!0,disableCloseOnOverlayClick:!0,content:(0,a.jsx)(iu,{tilUrl:e})})};return(0,a.jsxs)("div",{className:iv("container"),id:"streak_widget",children:[(0,a.jsxs)("div",{className:iv("titleWrapper"),children:[(0,a.jsx)("p",{className:iv("graphTitle"),children:"  "}),(0,a.jsx)("p",{className:iv("graphDate"),children:i})]}),(0,a.jsx)("div",{className:iv("graph"),children:(0,a.jsx)(io.StreakGraph,{days:e,maxAttendanceCountInWeek:o})}),(0,a.jsxs)("div",{className:iv("streakContainer"),children:[(0,a.jsxs)("div",{className:iv("streakWrapper"),children:[(0,a.jsx)("p",{className:iv("streakTitle"),children:"  "}),(0,a.jsxs)("div",{className:iv("daily"),children:[(0,a.jsx)(is.Graphic,{name:"fire"}),(0,a.jsxs)("p",{className:iv("streakText"),children:[(0,a.jsx)("span",{className:iv("streakCount"),children:t}),""]})]})]}),(0,a.jsxs)("div",{className:iv("streakWrapper"),children:[(0,a.jsx)("p",{className:iv("streakTitle"),children:"  "}),(0,a.jsxs)("p",{className:iv("streakText"),children:[(0,a.jsx)("span",{className:iv("streakCount"),children:s}),""]})]}),(0,a.jsxs)("div",{className:iv("streakWrapper"),children:[(0,a.jsx)("p",{className:iv("streakTitle"),children:"  "}),(0,a.jsxs)("p",{className:iv("streakText"),children:[(0,a.jsx)("span",{className:iv("streakCount"),children:n}),""]})]})]}),(0,a.jsx)("div",{className:iv("buttons"),children:navigator?.share?(0,a.jsx)(ta.Button,{variant:"text",leftIcon:"share",className:iv("download"),onClick:async()=>{iy({type:"both"});let{shareLink:e,imageFile:t}=await ih(`${window.location.origin}${l}`)??{};e&&t&&window?.navigator?.share({title:`  _${i}.png`,url:e,text:"# #",files:[t]})},children:""}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(ta.Button,{variant:"text",leftIcon:"download",className:iv("download"),onClick:()=>{ip(),iy({type:"download"})},children:""}),(0,a.jsx)(ta.Button,{variant:"text",leftIcon:"share",className:iv("share"),onClick:()=>{r(l),iy({type:"share"})},children:""})]})})]})},ib=()=>{let{days:e,weeksInRow:t,daysInRow:s,maxAttendanceCountInWeek:o,passedLessonCount:n}=(0,lv.useGetMyStreak)(),{currentUser:l}=(0,tt.useMySubscription)(),i=l?.id,r=`/users/${i}/til`;return(0,a.jsx)(ix,{days:e,weeksInRow:t,daysInRow:s,maxAttendanceCountInWeek:o,passedLessonCount:n,tilUrl:r})};var iC=e.i(802080),iw=e.i(354490);let ij=m.gql`
mutation SetEnrollmentTargetGraduationDate($input: SetEnrollmentTargetGraduationDateInput!) {
  setEnrollmentTargetGraduationDate(input: $input) {
    enrollment {
      id
      targetGraduationDate
      setTargetGraduationDateAt
    }
  }
}
`,iS=E.default.bind(iC.default),iN=({topicTitle:e,enrollmentTypedId:t,totalTopicLessonCount:s,myPassedLessonCount:o,onEmitSetPaceMakerTarget:n,onClose:l})=>{let[i,r]=(0,c.useState)(),d=(0,ld.differenceInCalendarDays)((0,lp.parseISO)(i??""),new Date),u=Math.round((s-o)/(d+1))||1,{setEnrollmentTargetGraduationDate:m}=(()=>{let[e]=(0,eD.useMutation)(ij);return{setEnrollmentTargetGraduationDate:async({enrollmentTypedId:t,date:s,onClose:o})=>{s?e({variables:{input:{enrollmentTypedId:t,date:s}},onCompleted:o}):(0,o$.openToast)({message:" .",icon:"warning"})}}})();return(0,a.jsxs)("div",{children:[(0,a.jsxs)("p",{className:iS("description"),children:[e," ",(0,a.jsx)("br",{}),"    ."]}),(0,a.jsx)("div",{className:iS("datePickerWrapper"),children:(0,a.jsx)(iw.DatePicker,{width:"100%",onChange:r,placeholderText:" ",dateFormat:"yyyy MM dd",minDate:new Date,popperClassName:iS("datePicker-popper"),placeholder:"  "})}),i&&(0,a.jsxs)("p",{className:iS("motivation"),children:[" ",(0,a.jsxs)("span",{className:iS("point"),children:[" ",u,""]})," ",(0,a.jsx)("span",{className:iS("point"),children:0===d?" ":` ${d} `})," !"]}),(0,a.jsx)(ta.Button,{variant:"primary",size:"medium",className:iS("button"),onClick:()=>{n(),m({enrollmentTypedId:t,date:i,onClose:l})},children:""})]})};var ik=e.i(93754),iT=e.i(773894),iI=e.i(780012),iM=e.i(992621),iE=e.i(614803);function iA(){return(iA=Object.assign.bind()).apply(null,arguments)}var iL=function(e){return c.createElement("svg",iA({width:35,height:27,viewBox:"0 0 35 27",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),n||(n=c.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M7 1C3.68629 1 1 3.68629 1 7V16.4721C1 19.7858 3.68629 22.4721 7 22.4721H15.4311L16.5769 25.2221C16.9188 26.0426 18.0812 26.0426 18.4231 25.2221L19.5689 22.4721H28C31.3137 22.4721 34 19.7858 34 16.4721V7C34 3.68629 31.3137 1 28 1H7Z",fill:"white"})),l||(l=c.createElement("path",{d:"M15.4311 22.4721L15.8926 22.2798L15.7644 21.9721H15.4311V22.4721ZM16.5769 25.2221L16.1154 25.4144L16.5769 25.2221ZM18.4231 25.2221L18.8846 25.4144L18.4231 25.2221ZM19.5689 22.4721V21.9721H19.2356L19.1074 22.2798L19.5689 22.4721ZM1.5 7C1.5 3.96244 3.96243 1.5 7 1.5V0.5C3.41015 0.5 0.5 3.41015 0.5 7H1.5ZM1.5 16.4721V7H0.5V16.4721H1.5ZM7 21.9721C3.96243 21.9721 1.5 19.5097 1.5 16.4721H0.5C0.5 20.062 3.41015 22.9721 7 22.9721V21.9721ZM15.4311 21.9721H7V22.9721H15.4311V21.9721ZM17.0385 25.0298L15.8926 22.2798L14.9696 22.6644L16.1154 25.4144L17.0385 25.0298ZM17.9615 25.0298C17.7906 25.4401 17.2094 25.4401 17.0385 25.0298L16.1154 25.4144C16.6282 26.6452 18.3718 26.6452 18.8846 25.4144L17.9615 25.0298ZM19.1074 22.2798L17.9615 25.0298L18.8846 25.4144L20.0304 22.6644L19.1074 22.2798ZM28 21.9721H19.5689V22.9721H28V21.9721ZM33.5 16.4721C33.5 19.5097 31.0376 21.9721 28 21.9721V22.9721C31.5898 22.9721 34.5 20.062 34.5 16.4721H33.5ZM33.5 7V16.4721H34.5V7H33.5ZM28 1.5C31.0376 1.5 33.5 3.96243 33.5 7H34.5C34.5 3.41015 31.5898 0.5 28 0.5V1.5ZM7 1.5H28V0.5H7V1.5Z",fill:"#333236"})))};function iG(){return(iG=Object.assign.bind()).apply(null,arguments)}var iD=function(e){return c.createElement("svg",iG({width:16,height:16,viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),i||(i=c.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M2.60039 1.99844C2.60039 1.66707 2.33176 1.39844 2.00039 1.39844C1.66902 1.39844 1.40039 1.66707 1.40039 1.99844V3.68488V8.05085V13.9984C1.40039 14.3298 1.66902 14.5984 2.00039 14.5984C2.33176 14.5984 2.60039 14.3298 2.60039 13.9984L2.60039 9.60079C2.79596 9.6513 3.00502 9.6654 3.21927 9.63581L7.07948 9.10273C7.13975 9.09441 7.19349 9.14124 7.19349 9.20209C7.19349 9.98621 7.88232 10.592 8.66001 10.4917L13.2049 9.90593C14.0029 9.80308 14.6004 9.12364 14.6004 8.31905V3.95815C14.6004 2.98077 13.7318 2.23179 12.765 2.37556L9.33505 2.88566C9.27502 2.89459 9.22108 2.84808 9.22108 2.78738C9.22108 2.00797 8.53965 1.40391 7.76585 1.49741L2.80845 2.09643C2.73745 2.10501 2.668 2.11816 2.60039 2.13555V1.99844Z",fill:"#C47CFD"})))};function iq(){return(iq=Object.assign.bind()).apply(null,arguments)}var iR=function(e){return c.createElement("svg",iq({width:17,height:10,viewBox:"0 0 17 10",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),r||(r=c.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M3.92389 0.253482L6.63619 5L3.92389 9.74652C1.93475 9.08634 0.5 7.21072 0.5 5C0.5 2.78928 1.93475 0.913655 3.92389 0.253482ZM5.50667 0L8.15118 4.6279C8.28294 4.85847 8.28294 5.14153 8.15118 5.3721L5.50667 10H9.56476L12.1362 5.5L8.99333 0H5.50667ZM13.6512 5.1279L10.721 0H11.5C14.2614 0 16.5 2.23858 16.5 5C16.5 7.76142 14.2614 10 11.5 10H11.2924L13.6512 5.8721C13.7829 5.64153 13.7829 5.35847 13.6512 5.1279Z",fill:"#E9CCFF"})))};let iP=(0,tM.default)(()=>e.A(356703),{loadableGenerated:{modules:[507263]},ssr:!1}),iW=E.default.bind(iT.default),iB="pacemaker-container",iF="pacemaker-set-target-button",iV=({targetMode:e,topicId:t,topicResourceKey:s,topicTitle:o,enrollmentTypedId:n,daysEnrolled:l,arrowLength:i,currentTargetProgress:r,currentMyProgress:d,myPassedLessonCount:u,targetPassedLessonCount:m,targetDateDiff:_,totalTopicLessonCount:p,missionStatus:g,username:h,profileImage:f})=>{(({missionStatus:e,targetMode:t})=>{(0,c.useEffect)(()=>{B.Amplitude.logEvent("view.lesson_page_pacemaker",{status:e,hasTarget:t})},[e,t])})({targetMode:e,missionStatus:g});let{openTargetGraduationDateModal:y}={openTargetGraduationDateModal:({topicTitle:e,enrollmentTypedId:t,totalTopicLessonCount:s,myPassedLessonCount:o,onEmitSetPaceMakerTarget:n})=>(0,ei.openModal)({icon:"challenge",title:"   ",hasXButton:!0,disableCloseOnOverlayClick:!1,content:l=>(0,a.jsx)(iN,{topicTitle:e,enrollmentTypedId:t,totalTopicLessonCount:s,myPassedLessonCount:o,onEmitSetPaceMakerTarget:n,onClose:l})})},{enroll:v}=(0,iM.useEnrollTopicV3)(),{open:x}=(0,iE.useAddNicknameModal)(),b="NO_AVERAGE"===g||"OVERTIME"===g,C=!e&&"OVERTIME"===g||"NO_AVERAGE"===g,w=C?5:Math.max(i,4),j=C?6:d,S=C?15:Math.max(r,d+7),N=s=>y({topicTitle:o,enrollmentTypedId:s,totalTopicLessonCount:p,myPassedLessonCount:u,onEmitSetPaceMakerTarget:()=>(({topicId:e,topicTitle:t,status:s,targetMode:o})=>{B.Amplitude.logEvent("set.lesson_page_pacemaker_target",{topic:{id:e,name:t},status:s,hasTarget:o})})({topicId:t,topicTitle:o,status:g,targetMode:e})}),T=async()=>{if(n)return void N(n);let e=await v({topicResourceKey:s});if(!e?.enrollment.typedId)return(0,o$.openToast)({message:"  .",icon:"warning"});N(e?.enrollment.typedId)},[I,M]=(0,c.useState)(!1);return(0,c.useEffect)(()=>(setTimeout(()=>M(!0),150),()=>M(!1)),[_]),(0,a.jsxs)("div",{className:iW("container"),id:iB,children:[(0,a.jsx)(tC.TutorialTooltip,{tutorialKey:tS.LOCAL_STORAGE_KEY.isFinishedPacemakerTutorial,delay:300,steps:[{target:`#${iB}`,content:(0,a.jsxs)("p",{children:["  ",(0,a.jsx)("br",{}),"   ."]}),disableBeacon:!0,placement:"left"},{target:`#${iF}`,content:(0,a.jsx)("p",{children:"    ."}),disableBeacon:!0,placement:"left"}]}),(0,a.jsxs)("div",{className:iW("header"),children:[(0,a.jsxs)("div",{className:iW("titleWrapper"),children:[(0,a.jsx)("p",{className:iW("topicTitle"),children:o}),!e&&"NO_AVERAGE"!==g&&(0,a.jsxs)(ik.Label,{size:"small",color:"gray",shape:"rectangle",className:iW("topicLabel"),children:[" ",l,""]})]}),"OVERTIME"===g&&e&&(0,a.jsxs)("p",{className:iW("title"),children:["  ",(0,a.jsx)("br",{}),"   ."]}),C&&(0,a.jsxs)("p",{className:iW("title"),children:["   ,",(0,a.jsx)("br",{}),"   !"]}),("ONGOING"===g||"ACHIEVED"===g)&&(0,a.jsxs)("p",{className:iW("title"),children:[e?"":" ","  ",(0,a.jsx)("br",{}),0===_?"":`${_} `,"  !"]})]}),(0,a.jsxs)("div",{className:iW("bar"),children:[(0,a.jsx)("div",{className:iW("progressBorder"),style:{left:`${j-.4}rem`}}),(0,a.jsxs)("div",{className:iW("myProgress"),style:{left:`${j}rem`,"--before-width":`${j?j+2:0}rem`,"--before-left":`-${j}rem`},children:[(0,a.jsx)(iL,{className:iW("bubble")}),(0,a.jsxs)("p",{className:iW("bubbleText"),style:{left:u>=10?".4rem":".7rem"},children:[u,""]}),(0,a.jsx)(nw.default,{className:iW("avatar"),src:f??k.DEFAULT_PROFILE_IMAGE,alt:"profile",width:32,height:32,loader:nQ.publicImageLoader})]}),m>u&&(0,a.jsxs)("div",{className:iW("targetProgress"),style:{left:`${S}rem`},children:[(0,a.jsx)("div",{className:iW("arrows"),id:"pacemaker-arrows",children:Array.from({length:w},(e,t)=>t+1).map(e=>(0,a.jsx)("div",{className:iW("arrowWrapper",{activeAnimation:I}),style:{"--z-index":w-e},children:(0,a.jsx)("div",{className:iW("arrow")})},e))}),(0,a.jsxs)("div",{className:iW("flag"),children:[(0,a.jsx)(iL,{className:iW("flagBubble")}),(0,a.jsx)("p",{className:iW("flagBubbleText",{unsetTarget:C}),style:{left:m>=10?".1rem":".46rem"},children:C?"?":`${m}`}),(0,a.jsx)(iD,{className:iW("pacemakerFlag")})]})]}),(0,a.jsx)("div",{className:iW("trophy"),children:(0,a.jsx)(K.Icon,{name:"trophy",size:"small",color:"--gray50"})})]}),(0,a.jsxs)("div",{className:iW("barInfo"),children:[(0,a.jsxs)("div",{className:iW("optionWrapper"),children:[(0,a.jsx)("div",{className:iW("purpleOption")}),(0,a.jsx)("p",{className:iW("option1"),children:" "})]}),(0,a.jsxs)("div",{className:iW("optionWrapper"),children:[(0,a.jsx)(iR,{className:iW("pacemakerOption2")}),(0,a.jsxs)("p",{className:iW("option2"),children:[e||"OVERTIME"===g?"":" "," "]})]})]}),(0,a.jsxs)("div",{className:iW("averageLesson",{unsetTarget:C}),children:["OVERTIME"===g&&e&&(0,a.jsxs)("div",{className:iW("averageText"),children:["  ,",(0,a.jsx)("br",{}),"   !"]}),"ONGOING"===g&&(0,a.jsxs)("div",{className:iW("averageText","ongoing"),children:[(0,a.jsx)("div",{className:iW("flagLottie"),children:(0,a.jsx)(iP,{animationData:iI.default})}),e?"":" "," "," ",(0,a.jsxs)("span",{className:iW("point"),children:[m-u," !"]})]}),"ACHIEVED"===g&&(0,a.jsxs)("div",{className:iW("averageText"),children:[e?"":" ","  !"]})]}),(0,a.jsxs)(ta.Button,{id:iF,variant:b?"primary":"tertiary",className:iW("button"),fullWidth:b,size:b?"medium":{l:"medium",s:"small"},onClick:()=>{h?T():x(T)},children:["   ",e?"":""]})]})},iO=({topicResourceKey:e})=>{let{daysEnrolled:t=1,setTargetGraduationDateAt:s}=(0,lm.useGetEnrollment)(e),{topic:o}=lf({slug:e,onDay:t,to:s}),{currentUser:n}=(0,la.useMyProfile)();if(!o||o.currentUserEnrollment?.status===O.EnrollmentStatus.Graduated)return null;let{arrowLength:l,currentTargetProgress:i,currentMyProgress:r,targetPassedLessonCount:d,targetDateDiff:u,missionStatus:c,targetMode:m,myPassedLessonCount:_,totalTopicLessonCount:p}=ly({topic:o,daysEnrolled:t});return(0,a.jsx)(iV,{targetMode:m,topicResourceKey:e,topicId:o.id,topicTitle:o.title,enrollmentTypedId:o.currentUserEnrollment?.typedId,daysEnrolled:t,myPassedLessonCount:_,arrowLength:l,currentTargetProgress:i,currentMyProgress:r,targetPassedLessonCount:d,targetDateDiff:u,missionStatus:c,totalTopicLessonCount:p,username:n?.name,profileImage:n?.profile?.photo})},iU=E.default.bind(ie.default),i$=()=>{let{drawer:e,resetDrawer:t}=(0,ex.useDrawerState)(),{topicResourceKey:s}=(0,h.useResourceKeyContext)();return(0,a.jsx)("div",{className:iU("container"),children:(0,a.jsx)(te.UiDrawer,{open:"widget"===e,onClose:t,position:"right",children:(0,a.jsxs)("div",{className:iU("content"),children:[(0,a.jsxs)("div",{className:iU("header"),children:[(0,a.jsx)("p",{className:iU("title"),children:" "}),(0,a.jsx)("button",{type:"button",onClick:t,children:(0,a.jsx)(K.Icon,{name:"xMark"})})]}),(0,a.jsxs)("div",{className:iU("body"),id:"widget_drawer_body",children:[s&&(0,a.jsx)(iO,{topicResourceKey:s}),(0,a.jsx)(ib,{})]})]})})})};var iH=e.i(154392),iK=e.i(585493);let iz=({children:e})=>{let[t,s]=(0,c.useState)(null),o=(0,c.useMemo)(()=>({drawer:t,toggle:e=>{s(t=>t===e?null:e)},set:s,reset:()=>{s(null)}}),[t]);return(0,a.jsx)(iK.DrawerContext.Provider,{value:o,children:e})};var iY=e.i(267327),iX=e.i(724534),iQ=e.i(980423),iJ=e.i(692462);let iZ=()=>{let{lesson:e}=(0,eh.useLessonDetailFromContext)(),{topic:t}=(0,tN.useTopicDetailFromContext)(),s=e&&t?oV({lesson:e,topic:t}):tA.LessonSideViewType.none;return s&&s!==tA.LessonSideViewType.none&&e?(0,a.jsx)(iX.ClassroomViewSwitcher,{lessonViewText:(0,iJ.getLessonTypeLabel)(e?.type),lessonViewIcon:(0,iQ.getLessonIcon)(e?.type),language:e.language}):null},i0={code:void 0},i1=({children:e})=>{let[t,s]=(0,c.useState)(i0),o=(0,c.useMemo)(()=>({lessonArgs:{code:t.code},setLessonArgs:e=>s(e),initializeLessonArgs:()=>s(i0)}),[t]);return(0,a.jsx)(tv.Provider,{value:o,children:e})};var i2=e.i(906873),i5=e.i(31821);let i3=E.default.bind(i5.default),i6=({LeftArea:e,RightArea:t})=>(0,a.jsx)("footer",{className:i3("container"),children:(0,a.jsxs)("div",{className:i3("contents"),children:[(0,a.jsx)("div",{className:i3("buttons","left"),children:e}),(0,a.jsx)("div",{className:i3("buttons","right"),children:t})]})}),i4=E.default.bind(i2.default),i9=()=>{let{hadSubscription:e}=(0,tt.useMySubscription)(),{isDesktopSize:t}=(0,eu.useWindowSize)();return(0,a.jsx)(i6,{LeftArea:(0,a.jsx)(z.default,{href:e?"/dashboard":"/",className:i4("homeAnchor"),children:(0,a.jsx)(ta.Button,{variant:"text",leftIcon:"home",iconOnly:!t,onClick:()=>{B.Amplitude.logEvent("click.lesson_page_home_button")},children:(0,a.jsx)("span",{className:i4("homeText"),children:" "})})}),RightArea:(0,a.jsx)(ej,{amplitudePrefix:"lesson_page"})})},i8=E.default.bind(ez.default),i7=()=>{let{canAccess:e,reason:t}=(0,iY.useLessonAccessibilityFromRouter)();return(()=>{let{lesson:e,topic:t}=(0,$.useLessonAbstractFromPath)(),{isSubscribed:s}=(0,tt.useMySubscription)(),{lesson:o,topic:n}=(0,eh.useLessonDetailFromContext)(),l=o?.studyNote?.status===O.StudyNoteStatus.Passed,i=o?.chapterIndex;(0,c.useEffect)(()=>{e&&o?.id&&n?.id&&t?.id&&B.Amplitude.logEvent("enter.lesson_page",{lesson:{type:e.type,name:e.title,id:e.id,index:((e,t,s)=>{let o=e;for(let e=0;e<s;e++)o+=t[e]?.lessonCount?.total||0;return o})(o?.lessonIndex??0,n?.chapters,i??0),is_completed:l},topic:{name:t?.title,id:t?.id,for_B2C:t?.defaultUserGroupTopic},is_trial:o?.trialLesson,chapter:{index:i}})},[t?.id,o?.id,i,e?.id,n?.id,s])})(),(()=>{let{lesson:e}=(0,eh.useLessonDetailFromContext)(),{syncProjectFiles:t}=(0,iH.useSyncProjectFiles)();(0,c.useEffect)(()=>{e?.studyNote?.typedId&&(0,oF.isLanguageRequireTerminal)(e.language)&&e.language!==O.Language.JupyterDsTrm&&t({studyNoteTypedId:e.studyNote?.typedId})},[e?.language,e?.studyNote?.typedId])})(),(0,a.jsx)(iz,{children:(0,a.jsxs)(nO.SideViewStateProvider,{children:[(0,a.jsx)(n$,{}),(0,a.jsx)(ol.GuruClassroomContextProvider,{children:(0,a.jsxs)("div",{className:i8("container"),children:[(0,a.jsx)(nH.AdminNavigation,{}),(0,a.jsx)(l7,{}),e?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(iZ,{}),(0,a.jsx)(nV,{})]}):(0,a.jsx)(e7,{reason:t}),(0,a.jsx)(i9,{})]})}),(0,a.jsx)(i1,{children:(0,a.jsx)(tT,{})}),(0,a.jsx)(i$,{})]})})};e.s(["__N_SSP",()=>!0,"default",0,({topicResourceKey:e,lessonResourceKey:t,topicTypedId:s,topicSlug:o,lessonTypedId:n,lessonSeqId:l})=>{let{topic:i,lesson:r,loading:m}=(0,d.useGetLessonBeforeStudyNote)({topicResourceKey:e,lessonResourceKey:t}),[v,T]=(0,c.useState)(!1),{variant:I}=(0,eL.useABTest)("record-learning-socket"),{isKDCSprinter:M,loading:E}=(0,eg.useGetIsKdcSprinter)();(0,S.useTheme)(),(()=>{let{topicResourceKey:e}=(0,h.useResourceKeyContext)(),t=(e=>{let{data:t}=(0,_.useQuery)(p,{variables:{key:e},skip:!e});return t?.topicByResourceKey?.currentUserUnitPeriod?.isFuture??!1})(e);(0,c.useEffect)(()=>{t&&"seen"!==localStorage.getItem("alertPreventedLessonWhenSprinter")&&((0,g.alertPreventedLesson)(),localStorage.setItem("alertPreventedLessonWhenSprinter","seen"))},[t])})(),(()=>{let{isLoggedIn:e}=(0,b.useIsLoggedIn)(),{pingConnectionConflict:t}=(()=>{let[e,{loading:t}]=(0,f.useLazyQuery)(y,{fetchPolicy:"network-only"});return{pingConnectionConflict:e,loading:t}})();(0,c.useEffect)(()=>{let s;return e&&(s=window.setInterval(async()=>{let e=await t();e.data&&!e.data.pingConnectionConflict.hasDeviceId&&x()},6e4)),()=>{window.clearInterval(s)}},[e])})();let A=(0,c.useMemo)(()=>({topicResourceKey:e,lessonResourceKey:t,topicTypedId:s,topicSlug:o,lessonTypedId:n,lessonSeqId:l}),[e,t,s,l,o,n]);return m?(0,a.jsx)(C.CommonLoader,{title:" "}):r?(0,a.jsxs)(h.ResourceKeyContext.Provider,{value:A,children:[(0,a.jsx)(N.CommonHead,{title:`${r?.title??""} - ${i?.title??""} | `,description:" ,  ,  , , UI   IT      .",url:`${k.NEXT_PUBLIC_CLIENT_URL}/topics/${e}/lessons/${t}`}),(0,a.jsx)("style",{children:"html, body { overscroll-behavior-x: none; -webkit-overflow-scrolling: touch;}"}),(0,a.jsx)(u.default,{src:"//fast.wistia.net/assets/external/E-v1.js",onReady:()=>T(!0)}),(0,a.jsxs)(F.ClassroomSettingProvider,{children:[M&&(0,a.jsx)(eA,{}),"experimental"===I&&!E&&!M&&(0,a.jsx)(eG,{queryParams:{lessonId:r?.id??"",topicId:i?.id??""}}),(0,a.jsx)(i7,{}),v&&(0,a.jsx)(eN,{}),(0,a.jsx)(j.FloatingButtonSprinterChannelTalk,{}),(0,a.jsx)(ek.SaveVideoLessonPlayTimeManager,{}),(0,a.jsx)(eB,{}),(0,a.jsx)(eK,{})]})]}):(0,a.jsx)(w.ErrorPage,{})}],165529)},50570,(e,t,s)=>{let o="/topics/[t_slug]/lessons/[l_id]";(window.__NEXT_P=window.__NEXT_P||[]).push([o,()=>e.r(165529)]),t.hot&&t.hot.dispose(function(){window.__NEXT_P.push([o])})}]);

//# sourceMappingURL=c69ecec22956263e.js.map
//# debugId=8720f1a3-44c5-599e-bc6c-3149347f2df9
