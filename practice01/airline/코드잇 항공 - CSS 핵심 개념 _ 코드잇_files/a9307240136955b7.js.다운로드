
!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{},n=(new e.Error).stack;n&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[n]="bf48fe19-d542-5e6c-b95a-a1852bc20550")}catch(e){}}();
(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,837208,e=>{e.v({_lg:"QuestionDetailLayout-module-scss-module__QJIcZW___lg",_md:"QuestionDetailLayout-module-scss-module__QJIcZW___md",_sm:"QuestionDetailLayout-module-scss-module__QJIcZW___sm",navigation:"QuestionDetailLayout-module-scss-module__QJIcZW__navigation",relatedQuestions:"QuestionDetailLayout-module-scss-module__QJIcZW__relatedQuestions",right:"QuestionDetailLayout-module-scss-module__QJIcZW__right"})},530536,e=>{e.v({_lg:"RelatedQuestions-module-scss-module__tTP1_q___lg",_md:"RelatedQuestions-module-scss-module__tTP1_q___md",_sm:"RelatedQuestions-module-scss-module__tTP1_q___sm",container:"RelatedQuestions-module-scss-module__tTP1_q__container",item:"RelatedQuestions-module-scss-module__tTP1_q__item",itemTitle:"RelatedQuestions-module-scss-module__tTP1_q__itemTitle",list:"RelatedQuestions-module-scss-module__tTP1_q__list",numbers:"RelatedQuestions-module-scss-module__tTP1_q__numbers",title:"RelatedQuestions-module-scss-module__tTP1_q__title"})},576473,e=>{e.v({_lg:"WatchToggle-module-scss-module__XQIQLq___lg",_md:"WatchToggle-module-scss-module__XQIQLq___md",_sm:"WatchToggle-module-scss-module__XQIQLq___sm",container:"WatchToggle-module-scss-module__XQIQLq__container",icon:"WatchToggle-module-scss-module__XQIQLq__icon",label:"WatchToggle-module-scss-module__XQIQLq__label",toggle:"WatchToggle-module-scss-module__XQIQLq__toggle",watched:"WatchToggle-module-scss-module__XQIQLq__watched"})},927254,e=>{e.v({_lg:"CommunityAnswerBuilder-module-scss-module__JRSoSG___lg",_md:"CommunityAnswerBuilder-module-scss-module__JRSoSG___md",_sm:"CommunityAnswerBuilder-module-scss-module__JRSoSG___sm",button:"CommunityAnswerBuilder-module-scss-module__JRSoSG__button",description:"CommunityAnswerBuilder-module-scss-module__JRSoSG__description",editor:"CommunityAnswerBuilder-module-scss-module__JRSoSG__editor",title:"CommunityAnswerBuilder-module-scss-module__JRSoSG__title"})},854038,e=>{e.v({_lg:"ModeratorProfile-module-scss-module__0vPHsW___lg",_md:"ModeratorProfile-module-scss-module__0vPHsW___md",_sm:"ModeratorProfile-module-scss-module__0vPHsW___sm",container:"ModeratorProfile-module-scss-module__0vPHsW__container",profile:"ModeratorProfile-module-scss-module__0vPHsW__profile",right:"ModeratorProfile-module-scss-module__0vPHsW__right",text:"ModeratorProfile-module-scss-module__0vPHsW__text"})},903053,e=>{e.v({_lg:"Answer-module-scss-module__zcKUVW___lg",_md:"Answer-module-scss-module__zcKUVW___md",_sm:"Answer-module-scss-module__zcKUVW___sm",acceptButton:"Answer-module-scss-module__zcKUVW__acceptButton",acceptOffer:"Answer-module-scss-module__zcKUVW__acceptOffer",accepted:"Answer-module-scss-module__zcKUVW__accepted",actionButtons:"Answer-module-scss-module__zcKUVW__actionButtons",actionsWrapper:"Answer-module-scss-module__zcKUVW__actionsWrapper",button:"Answer-module-scss-module__zcKUVW__button",commentsWrapper:"Answer-module-scss-module__zcKUVW__commentsWrapper",container:"Answer-module-scss-module__zcKUVW__container",contentWrapper:"Answer-module-scss-module__zcKUVW__contentWrapper",description:"Answer-module-scss-module__zcKUVW__description",down:"Answer-module-scss-module__zcKUVW__down",metaRow:"Answer-module-scss-module__zcKUVW__metaRow",moderator:"Answer-module-scss-module__zcKUVW__moderator",option:"Answer-module-scss-module__zcKUVW__option",revisedAt:"Answer-module-scss-module__zcKUVW__revisedAt",revisedTime:"Answer-module-scss-module__zcKUVW__revisedTime",time:"Answer-module-scss-module__zcKUVW__time",whoAccepted:"Answer-module-scss-module__zcKUVW__whoAccepted"})},203909,e=>{e.v({_lg:"Profile-module-scss-module__IqW5lq___lg",_md:"Profile-module-scss-module__IqW5lq___md",_sm:"Profile-module-scss-module__IqW5lq___sm",container:"Profile-module-scss-module__IqW5lq__container",dot:"Profile-module-scss-module__IqW5lq__dot",image:"Profile-module-scss-module__IqW5lq__image",information:"Profile-module-scss-module__IqW5lq__information",lineThrough:"Profile-module-scss-module__IqW5lq__lineThrough",name:"Profile-module-scss-module__IqW5lq__name",nameWrapper:"Profile-module-scss-module__IqW5lq__nameWrapper"})},448096,e=>{e.v({_lg:"CommentMoveModalContent-module-scss-module__MrMeJW___lg",_md:"CommentMoveModalContent-module-scss-module__MrMeJW___md",_sm:"CommentMoveModalContent-module-scss-module__MrMeJW___sm",answer:"CommentMoveModalContent-module-scss-module__MrMeJW__answer",buttonWrapper:"CommentMoveModalContent-module-scss-module__MrMeJW__buttonWrapper",closeButton:"CommentMoveModalContent-module-scss-module__MrMeJW__closeButton",container:"CommentMoveModalContent-module-scss-module__MrMeJW__container",contents:"CommentMoveModalContent-module-scss-module__MrMeJW__contents"})},487653,e=>{e.v({_lg:"AnswerList-module-scss-module__Mvu5ta___lg",_md:"AnswerList-module-scss-module__Mvu5ta___md",_sm:"AnswerList-module-scss-module__Mvu5ta___sm",container:"AnswerList-module-scss-module__Mvu5ta__container"})},250815,e=>{e.v({_lg:"Answers-module-scss-module__ke-ChW___lg",_md:"Answers-module-scss-module__ke-ChW___md",_sm:"Answers-module-scss-module__ke-ChW___sm",container:"Answers-module-scss-module__ke-ChW__container",description:"Answers-module-scss-module__ke-ChW__description",list:"Answers-module-scss-module__ke-ChW__list",title:"Answers-module-scss-module__ke-ChW__title"})},304495,e=>{e.v({_lg:"WatchToggleIcon-module-scss-module__Jpavpa___lg",_md:"WatchToggleIcon-module-scss-module__Jpavpa___md",_sm:"WatchToggleIcon-module-scss-module__Jpavpa___sm",container:"WatchToggleIcon-module-scss-module__Jpavpa__container",icon:"WatchToggleIcon-module-scss-module__Jpavpa__icon"})},169608,e=>{e.v({_lg:"Profile-module-scss-module__6QoP-W___lg",_md:"Profile-module-scss-module__6QoP-W___md",_sm:"Profile-module-scss-module__6QoP-W___sm",container:"Profile-module-scss-module__6QoP-W__container",image:"Profile-module-scss-module__6QoP-W__image",level:"Profile-module-scss-module__6QoP-W__level",name:"Profile-module-scss-module__6QoP-W__name"})},820021,e=>{e.v({_lg:"Header-module-scss-module__rwl5Dq___lg",_md:"Header-module-scss-module__rwl5Dq___md",_sm:"Header-module-scss-module__rwl5Dq___sm",badge:"Header-module-scss-module__rwl5Dq__badge",container:"Header-module-scss-module__rwl5Dq__container",contents:"Header-module-scss-module__rwl5Dq__contents",counters:"Header-module-scss-module__rwl5Dq__counters",item:"Header-module-scss-module__rwl5Dq__item",lessonBreadcrumbs:"Header-module-scss-module__rwl5Dq__lessonBreadcrumbs",like:"Header-module-scss-module__rwl5Dq__like",lineThrough:"Header-module-scss-module__rwl5Dq__lineThrough",profile:"Header-module-scss-module__rwl5Dq__profile",revisedAt:"Header-module-scss-module__rwl5Dq__revisedAt",revisedAtWrapper:"Header-module-scss-module__rwl5Dq__revisedAtWrapper",revisedTime:"Header-module-scss-module__rwl5Dq__revisedTime",title:"Header-module-scss-module__rwl5Dq__title",titleWrapper:"Header-module-scss-module__rwl5Dq__titleWrapper"})},116321,e=>{e.v({_lg:"Question-module-scss-module__-9fC6q___lg",_md:"Question-module-scss-module__-9fC6q___md",_sm:"Question-module-scss-module__-9fC6q___sm",actionsWrapper:"Question-module-scss-module__-9fC6q__actionsWrapper",commentList:"Question-module-scss-module__-9fC6q__commentList",container:"Question-module-scss-module__-9fC6q__container",contentWrapper:"Question-module-scss-module__-9fC6q__contentWrapper",exceptDesktopRow:"Question-module-scss-module__-9fC6q__exceptDesktopRow",guru:"Question-module-scss-module__-9fC6q__guru",headerWrapper:"Question-module-scss-module__-9fC6q__headerWrapper",moderator:"Question-module-scss-module__-9fC6q__moderator",optionsWrapper:"Question-module-scss-module__-9fC6q__optionsWrapper",profile:"Question-module-scss-module__-9fC6q__profile",shareButton:"Question-module-scss-module__-9fC6q__shareButton",watch:"Question-module-scss-module__-9fC6q__watch",writeAnswer:"Question-module-scss-module__-9fC6q__writeAnswer"})},510985,e=>{e.v({_lg:"Answer-module-scss-module__7U7kfG___lg",_md:"Answer-module-scss-module__7U7kfG___md",_sm:"Answer-module-scss-module__7U7kfG___sm",container:"Answer-module-scss-module__7U7kfG__container",input:"Answer-module-scss-module__7U7kfG__input",loading:"Answer-module-scss-module__7U7kfG__loading",logo:"Answer-module-scss-module__7U7kfG__logo",name:"Answer-module-scss-module__7U7kfG__name",text:"Answer-module-scss-module__7U7kfG__text"})},703188,e=>{e.v({_lg:"TriggerButton-module-scss-module__1oqfGW___lg",_md:"TriggerButton-module-scss-module__1oqfGW___md",_sm:"TriggerButton-module-scss-module__1oqfGW___sm",button:"TriggerButton-module-scss-module__1oqfGW__button",icon:"TriggerButton-module-scss-module__1oqfGW__icon",logo:"TriggerButton-module-scss-module__1oqfGW__logo",question:"TriggerButton-module-scss-module__1oqfGW__question",text:"TriggerButton-module-scss-module__1oqfGW__text"})},43528,e=>{e.v({_lg:"UiGuruAnswer-module-scss-module__YIEP5a___lg",_md:"UiGuruAnswer-module-scss-module__YIEP5a___md",_sm:"UiGuruAnswer-module-scss-module__YIEP5a___sm",container:"UiGuruAnswer-module-scss-module__YIEP5a__container",left:"UiGuruAnswer-module-scss-module__YIEP5a__left",question:"UiGuruAnswer-module-scss-module__YIEP5a__question",right:"UiGuruAnswer-module-scss-module__YIEP5a__right"})},125508,e=>{e.v({_lg:"GuruCommunityLogo-module-scss-module__ClHxSG___lg",_md:"GuruCommunityLogo-module-scss-module__ClHxSG___md",_sm:"GuruCommunityLogo-module-scss-module__ClHxSG___sm",container:"GuruCommunityLogo-module-scss-module__ClHxSG__container"})},934500,e=>{e.v({_lg:"GuruFloating-module-scss-module__r7S6Aq___lg",_md:"GuruFloating-module-scss-module__r7S6Aq___md",_sm:"GuruFloating-module-scss-module__r7S6Aq___sm",chat:"GuruFloating-module-scss-module__r7S6Aq__chat",container:"GuruFloating-module-scss-module__r7S6Aq__container",open:"GuruFloating-module-scss-module__r7S6Aq__open"})},581850,e=>{e.v({_lg:"ChatSignUpCta-module-scss-module__9gjI5W___lg",_md:"ChatSignUpCta-module-scss-module__9gjI5W___md",_sm:"ChatSignUpCta-module-scss-module__9gjI5W___sm",container:"ChatSignUpCta-module-scss-module__9gjI5W__container",dim:"ChatSignUpCta-module-scss-module__9gjI5W__dim",question:"ChatSignUpCta-module-scss-module__9gjI5W__question",wrapper:"ChatSignUpCta-module-scss-module__9gjI5W__wrapper"})},979712,e=>{"use strict";var t,s,i,n,l,o,r,a,d=e.i(94601),u=e.i(388365),c=e.i(896267),m=e.i(568552),_=e.i(350890),p=e.i(837208),h=e.i(443901);let g=_.default.bind(p.default),f=({navigation:e,relatedQuestions:t,watchToggle:s,question:i,answers:n})=>(0,d.jsx)(h.TwoColumnLayout,{left:(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)("div",{className:g("navigation"),children:e}),(0,d.jsx)("div",{className:g("relatedQuestions"),children:t}),(0,d.jsx)("div",{className:g("watchToggle"),children:s})]}),right:(0,d.jsxs)("div",{className:g("right"),children:[(0,d.jsx)("div",{className:g("question"),children:i}),(0,d.jsx)("div",{className:g("answers"),children:n}),(0,d.jsx)("div",{className:g("relatedQuestions"),children:t})]})});var v=e.i(542834),w=e.i(530536),x=e.i(168872);let y=_.default.bind(w.default),A=({list:e})=>e.length?(0,d.jsxs)("div",{className:y("container"),children:[(0,d.jsx)("div",{className:y("title"),children:"관련 질문"}),(0,d.jsx)("div",{className:y("list"),children:e.map(e=>(0,d.jsx)(x.default,{href:e.link,children:(0,d.jsxs)("div",{className:y("item"),children:[(0,d.jsx)("div",{className:y("itemTitle"),children:e.title}),(0,d.jsxs)("div",{className:y("numbers"),children:[(0,d.jsxs)("div",{className:y("answers"),children:["답변 ",e.answerCount]}),(0,d.jsxs)("div",{className:y("likes"),children:["좋아요 ",e.likeCount]})]})]})},e.id))})]}):null,j=({list:e})=>{let t=e.map(e=>({id:e.id,title:e.title,answerCount:e.answers.length,likeCount:e.likeCount,link:`/community/questions/${e.typedId}`}));return(0,d.jsx)(A,{list:t})};var I=e.i(576473),C=e.i(45872),E=e.i(498952),b=e.i(804623);let q=_.default.bind(I.default),k=({disabled:e,watched:t,onToggle:s})=>{let i=()=>{e||s()};return(0,d.jsxs)("div",{className:q("container",{watched:t}),onClick:i,id:"watch-toggle-container-id",children:[(0,d.jsx)("div",{className:q("icon"),children:(0,d.jsx)(C.Icon,{name:"bellOn"})}),(0,d.jsx)("div",{className:q("label"),children:"질문 지켜보기"}),(0,d.jsx)("div",{className:q("toggle"),children:(0,d.jsx)(E.Toggle,{active:t,onClick:i})}),(0,d.jsx)(b.Tooltip,{offset:8,anchorSelect:"#watch-toggle-container-id",place:"bottom",content:t?"질문 지켜보기를 중단하면 질문에 대한 알림을 받을 수 없어요.":"질문에 답변, 댓글이 달릴 때 알림을 받을 수 있어요."})]})};var T=e.i(671722),W=e.i(351623),S=e.i(852396),U=e.i(513546);let N=W.gql`
  mutation SetWatchToggle($input: UpdateWatchInput!) {
    updateWatch(input: $input) {
      watchable {
        currentUserWatch
      }
    }
  }
`;var B=e.i(453126),Q=e.i(878061);let M=({id:e,watched:t})=>{let{canInteract:s}=(0,Q.useMyCommunityPermission)(),{open:i}=(0,T.useMembershipOfferModal)(),{loading:n,set:l}=(()=>{let[e,{loading:t}]=(0,U.useCodeitMutation)(N);return{loading:t,set:async({id:t,watched:s})=>{let i=s?S.WatchState.Watched:S.WatchState.Unwatched;await e({variables:{input:{watchableId:t,state:i}},optimisticResponse:{updateWatch:{__typename:"UpdateWatchPayload",watchable:{currentUserWatch:i}}},update:(e,{data:s})=>{e.modify({id:e.identify({__typename:"Question",id:t}),fields:{currentUserWatch:()=>s?.updateWatch.watchable?.currentUserWatch}})}})}}})(),o=async()=>{var o;return!n&&(s?(o=t?"그만 지켜보기":"질문 지켜보기",B.Amplitude.logEvent("click.community_post_page_related_question_thread",{button:{name:o}}),await l({id:e,watched:!t}),!0):(i(),!1))};return{loading:n,onToggle:o}},G=({id:e,watched:t})=>{let{loading:s,onToggle:i}=M({id:e,watched:t});return(0,d.jsx)(k,{disabled:s,watched:t,onToggle:i})};var L=e.i(133464),P=e.i(101782),D=e.i(966e3),F=e.i(567869),R=e.i(927254),O=e.i(136960),$=e.i(661706),H=e.i(542038),z=e.i(875537),V=e.i(982742);let J=W.gql`
  mutation WriteAnswer($input: WriteAnswerInput!) {
    writeAnswer(input: $input) {
      answer {
        id
      }
    }
  }
`,K=W.gql`
  mutation EditAnswer($input: EditAnswerInput!) {
    editAnswer(input: $input) {
      answer {
        id
      }
    }
  }
`;var X=e.i(682930),Y=e.i(83909),Z=e.i(956858);let ee=_.default.bind(R.default),et=({questionTypedId:e,answerTypedId:t,callbackFunction:s,initialContent:i})=>{let{currentUser:n}=(0,D.useMyProfile)(),{isMobileSize:l}=(0,F.useWindowSize)(),{setContent:o,handleSubmit:r,resetEditor:a}=(({questionTypedId:e,answerTypedId:t,initialContent:s="",callbackFunction:i})=>{let[n,l]=(0,O.useState)(!1),[o,r]=(0,O.useState)(s),{write:a}=(e=>{let[t,{loading:s}]=(0,V.useMutation)(J,{refetchQueries:["GetQuestionDetail"]});return{loading:s,write:async s=>{let i=await t({variables:{input:{questionTypedId:e,content:s}}}),n=i.data?.writeAnswer?.answer.id;return{answerId:n,message:n?"답변이 등록되었습니다.":"답변 생성에 오류가 발생했습니다. 다시 시도해주세요."}}}})(e),{edit:d}=(e=>{let[t,{loading:s}]=(0,V.useMutation)(K,{refetchQueries:["GetQuestionDetail"]});return{loading:s,edit:async s=>{let i=await t({variables:{input:{answerTypedId:e,content:s}}}),n=i.data?.editAnswer.answer.id;return{answerId:n,message:n?"답변이 수정되었습니다.":"답변 수정에 오류가 발생했습니다. 다시 시도해주세요."}}}})(t),{check:u}=(0,$.useUserLevelUp)(),c=!!t,m=async()=>{let e,t,s=(""===(0,z.replaceTagString)(o).trim()?(e=!1,t="내용을 입력해 주세요."):e=!0,{isValid:e,message:t});if(!s.isValid)return void(0,X.openModal)({icon:"alert",title:s.message,primaryButton:{text:"확인"}});let{answerId:n,message:m}=c?await d(o):await a(o);(0,Y.openToast)({message:m,icon:n?"success":"warning"}),n&&(r(""),l(!0),setTimeout(()=>{l(!1)},1e3),document.getElementById(`answer-${n}`)?.focus(),i(),c||(0,H.sendHotjarEvent)("post","community_answer")),await u()};return{content:o,setContent:r,handleSubmit:m,resetEditor:n}})({questionTypedId:e,answerTypedId:t,initialContent:i,callbackFunction:s});return n?(0,d.jsxs)("div",{role:"textbox",id:"CommunityAnswerBuilder",className:ee("container"),tabIndex:0,children:[(0,d.jsxs)("div",{className:ee("title"),children:[(0,d.jsx)("div",{className:ee("profile"),children:(0,d.jsx)(P.Profile,{src:n.profile?.photo,size:l?25:42})}),(0,d.jsxs)("div",{className:ee("description"),children:[n.name,"님 답변을 남겨주세요!"]})]}),(0,d.jsx)("div",{className:ee("editor"),children:(0,d.jsx)(Z.TiptapEditor,{resetEditor:a,initialContent:i,onChange:o,placeholder:"답변을 작성해 주세요."})}),(0,d.jsx)("div",{className:ee("button"),children:(0,d.jsx)(L.Button,{onClick:r,variant:"primary",leftIcon:"pencil",size:"large",children:"등록하기"})})]}):null},es=({questionTypedId:e,answerTypedId:t,content:s,reset:i})=>{let{canInteract:n}=(0,Q.useMyCommunityPermission)();return n?(0,d.jsx)(et,{callbackFunction:i,questionTypedId:e,answerTypedId:t,initialContent:s??void 0}):null};var ei=e.i(552148),en=e.i(940275),el=e.i(865938),eo=e.i(220996);let er=W.gql`
  fragment QuestionAmplitudeFragment on Question {
    id
    seqId
    title
    lesson {
      id
      title
      topic {
        id
        title
      }
    }
  }
`,ea=({target:e,cache:t,id:s,answerId:i,count:n})=>{let l=(({cache:e,id:t})=>e.readFragment({id:`Question:${t}`,fragment:er}))({cache:t,id:s});B.Amplitude.logEvent("click.community_question_page_like_button",{target:e,question:{id:s,name:l?.title},answer:{id:i},click:{count:n}})};var ed=e.i(121852),eu=e.i(263385),ec=e.i(488171),em=e.i(854038);let e_=_.default.bind(em.default),ep=({name:e,imageURL:t=ec.MODERATOR_PROFILE_IMAGE,direction:s="left"})=>(0,d.jsxs)("div",{className:e_("container",s),children:[(0,d.jsx)("div",{className:e_("profile"),children:(0,d.jsx)(P.Profile,{src:t,unsetShadow:!0})}),(0,d.jsxs)("div",{className:e_("text"),children:[(0,d.jsx)("b",{children:e??"커뮤니티 파트너"}),"가 수정"]})]});var eh=e.i(903053),eg=e.i(93754),ef=e.i(203909);let ev=_.default.bind(ef.default),ew=({lineThroughName:e,acceptedAnswersCount:t,name:s="-",level:i=0,image:n,hasMentorBadge:l,onClickProfile:o,profileLink:r})=>{let{isMobileSize:a}=(0,F.useWindowSize)();return(0,d.jsxs)(x.default,{href:r,className:ev("container"),onClick:o,children:[(0,d.jsx)("div",{className:ev("image"),children:(0,d.jsx)(P.Profile,{size:a?25:42,src:n??m.DEFAULT_PROFILE_IMAGE})}),(0,d.jsxs)("div",{className:ev("nameWrapper",{lineThrough:e}),children:[(0,d.jsx)("div",{className:ev("name"),children:s}),l&&(0,d.jsx)(eg.Label,{shape:"rectangle",color:"blue",size:{l:"small",m:"small",s:"xsmall"},children:"최고의 멘토"})]}),(0,d.jsxs)("div",{className:ev("information"),children:[(0,d.jsxs)("div",{className:ev("levelText"),children:["LV. ",i]}),t>0&&(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)("p",{className:ev("dot")}),(0,d.jsxs)("p",{children:["채택된 답변 수 ",t.toLocaleString()]})]})]})]})},ex=({createdAt:e,lastRevisedAt:t})=>e===t?null:{time:(0,eu.getQuestionTime)(t),description:"수정됨"},ey=W.gql`
  mutation DeleteAnswerV2($input: DeleteAnswerInput!) {
    deleteAnswerV2(input: $input) {
      success
    }
  }
`;var eA=e.i(154222);let ej=W.gql`
  mutation HideAnswer($input: HideAnswerInput!) {
    hideAnswerV2(input: $input) {
      answer {
        id
      }
    }
  }
`;var eI=e.i(495266),eC=e.i(188959),eE=e.i(525528);let eb=({answerId:e,answerTypedId:t,isAnswerPublished:s,isAnswerAccepted:i,onClickEdit:n})=>{let{deleteAnswer:l,loading:o}=(()=>{let[e,{loading:t}]=(0,V.useMutation)(ey,{refetchQueries:["GetQuestionDetail"]});return{deleteAnswer:async t=>{let s=await e({variables:{input:{answerTypedId:t}}}),i=!!s.data?.deleteAnswerV2?.success;return{isSuccess:i,message:i?"답변이 삭제되었습니다.":"답변을 삭제하는데 오류가 발생했습니다. 다시 시도해주세요."}},loading:t}})(),r=(0,eI.useApolloClient)(),a=async()=>{let{isSuccess:e,message:s}=await l(t);(0,Y.openToast)({message:s,icon:e?"success":"warning"}),e&&await r.refetchQueries({include:["GetQuestionDetail"]})},{handleAction:u,actions:c}=(({answerId:e,answerTypedId:t,isAnswerPublished:s,isAnswerAccepted:i,onClickEdit:n,onDeleteAnswer:l})=>{let o;console.log("answerTypedId",t);let{hasTAPermission:r}=(0,el.useMyRole)(),a=`HIDE_POPUP_${e}`,d=(0,eA.useOpenDeleteModal)(),{hideAnswer:u}=(()=>{let[e,{loading:t}]=(0,V.useMutation)(ej,{refetchQueries:["GetQuestionDetail"]});return{hideAnswer:async t=>{let s=await e({variables:{input:t}}),i=!!s.data?.hideAnswerV2?.answer.id;return{isSuccess:i,message:i?"숨김처리 되었습니다.":"답변을 숨기는데 오류가 발생했습니다. 다시 시도해주세요."}},loading:t}})();return{actions:(o=[{value:"edit",text:"수정하기"},{value:"remove",text:"삭제하기"}],r&&s&&o.push({value:"hide",text:"숨기기"}),o),handleAction:e=>{switch(e){case"edit":n();break;case"remove":i?(0,Y.openToast)({message:"채택된 답변은 삭제할 수 없어요.",icon:"warning"}):d(l);break;case"hide":(0,X.openModal)({icon:"delete",title:"정말 숨김처리 하시겠어요?",primaryButton:{text:"숨김처리",onClick:async e=>{let{isSuccess:s,message:i}=await u({answerTypedId:t});(0,Y.openToast)({message:i,icon:s?"success":"warning"}),e()}},secondaryButton:{text:"취소하기"}})}},hidePopupTitle:a}})({answerId:e,answerTypedId:t,isAnswerPublished:s,isAnswerAccepted:i,onClickEdit:n,onDeleteAnswer:a});return(0,d.jsxs)(d.Fragment,{children:[o&&(0,d.jsx)(en.CommonLoader,{title:""}),(0,d.jsxs)(eC.Dropdown,{children:[(0,d.jsx)(eC.Dropdown.Trigger,{children:(0,d.jsx)(eE.IconButton,{button:{type:"button"},icon:{name:"kebab",size:"medium",color:"--gray60",rotate:90}})}),(0,d.jsx)(eC.Dropdown.Content,{width:"auto",children:(0,d.jsx)(eC.Dropdown.SingleSelectMenu,{items:c,onClickItem:({value:e})=>u(e)})})]})]})},eq=({comments:e,currentUserId:t,hasAllPermissions:s,isQuestion:i})=>e?.map(e=>({id:e.id,typedId:e.typedId,writerId:e.writer?.id,profileImageURL:e.writer?.profile?.photo,name:e.writer?.name,date:(0,eu.getQuestionTime)(e.createdAt),content:e.content??"",createdAt:e.createdAt,likeCount:e.likeCount??0,currentUserLike:e.currentUserLike,actions:(({isWriter:e,hasAllPermissions:t,isQuestion:s=!1})=>{let i=[];return(e||t)&&i.push({type:"modify",label:"수정하기"},{type:"delete",label:"삭제하기"}),t&&s&&i.push({type:"goToAnswer",label:"답변으로"},{type:"move",label:"댓글이동"}),i})({isWriter:e.writer?.id===t,hasAllPermissions:s,isQuestion:i})}))??[];var ek=e.i(611335);let eT=W.gql`
  mutation AdoptAnswer($input: AdoptAnswerInput!) {
    adoptAnswer(input: $input) {
      answer {
        id
      }
    }
  }
`,eW=()=>{let{acceptAnswer:e,loading:t}=(()=>{let[e,{loading:t}]=(0,V.useMutation)(eT,{refetchQueries:["GetQuestionDetail"]});return{acceptAnswer:async t=>{let s=await e({variables:{input:{answerTypedId:t}}}),i=!!s.data?.adoptAnswer?.answer.id;return{isSuccess:i,message:i?void 0:"답변 채택에 오류가 발생했습니다. 다시 시도해주세요."}},loading:t}})(),{check:s}=(0,$.useUserLevelUp)(),i=async t=>{let{isSuccess:i,message:n}=await e(t);n&&(0,Y.openToast)({message:n,icon:i?"success":"warning"}),i&&await s()};return{openAcceptModal:e=>(0,X.openModal)({title:"정말 답변을 채택하시겠어요?",primaryButton:{text:"채택하기",onClick:t=>{i(e),t()}},secondaryButton:{}}),loading:t}},eS=({answerTypedId:e})=>{let{openAcceptModal:t}=eW();return(0,d.jsx)("div",{children:(0,d.jsx)(L.Button,{size:{l:"large",m:"large",s:"medium"},variant:"tertiary",onClick:()=>t(e),leftIcon:"check",children:"채택하기"})})};var eU=e.i(418131),eN=e.i(81787),eB=e.i(448096);let eQ=_.default.bind(eB.default),eM=({answers:e,onClickAnswer:t,onClose:s})=>(0,d.jsxs)("div",{className:eQ("container"),children:[(0,d.jsx)("div",{className:eQ("contents"),children:e.map(e=>(0,d.jsx)("button",{className:eQ("answer"),type:"button",onClick:()=>{t(e.id),s()},children:e.content},e.id))}),(0,d.jsx)("div",{className:eQ("buttonWrapper"),children:(0,d.jsx)("button",{type:"button",className:eQ("closeButton"),onClick:s,children:"취소하기"})})]}),eG=W.gql`
  mutation writePostableComment($input: WritePostableCommentInput!) {
    writePostableComment(input: $input) {
      comment {
        id
      }
    }
  }
`,eL=W.gql`
  mutation MoveCommentToAnswer(
    $questionId: ObjectId!
    $commentId: ObjectId!
    $answerId: ObjectId!
  ) {
    moveQuestionCommentToAnswerComment(
      questionId: $questionId
      commentId: $commentId
      answerId: $answerId
    ) {
      id
    }
  }
`,eP=W.gql`
  mutation UpdateComment($input: EditPostableCommentInput!) {
    editPostableComment(input: $input) {
      comment {
        id
      }
    }
  }
`,eD=W.gql`
  mutation UpgradeComment($questionId: ObjectId!, $commentId: ObjectId!) {
    upgradeCommentAsAnswer(questionId: $questionId, commentId: $commentId) {
      id
    }
  }
`;var eF=e.i(548030),eR=((t=eR||{}).Activity="activity",t.Community="community",t.Badge="badge",t);let eO=({count:e,questionId:t,list:s,shouldRenderCommentInput:i,currentUserProfile:n,answers:l,parentTypedId:o})=>{let r=(0,c.useRouter)(),{handleActions:a,handleAdd:u,inputValue:m,setInputValue:_,loading:p}=(({questionId:e,parentTypeId:t,answers:s})=>{let[i,n]=(0,O.useState)(""),{createComment:l,loading:o}=(e=>{let[t,{loading:s}]=(0,V.useMutation)(eG);return{createComment:async s=>{let i=await t({variables:{input:{targetTypedId:e,content:s}}}),n=!!i.data?.writePostableComment?.comment?.id;return{isSuccess:n,message:n?"댓글이 등록되었습니다.":"댓글 작성에 실패했습니다."}},loading:s}})(t),{updateComment:r,loading:a}=(()=>{let[e,{loading:t}]=(0,V.useMutation)(eP);return{updateComment:async(t,s)=>{let i=await e({variables:{input:{commentTypedId:t,content:s}}}),n=!!i.data?.editPostableComment?.comment.id;return{isSuccess:n,message:n?"댓글이 수정되었습니다.":"댓글 수정에 실패했습니다."}},loading:t}})(),{deleteComment:u,loading:c}=(0,eF.useDeleteComment)(),{upgradeComment:m,loading:_}=(e=>{let[t,{loading:s}]=(0,V.useMutation)(eD);return{upgradeComment:async s=>{let i=await t({variables:{questionId:e,commentId:s}}),n=!!i.data?.upgradeCommentAsAnswer?.id;return{isSuccess:n,message:n?"반영되었습니다.":"댓글 이동에 오류가 발생했습니다. 다시 시도해주세요."}},loading:s}})(e),{moveCommentToAnswer:p,loading:h}=(e=>{let[t,{loading:s}]=(0,V.useMutation)(eL);return{moveCommentToAnswer:async(s,i)=>{let n=await t({variables:{questionId:e,commentId:i,answerId:s}}),l=!!n.data?.moveQuestionCommentToAnswerComment?.id;return{isSuccess:l,message:l?"반영되었습니다.":"댓글 이동에 오류가 발생했습니다. 다시 시도해주세요."}},loading:s}})(e),{openCommentMoveModal:g}={openCommentMoveModal:({answers:e,onClickAnswer:t})=>{e&&(0,X.openModal)({title:"어떤 답변으로 이동시킬까요?",content:s=>(0,d.jsx)(eM,{answers:e,onClickAnswer:t,onClose:s})})}},{check:f}=(0,$.useUserLevelUp)(),v=(0,eI.useApolloClient)(),w=async e=>{if(!e)return void(0,Y.openToast)({message:"댓글을 입력하세요",icon:"warning"});let{isSuccess:t,message:s}=await l(e);(0,Y.openToast)({message:s,icon:t?"success":"warning"}),await f(),t&&await v.refetchQueries({include:["GetQuestionDetail"]})},x=async(e,t)=>{if(!t)return void(0,Y.openToast)({message:"댓글을 입력하세요"});let{isSuccess:s,message:i}=await r(e,t);(0,Y.openToast)({message:i,icon:s?"success":"warning"}),s&&await v.refetchQueries({include:["GetQuestionDetail"]})},y=async(e,t)=>{if(!t||!e)return;let{isSuccess:s,message:i}=await u(e,t);(0,Y.openToast)({message:i,icon:s?"success":"warning"}),s&&await v.refetchQueries({include:["GetQuestionDetail"]})},A=async e=>{if(!e)return;let{isSuccess:t,message:s}=await m(e);(0,Y.openToast)({message:s,icon:t?"success":"warning"}),t&&await v.refetchQueries({include:["GetQuestionDetail"]})},j=async(e,t)=>{if(!t)return;let{isSuccess:s,message:i}=await p(e,t);(0,Y.openToast)({message:i,icon:s?"success":"warning"}),s&&await v.refetchQueries({include:["GetQuestionDetail"]})},I=(0,eA.useOpenDeleteModal)(),C=async({commentId:e,typedId:t,actionType:i,content:n})=>{switch(i){case"add":w(n);break;case"modify":x(t,n);break;case"delete":I(()=>y(e,t));break;case"goToAnswer":A(e);break;case"move":g({answers:s,onClickAnswer:t=>j(t,e)})}};return{loading:o||a||c||_||h,handleAdd:async()=>{await C({actionType:"add",content:i})},handleActions:C,inputValue:i,setInputValue:n,handleMoveCommentToAnswer:j}})({questionId:t,answers:l,parentTypeId:o});return(0,d.jsx)(eN.CommentList,{count:e,list:s,onAction:a,onClickProfile:e=>r.push(`/users/${e}/profile?tab=activity`),input:i?(0,d.jsx)(eU.CommentInput,{value:m,onChange:e=>_(e.target.value),onKeyDown:async e=>{"Enter"!==e.key||e.shiftKey||e.nativeEvent.isComposing||(e.preventDefault(),await u(),_(""))},onCompositionEnd:e=>{e.data&&e.data.endsWith("\n")&&!p&&u().then(()=>_(""))},profileImageURL:n,disabled:p}):void 0})},e$=_.default.bind(eh.default),eH=({answer:e,acceptedAnswerId:t,questionId:s,isQuestionWriter:i,isAnswerAcceptedByOther:n,onClickEdit:l})=>{let{currentUser:o}=(0,D.useMyProfile)(),{isMobileSize:r}=(0,F.useWindowSize)(),{hasTAPermission:a}=(0,el.useMyRole)(),u=o&&o?.id===e.writer?.id,c=e?.isRevisedByOther,m=e.accepted,_=a&&e.status!==S.QuestionStatus.Published,p=ex({createdAt:e.createdAt,lastRevisedAt:e.lastRevisedAt}),h=e.writer?.questionsAnsweredOffset?.totalCount??0,{canInteract:g}=(0,Q.useMyCommunityPermission)(),{add:f}=(0,eo.useAddLike)({cacheTypename:"Answer",targetId:e.id,currentUserLikeId:e.currentUserLike?.id,originalTotalLikeCount:e.likeCount??0,originalUserLikeCount:e.currentUserLike?.count??0}),{cache:v}=(0,ed.useApolloClient)(),w=!t&&(a||i),{openAcceptModal:y,loading:A}=eW(),j=!!e.writer?.badgesOffset?.totalCount,I=eq({comments:e.comments??[],currentUserId:o?.id??"",hasAllPermissions:a}),C=async t=>{ea({target:"answer",cache:v,id:s,answerId:e.id,count:(e.currentUserLike?.count??0)+t}),await f(e.typedId,t)},E=!!m&&(n?"partner":"questioner"),b=w&&!r;return(0,d.jsxs)("div",{role:"listbox",className:e$("container",{accepted:m}),id:`answer-${e.id}`,tabIndex:0,children:[A&&(0,d.jsx)(en.CommonLoader,{title:""}),E&&(0,d.jsx)("div",{className:e$("whoAccepted"),children:(0,d.jsxs)(eg.Label,{shape:"round",color:"invert-green",size:{l:"large",m:"large",s:"medium"},children:["partner"===E?"커뮤니티 파트너":"질문자"," 채택"]})}),b&&(0,d.jsxs)("div",{className:e$("acceptOffer"),children:[(0,d.jsxs)("div",{className:e$("description"),children:["이 답변이 도움이 되셨다면 채택하기를 눌러"," ",(0,d.jsx)("strong",{children:e.writer?.name}),"님을 칭찬해주세요!"]}),(0,d.jsx)("button",{type:"button",className:e$("button"),onClick:()=>y(e.typedId),children:"채택하기"})]}),(0,d.jsx)("div",{className:e$("contentWrapper"),children:(0,d.jsx)(Z.TiptapViewer,{content:e.content})}),(0,d.jsx)("div",{className:e$("metaRow"),children:(0,d.jsx)(ew,{name:e.writer?.name??void 0,acceptedAnswersCount:h,lineThroughName:_,level:e.writer?.levelV2?.currentLevel,image:e.writer?.profile?.photo??void 0,hasMentorBadge:j,onClickProfile:()=>{B.Amplitude.logEvent("click.community_question_page_answer_profile")},profileLink:{pathname:`/users/${e.writer?.id}/profile`,query:j?{bestMentor:"true"}:void 0}})}),(0,d.jsx)("div",{className:e$("moderator"),children:c&&(0,d.jsx)(x.default,{href:`/community/revisions/${e.id}`,children:(0,d.jsx)(ep,{})})}),(0,d.jsxs)("div",{className:e$("actionsWrapper"),children:[(a||u)&&(0,d.jsx)("div",{className:e$("option",{down:b}),children:(0,d.jsx)(eb,{answerId:e.id,answerTypedId:e.typedId,isAnswerAccepted:m,isAnswerPublished:e.status!==S.QuestionStatus.Hidden,onClickEdit:l})}),(0,d.jsxs)("div",{className:e$("time"),children:[(0,eu.getQuestionTime)(e.createdAt),p&&(0,d.jsxs)(d.Fragment,{children:[" ","(",(0,d.jsx)(x.default,{href:`/community/revisions/${e.id}`,passHref:!0,children:(0,d.jsxs)("button",{type:"button",className:e$("revisedAt"),children:[(0,d.jsx)("span",{className:e$("revisedTime"),children:p.time})," ",p.description]})}),")"]})]}),(0,d.jsxs)("div",{className:e$("actionButtons"),children:[w&&(0,d.jsx)("div",{className:e$("acceptButton"),children:(0,d.jsx)(eS,{answerTypedId:e.typedId})}),(0,d.jsx)(ek.LikeButton,{disabled:!g,currentMyLike:e.currentUserLike?.count??0,likeCount:e.likeCount??0,onClick:C})]})]}),(0,d.jsx)("div",{className:e$("commentsWrapper"),children:(I.length>0||g)&&(0,d.jsx)("div",{className:e$("comments"),children:(0,d.jsx)(eO,{count:e.comments?.length??0,list:I,questionId:s,shouldRenderCommentInput:g,currentUserProfile:o?.profile?.photo??void 0,parentTypedId:e.typedId})})})]})};var ez=e.i(487653);let eV=_.default.bind(ez.default),eJ=({answers:e,questionId:t,isQuestionWriter:s,acceptedAnswerId:i,isAnswerAcceptedByOther:n,onClickEdit:l})=>(0,d.jsx)("div",{className:eV("container"),children:e.map(e=>(0,d.jsx)(eH,{answer:e,questionId:t,acceptedAnswerId:i,isAnswerAcceptedByOther:n,onClickEdit:()=>l(e.typedId,e.content),isQuestionWriter:s},e.id))});var eK=e.i(250815);let eX=_.default.bind(eK.default),eY=({question:e})=>{let{currentUser:t}=(0,D.useMyProfile)(),[s,i]=(0,O.useState)(""),[n,l]=(0,O.useState)(""),o=!!t&&t?.id===e?.writer?.id,r=e.answers?.filter(e=>!!e);return(0,d.jsxs)("div",{id:"answers",className:eX("container"),children:[!!r?.length&&(0,d.jsxs)(d.Fragment,{children:[(0,d.jsxs)("div",{className:eX("title"),children:[(0,d.jsx)("div",{className:eX("badge"),children:(0,d.jsx)(ei.Badge,{active:!0,type:"answer",size:{l:"large",m:"large",s:"small"}})}),(0,d.jsxs)("div",{className:eX("description"),children:[r.length,"개의 답변이 있어요"]})]}),(0,d.jsx)("div",{className:eX("list"),children:(0,d.jsx)(eJ,{isQuestionWriter:o,questionId:e.id,answers:r,acceptedAnswerId:e.acceptedAnswer?.id,isAnswerAcceptedByOther:e.isAnswerAcceptedByOther,onClickEdit:(e,t)=>{i(e),l(t)}})})]}),(0,d.jsx)("div",{children:(0,d.jsx)(es,{questionTypedId:e?.typedId,answerTypedId:s,content:n,reset:()=>{i(""),l("")}})})]})};var eZ=e.i(42075),e0=e.i(615890),e1=e.i(369289),e5=e.i(941842),e6=e.i(112578),e2=e.i(146554),e3=e.i(203121),e9=e.i(104825),e4=e.i(691804),e8=Object.prototype.hasOwnProperty;let e7=function(e){if(null==e)return!0;if((0,e2.default)(e)&&((0,e6.default)(e)||"string"==typeof e||"function"==typeof e.splice||(0,e3.default)(e)||(0,e4.default)(e)||(0,e5.default)(e)))return!e.length;var t=(0,e1.default)(e);if("[object Map]"==t||"[object Set]"==t)return!e.size;if((0,e9.default)(e))return!(0,e0.default)(e).length;for(var s in e)if(e8.call(e,s))return!1;return!0};var te=e.i(485798),tt=e.i(654759),ts=e.i(304495);function ti(){return(ti=Object.assign.bind()).apply(null,arguments)}var tn=function(e){return O.createElement("svg",ti({width:19,height:19,viewBox:"0 0 19 19",xmlns:"http://www.w3.org/2000/svg"},e),s||(s=O.createElement("g",{fill:"#6A666E",fillRule:"evenodd"},O.createElement("path",{d:"M15.1 5.85c.17.54.26 1.116.26 1.712v2.991l.001.005v.787l1.464 1.44a.59.59 0 0 1 .175.419v1.75c0 .324-.267.589-.596.589H12.33A2.874 2.874 0 0 1 9.5 17.875a2.874 2.874 0 0 1-2.83-2.332l-1.265-.001 1.179-1.179h9.224v-.914l-1.462-1.44a.591.591 0 0 1-.176-.419v-.972l-.001-.03V7.562c0-.247-.02-.489-.058-.725zm-3.997 9.693H7.897c.22.668.855 1.153 1.603 1.153s1.383-.485 1.603-1.153zM9.901 1c.11 0 .198.088.198.197v.596a5.875 5.875 0 0 1 4.48 2.88l-.877.877A4.679 4.679 0 0 0 9.5 2.942c-2.574 0-4.668 2.072-4.668 4.62v3.055l-.003.029.001.944a.59.59 0 0 1-.175.418l-1.463 1.44v.915h1.697L3.71 15.542H2.596a.595.595 0 0 1-.588-.493L2 14.953v-1.75c0-.155.064-.307.175-.417l1.463-1.44v-.787l.003-.029V7.562c0-3 2.313-5.475 5.267-5.77v-.595c0-.109.089-.197.198-.197z"}),O.createElement("rect",{transform:"rotate(-45 10.202 10.788)",x:.202,y:10.188,width:20,height:1.2,rx:.2}))))};function tl(){return(tl=Object.assign.bind()).apply(null,arguments)}var to=function(e){return O.createElement("svg",tl({width:19,height:19,viewBox:"0 0 19 19",xmlns:"http://www.w3.org/2000/svg"},e),i||(i=O.createElement("path",{d:"M4.829 10.646a.524.524 0 0 0 .003-.058V7.562c0-2.548 2.094-4.62 4.668-4.62 2.574 0 4.669 2.072 4.669 4.62v3.026l.001.035v.967c0 .156.064.308.176.418l1.462 1.44v.915H3.192v-.914l1.463-1.441a.59.59 0 0 0 .175-.418l-.001-.944zm4.671 6.05a1.687 1.687 0 0 1-1.603-1.153h3.206A1.687 1.687 0 0 1 9.5 16.696zm7.325-3.91-1.463-1.44v-.758c0-.018 0-.035-.002-.035V7.562c0-2.998-2.31-5.471-5.26-5.769v-.596A.198.198 0 0 0 9.9 1h-.794a.198.198 0 0 0-.198.197v.595c-2.954.295-5.268 2.77-5.268 5.77l.001 2.968a.52.52 0 0 0-.003.058v.757l-1.463 1.44a.592.592 0 0 0-.175.419v1.75c0 .324.267.589.596.589H6.67a2.874 2.874 0 0 0 2.83 2.332 2.874 2.874 0 0 0 2.828-2.332h4.075a.593.593 0 0 0 .596-.59v-1.75a.59.59 0 0 0-.175-.417z",fill:"#6500C2",fillRule:"evenodd"})))};let tr=_.default.bind(ts.default),ta=({watched:e,onToggle:t})=>(0,d.jsx)("button",{type:"button",className:tr("container",{watched:e}),onClick:t,children:e?(0,d.jsx)(tn,{className:tr("icon")}):(0,d.jsx)(to,{className:tr("icon")})});var td=e.i(993703),tu=e.i(933978),tc=e.i(169608),tm=e.i(543045);let t_=_.default.bind(tc.default),tp=({name:e="-",level:t=0,source:s})=>(0,d.jsxs)("div",{className:t_("container"),children:[(0,d.jsx)("p",{className:t_("name"),children:e}),(0,d.jsx)("div",{className:t_("level"),children:(0,d.jsx)(tm.LevelBadge,{level:t})}),(0,d.jsx)("div",{className:t_("image"),children:(0,d.jsx)("img",{src:s??m.DEFAULT_PROFILE_IMAGE,alt:`${e} Profile`})})]});var th=e.i(820021);let tg=_.default.bind(th.default),tf=({id:e,title:t,lineThroughTitle:s,createdAt:i,lastRevisedAt:n,likeCount:l,viewCount:o,category:r,writer:a,path:u})=>{let c=(0,eu.getQuestionTime)(i),m=(0,tu.getBreadcrumb)({category:r,path:u}),_=ex({createdAt:i,lastRevisedAt:n});return(0,d.jsxs)("div",{className:tg("container"),children:[(0,d.jsxs)("div",{className:tg("contents"),children:[(0,d.jsx)("div",{className:tg("lessonBreadcrumbs"),children:(0,d.jsx)(td.LessonBreadcrumbs,{large:!0,list:m.list,link:m.link})}),(0,d.jsxs)("div",{className:tg("titleWrapper"),children:[(0,d.jsx)("div",{className:tg("badge"),children:(0,d.jsx)(ei.Badge,{active:!0,type:"question",size:{l:"large",m:"large",s:"small"}})}),(0,d.jsx)("p",{className:tg("title",{lineThrough:s}),children:t})]}),(0,d.jsx)("div",{children:(0,d.jsxs)("div",{className:tg("counters"),children:[(0,d.jsxs)("p",{className:tg("item","view"),children:["조회 ",o.toLocaleString()]}),(0,d.jsxs)("p",{className:tg("item","like"),children:["좋아요 ",l.toLocaleString()]}),(0,d.jsxs)("p",{className:tg("item","time"),children:[c,_&&(0,d.jsxs)("span",{className:tg("revisedAtWrapper"),children:["(",(0,d.jsx)(x.default,{href:`/community/revisions/${e}`,children:(0,d.jsxs)("button",{type:"button",className:tg("item","revisedAt"),children:[(0,d.jsx)("span",{className:tg("revisedTime"),children:_.time})," ",_.description]})}),")"]})]})]})})]}),(0,d.jsx)("div",{className:tg("profile"),children:(0,d.jsx)(x.default,{href:{pathname:`/users/${a?.id}/profile`,query:{tab:"activity"}},children:(0,d.jsx)(tp,{name:a?.name??void 0,level:a?.levelV2?.currentLevel,source:a?.profile?.photo??void 0})})})]})};var tv=e.i(116321),tw=e.i(321489);let tx=W.gql`
  mutation DeleteQuestion($input: DeleteQuestionInput!) {
    deleteQuestion(input: $input) {
      id
      deletedAt
    }
  }
`,ty=W.gql`
  mutation HideQuestion($input: HideQuestionInput!) {
    hideQuestionV2(input: $input) {
      question {
        id
      }
    }
  }
`,tA=({typedId:e,isQuestionPublished:t})=>{let{actions:s,handleAction:i}=(({isQuestionPublished:e,typedId:t})=>{let s,i=(0,c.useRouter)(),{hasTAPermission:n}=(0,el.useMyRole)(),l=(0,eA.useOpenDeleteModal)(),{deleteQuestion:o}=(()=>{let[e]=(0,V.useMutation)(tx,{refetchQueries:["GetQuestions"]});return{deleteQuestion:async t=>{let s=await e({variables:{input:{questionTypedId:t}}}),i=!!s.data?.deleteQuestion?.id;return{isSuccess:i,message:i?"질문이 삭제되었습니다.":"질문을 삭제하는데 오류가 발생했습니다. 다시 시도해주세요."}}}})(),r=(0,eI.useApolloClient)(),a=async()=>{let{isSuccess:e,message:s}=await o(t);(0,Y.openToast)({message:s,icon:e?"success":"warning"}),e&&(await r.refetchQueries({include:["GetQuestionDetail"]}),i.push("/community/questions"))},{hideQuestion:d}=(()=>{let[e]=(0,V.useMutation)(ty,{refetchQueries:["GetQuestionDetail"]});return{hideQuestion:async t=>{let s=await e({variables:{input:{questionTypedId:t}}}),i=!!s.data?.hideQuestionV2?.question.id;return{isSuccess:i,message:i?"숨김처리 되었습니다.":"질문을 숨기는데 오류가 발생했습니다. 다시 시도해주세요."}}}})();return{actions:(s=[{value:"edit",text:"수정하기"},{value:"remove",text:"삭제하기"}],n&&e&&s.push({value:"hide",text:"숨기기"}),s),handleAction:e=>{switch(e){case"edit":i.push(`/community/questions/${t}/edit`);break;case"remove":l(a);break;case"hide":(0,X.openModal)({icon:"delete",title:"정말 숨김처리 하시겠어요?",primaryButton:{text:"숨김처리",onClick:async e=>{let{isSuccess:s,message:i}=await d(t);(0,Y.openToast)({message:i,icon:s?"success":"warning"}),e()}},secondaryButton:{text:"취소하기"}})}}}})({isQuestionPublished:t,typedId:e});return(0,d.jsx)("div",{children:(0,d.jsxs)(eC.Dropdown,{children:[(0,d.jsx)(eC.Dropdown.Trigger,{children:(0,d.jsx)(eE.IconButton,{button:{type:"button"},icon:{name:"kebab",size:"medium",color:"--gray60",rotate:90}})}),(0,d.jsx)(eC.Dropdown.Content,{width:"auto",children:(0,d.jsx)(eC.Dropdown.SingleSelectMenu,{items:s,onClickItem:({value:e})=>i(e)})})]})})};var tj=e.i(510985);let tI={src:e.i(604082).default,width:171,height:34,blurWidth:8,blurHeight:2,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAACCAYAAABllJ3tAAAATUlEQVR42gFCAL3/AIM7JHRbKiNXTSUzU2EvWHI5HUtTSieHiEMghX0wEmFbAIs/Kn9qMTFqSiQ6VGEwaHtHJW5vRSOEfz8bfnNAFYN5ezQT6BdyyWMAAAAASUVORK5CYII="};var tC=e.i(910081),tE=e.i(773502),tb=e.i(534474),tq=e.i(579781),tk=e.i(144450);let tT=_.default.bind(tj.default),tW=({content:e,contentCompleted:t,conversationStarterList:s,onSubmit:i})=>{let n=t?"out":e?"ing":"in",l=(e,t)=>{i?.(e,t)};return(0,d.jsxs)("div",{className:tT("container"),children:[(0,d.jsxs)("div",{className:tT("name"),children:[(0,d.jsx)(tk.GuruLogo,{status:n,className:tT("logo")}),(0,d.jsx)("img",{className:tT("text"),src:tI.src,alt:"AI GURU"})]}),(0,d.jsx)("div",{children:"in"===n?(0,d.jsx)("div",{className:tT("loading"),children:(0,d.jsx)(tC.MessageLoading,{})}):(0,d.jsx)(tE.MarkdownViewer,{content:e})}),t&&i&&(0,d.jsxs)("div",{className:tT("input"),children:[(0,d.jsx)("div",{className:tT("conversationStarter"),children:(0,d.jsx)(tq.GuruConversationStarter,{list:s,onClick:e=>{l(e,"conversation_starter")}})}),(0,d.jsx)(tb.GuruTextarea,{placeholder:"더 궁금한 것이 있다면 이어서 질문해 보세요",maxLength:1e3,onSubmit:e=>l(e,"input_in_question")})]})]})};var tS=e.i(703188);let tU={src:e.i(272842).default,width:48,height:48,blurWidth:8,blurHeight:8,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAICAYAAADED76LAAAA3ElEQVR42m2PS8sBYQCFp76vXIZ3XHtDZJiF3MqGhHFbTtkoNhIr5RIhspOIUpMiO3s7JUnZWdlMGpEkSuJ3WNggz/KcU+ccBHlDK3MqDSqvBvkF4MkESc+4mqWmbbFAAT5MiAlBnsoVOtE9U6Hux7CLrmAofIWChJyYZ0I9tjk8jBKrU8F/Oad8DyYRmNZx6FIjJC7RL5Ikfaumt7P4iC27N7uw8cp68UlDKSLVrwqUA7o+e2kZ6TJFx3pvg60a9w9+7eCjoO0u0THToM/7l2M/n5ilFkKHWYl37QlEFjgF3tEkVgAAAABJRU5ErkJggg=="},tN=_.default.bind(tS.default),tB=({question:e,onClick:t})=>(0,d.jsxs)("div",{children:[(0,d.jsx)("div",{className:tN("question"),children:e}),(0,d.jsxs)("button",{type:"button",className:tN("button"),onClick:t,children:["질문에 대한",(0,d.jsx)("img",{className:tN("logo"),src:tU.src,alt:"rhombus"}),(0,d.jsx)("img",{className:tN("text"),src:tI.src,alt:"AI GURU"}),"의 답변보기",(0,d.jsx)(C.Icon,{name:"chevron",className:tN("icon"),thickness:"bold",rotate:180,color:"--txt-secondary",size:{l:"large",s:"medium"}})]})]});var tQ=e.i(43528);function tM(){return(tM=Object.assign.bind()).apply(null,arguments)}var tG=function(e){return O.createElement("svg",tM({width:60,height:60,viewBox:"0 0 60 60",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),O.createElement("mask",{id:"mask0_10693_2065",style:{maskType:"alpha"},maskUnits:"userSpaceOnUse",x:0,y:0,width:60,height:60},n||(n=O.createElement("circle",{cx:30,cy:30,r:30,fill:"url(#paint0_linear_10693_2065)"}))),l||(l=O.createElement("g",{mask:"url(#mask0_10693_2065)"},O.createElement("g",{filter:"url(#filter0_d_10693_2065)"},O.createElement("circle",{cx:30,cy:30,r:30,fill:"url(#paint1_linear_10693_2065)"})),O.createElement("g",{filter:"url(#filter1_f_10693_2065)"},O.createElement("circle",{cx:26.25,cy:26.25,r:26.25,transform:"matrix(-1 0 0 1 36.6664 19.166)",fill:"url(#paint2_linear_10693_2065)"})),O.createElement("path",{d:"M59.5833 30.4163C59.5833 14.0779 46.3384 0.833008 30 0.833008",stroke:"url(#paint3_linear_10693_2065)",strokeOpacity:.43,strokeWidth:4.16667,strokeLinecap:"round"}),O.createElement("path",{d:"M1.66697 29.1676C1.66697 45.5061 14.9119 58.751 31.2503 58.751",stroke:"url(#paint4_linear_10693_2065)",strokeOpacity:.3,strokeWidth:4.16667,strokeLinecap:"round"}))),O.createElement("g",{filter:"url(#filter2_d_10693_2065)"},O.createElement("mask",{id:"mask1_10693_2065",style:{maskType:"alpha"},maskUnits:"userSpaceOnUse",x:14,y:14,width:32,height:32},o||(o=O.createElement("path",{d:"M28.5118 15.9167C29.078 14.617 30.9214 14.617 31.4876 15.9167C33.9441 21.5562 38.4445 26.0566 44.084 28.5131C45.3837 29.0793 45.3837 30.9227 44.084 31.4888C38.4445 33.9454 33.9441 38.4458 31.4876 44.0853C30.9214 45.385 29.078 45.385 28.5118 44.0853C26.0553 38.4458 21.5549 33.9454 15.9154 31.4888C14.6157 30.9227 14.6157 29.0793 15.9154 28.5131C21.5549 26.0566 26.0553 21.5562 28.5118 15.9167Z",fill:"white"}))),r||(r=O.createElement("g",{mask:"url(#mask1_10693_2065)"},O.createElement("g",{filter:"url(#filter3_f_10693_2065)"},O.createElement("circle",{cx:10.5,cy:10.5,r:10.5,transform:"matrix(-1 0 0 1 44.3842 14.251)",fill:"white"})),O.createElement("g",{filter:"url(#filter4_f_10693_2065)"},O.createElement("circle",{cx:5.25,cy:5.25,r:5.25,transform:"matrix(-1 0 0 1 28.2501 21.25)",fill:"white"})),O.createElement("g",{filter:"url(#filter5_f_10693_2065)"},O.createElement("circle",{cx:10.5,cy:10.5,r:10.5,transform:"matrix(-1 0 0 1 43.4164 14.251)",fill:"white",fillOpacity:.7})),O.createElement("g",{filter:"url(#filter6_f_10693_2065)"},O.createElement("circle",{cx:10.7917,cy:10.7917,r:10.7917,transform:"matrix(-1 0 0 1 31.1665 28.834)",fill:"#FFE5D5"})),O.createElement("g",{filter:"url(#filter7_f_10693_2065)"},O.createElement("circle",{cx:5.25,cy:5.25,r:5.25,transform:"matrix(-1 0 0 1 21.25 19.502)",fill:"#FFE7D8"})),O.createElement("g",{filter:"url(#filter8_f_10693_2065)"},O.createElement("path",{d:"M31.1665 15.709C32.0415 18.7229 36.1248 25.9173 44.5832 29.1257",stroke:"#F5C7FD",strokeWidth:.833333}))))),a||(a=O.createElement("defs",null,O.createElement("filter",{id:"filter0_d_10693_2065",x:-3.33333,y:0,width:66.6667,height:66.6667,filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB"},O.createElement("feFlood",{floodOpacity:0,result:"BackgroundImageFix"}),O.createElement("feColorMatrix",{in:"SourceAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),O.createElement("feOffset",{dy:3.33333}),O.createElement("feGaussianBlur",{stdDeviation:1.66667}),O.createElement("feComposite",{in2:"hardAlpha",operator:"out"}),O.createElement("feColorMatrix",{type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.25 0"}),O.createElement("feBlend",{mode:"normal",in2:"BackgroundImageFix",result:"effect1_dropShadow_10693_2065"}),O.createElement("feBlend",{mode:"normal",in:"SourceGraphic",in2:"effect1_dropShadow_10693_2065",result:"shape"})),O.createElement("filter",{id:"filter1_f_10693_2065",x:-30.8336,y:4.16602,width:82.5,height:82.5,filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB"},O.createElement("feFlood",{floodOpacity:0,result:"BackgroundImageFix"}),O.createElement("feBlend",{mode:"normal",in:"SourceGraphic",in2:"BackgroundImageFix",result:"shape"}),O.createElement("feGaussianBlur",{stdDeviation:7.5,result:"effect1_foregroundBlur_10693_2065"})),O.createElement("filter",{id:"filter2_d_10693_2065",x:3.27395,y:4.94238,width:53.1237,height:53.4505,filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB"},O.createElement("feFlood",{floodOpacity:0,result:"BackgroundImageFix"}),O.createElement("feColorMatrix",{in:"SourceAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),O.createElement("feOffset",{dy:1.66667}),O.createElement("feGaussianBlur",{stdDeviation:5.83333}),O.createElement("feComposite",{in2:"hardAlpha",operator:"out"}),O.createElement("feColorMatrix",{type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.08 0"}),O.createElement("feBlend",{mode:"normal",in2:"BackgroundImageFix",result:"effect1_dropShadow_10693_2065"}),O.createElement("feBlend",{mode:"normal",in:"SourceGraphic",in2:"effect1_dropShadow_10693_2065",result:"shape"})),O.createElement("filter",{id:"filter3_f_10693_2065",x:13.3842,y:4.25098,width:41,height:41,filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB"},O.createElement("feFlood",{floodOpacity:0,result:"BackgroundImageFix"}),O.createElement("feBlend",{mode:"normal",in:"SourceGraphic",in2:"BackgroundImageFix",result:"shape"}),O.createElement("feGaussianBlur",{stdDeviation:5,result:"effect1_foregroundBlur_10693_2065"})),O.createElement("filter",{id:"filter4_f_10693_2065",x:11.0834,y:14.5833,width:23.8333,height:23.8333,filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB"},O.createElement("feFlood",{floodOpacity:0,result:"BackgroundImageFix"}),O.createElement("feBlend",{mode:"normal",in:"SourceGraphic",in2:"BackgroundImageFix",result:"shape"}),O.createElement("feGaussianBlur",{stdDeviation:3.33333,result:"effect1_foregroundBlur_10693_2065"})),O.createElement("filter",{id:"filter5_f_10693_2065",x:12.4164,y:4.25098,width:41,height:41,filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB"},O.createElement("feFlood",{floodOpacity:0,result:"BackgroundImageFix"}),O.createElement("feBlend",{mode:"normal",in:"SourceGraphic",in2:"BackgroundImageFix",result:"shape"}),O.createElement("feGaussianBlur",{stdDeviation:5,result:"effect1_foregroundBlur_10693_2065"})),O.createElement("filter",{id:"filter6_f_10693_2065",x:1.24986,y:20.5007,width:38.25,height:38.2497,filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB"},O.createElement("feFlood",{floodOpacity:0,result:"BackgroundImageFix"}),O.createElement("feBlend",{mode:"normal",in:"SourceGraphic",in2:"BackgroundImageFix",result:"shape"}),O.createElement("feGaussianBlur",{stdDeviation:4.16667,result:"effect1_foregroundBlur_10693_2065"})),O.createElement("filter",{id:"filter7_f_10693_2065",x:4.08333,y:12.8353,width:23.8333,height:23.8333,filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB"},O.createElement("feFlood",{floodOpacity:0,result:"BackgroundImageFix"}),O.createElement("feBlend",{mode:"normal",in:"SourceGraphic",in2:"BackgroundImageFix",result:"shape"}),O.createElement("feGaussianBlur",{stdDeviation:3.33333,result:"effect1_foregroundBlur_10693_2065"})),O.createElement("filter",{id:"filter8_f_10693_2065",x:29.0997,y:13.9261,width:17.2979,height:17.2562,filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB"},O.createElement("feFlood",{floodOpacity:0,result:"BackgroundImageFix"}),O.createElement("feBlend",{mode:"normal",in:"SourceGraphic",in2:"BackgroundImageFix",result:"shape"}),O.createElement("feGaussianBlur",{stdDeviation:.833333,result:"effect1_foregroundBlur_10693_2065"})),O.createElement("linearGradient",{id:"paint0_linear_10693_2065",x1:2.08333,y1:17.5,x2:57.9167,y2:40.8333,gradientUnits:"userSpaceOnUse"},O.createElement("stop",{offset:.0475281,stopColor:"#F691A5"}),O.createElement("stop",{offset:1,stopColor:"#461EE7"})),O.createElement("linearGradient",{id:"paint1_linear_10693_2065",x1:3.33333,y1:48.75,x2:52.9167,y2:11.25,gradientUnits:"userSpaceOnUse"},O.createElement("stop",{offset:.0475281,stopColor:"#F691A5"}),O.createElement("stop",{offset:1,stopColor:"#461EE7"})),O.createElement("linearGradient",{id:"paint2_linear_10693_2065",x1:26.25,y1:0,x2:4.45755,y2:35.6604,gradientUnits:"userSpaceOnUse"},O.createElement("stop",{stopColor:"#FF8033"}),O.createElement("stop",{offset:1,stopColor:"#FD5B5B"})),O.createElement("linearGradient",{id:"paint3_linear_10693_2065",x1:31.6667,y1:.833008,x2:58.75,y2:29.583,gradientUnits:"userSpaceOnUse"},O.createElement("stop",{stopColor:"white",stopOpacity:0}),O.createElement("stop",{offset:.248364,stopColor:"white"}),O.createElement("stop",{offset:.657457,stopColor:"white",stopOpacity:.869479}),O.createElement("stop",{offset:1,stopColor:"white",stopOpacity:0})),O.createElement("linearGradient",{id:"paint4_linear_10693_2065",x1:29.5836,y1:58.751,x2:2.5003,y2:30.001,gradientUnits:"userSpaceOnUse"},O.createElement("stop",{stopColor:"#212121",stopOpacity:0}),O.createElement("stop",{offset:.248364,stopColor:"#DD2811"}),O.createElement("stop",{offset:.657457,stopColor:"#D73737",stopOpacity:.67}),O.createElement("stop",{offset:1,stopColor:"#2B2B2B",stopOpacity:0})))))},tL=e.i(125508);let tP=_.default.bind(tL.default),tD=()=>(0,d.jsx)("div",{className:tP("container"),children:(0,d.jsx)(tG,{})}),tF=_.default.bind(tQ.default),tR=({content:e})=>(0,d.jsxs)("div",{className:tF("container"),children:[(0,d.jsx)("div",{className:tF("left"),children:(0,d.jsx)(tD,{})}),(0,d.jsx)("div",{className:tF("right"),children:(0,d.jsx)("div",{className:tF("content"),children:e})})]});var tO=e.i(934500);let t$=_.default.bind(tO.default),tH=({isChatOpen:e,toggleChat:t,chat:s})=>(0,d.jsxs)("div",{className:t$("container",{open:e}),children:[(0,d.jsx)("button",{type:"button",className:t$("button"),onClick:t,children:(0,d.jsx)(tD,{})}),e&&(0,d.jsx)("div",{className:t$("chat"),"data-theme":"DARK",children:s})]});var tz=e.i(923735),tV=e.i(213290),tJ=e.i(206056),tK=e.i(642198),tX=e.i(313839),tY=e.i(957131),tZ=e.i(581850);let t0=_.default.bind(tZ.default),t1=({onClick:e})=>{let t=(0,c.useRouter)();return(0,d.jsxs)("div",{className:t0("wrapper"),children:[(0,d.jsx)("div",{className:t0("dim")}),(0,d.jsxs)("div",{className:t0("container"),children:[(0,d.jsx)("div",{className:t0("question"),children:"GURU의 답변이 궁금하다면?"}),(0,d.jsx)(x.default,{href:`/signup?landingLink=${t.asPath}`,onClick:e,children:(0,d.jsx)(L.Button,{variant:"primary",children:"가입하고 대화 이어하기"})})]})]})};var t5=e.i(746117),t6=e.i(454756),t2=e.i(598621);let t3=W.gql`
  subscription CreateCommunityGuruMessageSubscription(
    $authentication: String,
    $deviceId: String!,
    $questionTypedId: ID!,
    $content: String!
  ) {
    createCommunityGuruMessage(
      authentication: $authentication,
      deviceId: $deviceId,
      questionTypedId: $questionTypedId,
      content: $content
    )
  }
`,t9=({subscriptionToken:e,questionTypedId:t,question:s,onComplete:i,scrollToEnd:n})=>{let[l,o]=(0,O.useState)("in"),{loading:r,message:a,error:u}=(({subscriptionToken:e,deviceId:t,questionTypedId:s,question:i,onData:n,onComplete:l})=>{let[o,r]=(0,O.useState)(""),{loading:a,error:d}=(0,t2.useSubscription)(t3,{variables:{authentication:e,deviceId:t,questionTypedId:s,content:i},skip:!i||!t,onData:e=>{let t=e?.data?.data;t?.createCommunityGuruMessage&&r(e=>e+t.createCommunityGuruMessage),n()},onComplete:l}),u=(0,O.useMemo)(()=>d?.message==="You have reached your daily usage limit."?t6.EXCEEDED_MESSAGE:t6.EXTERNAL_REPORT_MESSAGE,[d]);return(0,O.useEffect)(()=>()=>{r("")},[]),{loading:a,message:d?u:o,error:d}})({subscriptionToken:e,deviceId:B.Amplitude.getDeviceId()??"",questionTypedId:t,question:s,onData:n,onComplete:()=>{o("out"),setTimeout(()=>{i()},t6.ANIMATION_TIME)}}),c=(0,O.useRef)(null);return(0,O.useEffect)(()=>{r&&!u&&(n(),c.current=setTimeout(()=>{o("ing")},t6.ANIMATION_TIME))},[r,u]),(0,O.useEffect)(()=>{u&&(clearTimeout(c.current),o("out"),n())},[u]),(0,O.useEffect)(()=>()=>{clearTimeout(c.current)},[]),(0,d.jsx)(t5.ChatMessage,{type:u?"error":"text",user:{role:"GURU",name:"GURU"},avatar:(0,d.jsx)(tk.GuruLogo,{status:l,size:28}),loading:r,content:a})};var t4=e.i(477543),t8=e.i(313974),t7=e.i(861130);let se=({questionTypedId:e,list:t,error:s,myProfile:i,firstMessage:n,onClose:l,onStreamComplete:o,sendAmplitudeSendButton:r,sendAmplitudeSignUp:a})=>{let u=(0,O.useRef)(null),c=t[t.length-1],{isEnd:m,scrollToEnd:_}=(({ref:e,dep:t,behavior:s,initialIsEnd:i=!0})=>{let[n,l]=(0,O.useState)(i),o=(0,O.useCallback)(()=>{e.current?.scrollTo({top:e.current?.scrollHeight,behavior:s??"auto"})},[s,e]),r=()=>{var t;l(!!(t=e.current)&&t.scrollHeight-t.scrollTop-t.clientHeight<50)};return(0,O.useEffect)(()=>(e.current?.addEventListener("scroll",r),()=>{e.current?.removeEventListener("scroll",r)}),[e,t]),{isEnd:n,scrollToEnd:o}})({ref:u,dep:c?.id,behavior:"smooth"}),{isScrolled:p}=(0,tV.useIsScrolled)(u,c?.id),[h,g]=(0,O.useState)(""),{subscriptionToken:f,refetch:v}=(0,t7.useSubscriptionToken)(),{isLoggedIn:w}=(0,tY.useIsLoggedIn)(),x=()=>{m&&w&&setTimeout(()=>{_()})},y=async()=>{await o(),g(""),await v(),x()},A=!!h;(0,O.useEffect)(()=>{!w&&u?.current&&(u.current.style.overflow="hidden")},[w]),(0,O.useEffect)(()=>{n&&0===t.length&&g(n)},[n]);let j=(0,O.useMemo)(()=>h?[...t,{id:"temp",typedId:"temp",type:"text",content:h,user:i}]:t,[t,h]);return(0,d.jsx)(tz.ChatLayout,{header:(0,d.jsx)(tJ.ChatHeader,{isScrolled:p,buttons:(0,d.jsx)(eE.IconButton,{button:{type:"button",onClick:l},icon:{name:"xMark"}})}),content:(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(tK.ChatContent,{list:j,messageStreaming:A&&(0,d.jsx)(t9,{subscriptionToken:f,questionTypedId:e,question:h,scrollToEnd:x,onComplete:y}),isSubmitted:!1}),!w&&(0,d.jsx)(t1,{onClick:a})]}),contentWrapperRef:u,footer:(0,d.jsx)(tX.ChatFooter,{errorCode:w?(0,t4.getErrorCode)(s):t8.ErrorCode.GURU_MESSAGE_EXCEEDED,onSubmit:e=>{g(e),x(),r()}})})};var st=e.i(280429),ss=e.i(656212);let si=W.gql`
  ${ss.GURU_MESSAGE_FIELDS}
  query QuestionGuru($typedId: ID!, $deviceId: String) {
    question(typedId: $typedId) {
      id
      openAIAnswer
      additionalQuestionSuggestions
      guruThread(deviceId: $deviceId) {
        id
        typedId
        messages {
          ... GuruMessageFields
        }
      }
    }
  }
`;var sn=e.i(914410),sl=e.i(736976),so=e.i(539520),sr=e.i(905674);let sa=W.gql`
  subscription CreateOpenAiAnswer(
    $questionTypedId: ID!
  ) {
    createOpenAIAnswer(
      questionTypedId: $questionTypedId
    )
  }
`,sd=({question:e,lesson:t,topic:s})=>{let{data:i,loading:n,error:l,refetch:o}=((e,{onCompleted:t})=>{let{data:s,loading:i,error:n,refetch:l}=(0,st.useQuery)(si,{variables:{typedId:e,deviceId:B.Amplitude.getDeviceId()??""},skip:!e,onCompleted:t});return{data:s?.question,loading:i,error:n,refetch:l}})(e.typedId,{onCompleted:e=>{if(e.question.guruThread){a("floating"),h(!0);return}a("trigger")}}),[r,a]=(0,O.useState)(i?.guruThread?"floating":"trigger"),{team:u,loading:c}=(0,so.useMyTeam)(),[m,_]=(0,O.useState)([]),[p,h]=(0,O.useState)(!!i?.guruThread),[g,f]=(0,O.useState)(""),{message:v,completed:w}=(({enabled:e,questionTypedId:t,onData:s,onComplete:i})=>{let[n,l]=(0,O.useState)(""),[o,r]=(0,O.useState)(!1),{loading:a,error:d}=(0,t2.useSubscription)(sa,{variables:{questionTypedId:t},skip:!e||!t,onData:e=>{let t=e?.data?.data?.createOpenAIAnswer;t&&(0,sr.flushSync)(()=>{l(e=>e+t)}),s?.()},onComplete:()=>{r(!0),i?.()}});return(0,O.useEffect)(()=>()=>{l("")},[t]),{message:n,completed:o,loading:a,error:d}})({enabled:"answer"===r&&!i?.openAIAnswer,questionTypedId:e.typedId}),x=((e,t=20)=>{let[s,i]=(0,O.useState)("");return(0,O.useEffect)(()=>{if(i(""),!e)return;let s=0,n=setInterval(()=>{s<e.length?((0,sr.flushSync)(()=>{i(t=>t+e[s])}),s++):clearInterval(n)},t);return()=>{clearInterval(n)}},[e]),s})("answer"===r?i?.openAIAnswer:void 0),y=()=>{a("answer"),B.Amplitude.logEvent("view.community_question_page_guru_answer",{question:{id:e.id,name:e.title},lesson:{id:t.id,name:t.title},topic:{id:s.id,name:s.title}})},A=s=>{B.Amplitude.logEvent("click.community_question_page_guru_send_button",{question:{id:e.id,name:e.title},lesson:{id:t.id,name:t.title},thread:{id:i?.guruThread?.id},button:{type:s}})},j=(e,t)=>{f(e),h(!0),a("floating"),A(t)},I=(0,sl.useGuruMyProfile)();return((0,O.useEffect)(()=>{i?.guruThread?.messages.length&&_((0,sn.mapThread)({raw:i?.guruThread?.messages??[],myProfile:I}))},[i?.guruThread?.messages]),(0,O.useEffect)(()=>()=>{_([])},[e.typedId]),(0,O.useEffect)(()=>{i?.openAIAnswer&&B.Amplitude.logEvent("test.guru_in_community_question",{question:{id:e.id,name:e.title},lesson:{id:t.id,name:t.title}})},[i?.openAIAnswer]),n||c||u&&!u.options.guruEnabled)?null:(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(tR,{content:(()=>{switch(r){case"trigger":return(0,d.jsx)(tB,{question:e.title,onClick:y});case"answer":return(0,d.jsx)(tW,{contentCompleted:i?.openAIAnswer&&x===i.openAIAnswer||w,content:(x||v)??"",conversationStarterList:i?.additionalQuestionSuggestions??[],onSubmit:j});case"floating":return(0,d.jsx)(tW,{contentCompleted:!0,content:i?.openAIAnswer??"",conversationStarterList:i?.additionalQuestionSuggestions??[]})}})()}),"floating"===r&&(0,d.jsx)(tH,{isChatOpen:p,toggleChat:()=>h(e=>!e),chat:(0,d.jsx)(se,{myProfile:I,firstMessage:g,list:m,questionTypedId:e.typedId,error:l,onClose:()=>h(!1),onStreamComplete:async()=>{await o()},sendAmplitudeSendButton:()=>{A("input_in_chat")},sendAmplitudeSignUp:()=>{B.Amplitude.logEvent("click.community_question_page_signup_button_in_guru",{question:{id:e.id,name:e.title},lesson:{id:t.id,name:t.title}})}})})]})},su=_.default.bind(tv.default),sc=({question:e})=>{let t=e?.isRevisedByOther,{isDesktopSize:s}=(0,F.useWindowSize)(),{currentUser:i}=(0,D.useMyProfile)(),{hasTAPermission:n}=(0,el.useMyRole)(),l=i&&i?.id===e?.writer?.id,{canInteract:o}=(0,Q.useMyCommunityPermission)(),{add:r}=(0,eo.useAddLike)({cacheTypename:"Question",targetId:e.id,originalTotalLikeCount:e.likeCount??0,currentUserLikeId:e.currentUserLike?.id,originalUserLikeCount:e.currentUserLike?.count??0}),a=e.currentUserWatch===S.WatchState.Watched,{onToggle:u}=M({id:e.id,watched:a}),{cache:c}=(0,ed.useApolloClient)(),m=async()=>{await u()&&!s&&(0,Y.openToast)({message:a?"이 질문에 답변, 댓글이 달릴 때 알림을 드릴게요.":"이 질문에 대한 알림을 더 이상 보내지 않을게요.",icon:"info"})},_=eq({comments:e.comments??[],isQuestion:!0,currentUserId:i?.id??"",hasAllPermissions:n}),p=async t=>{ea({target:"question",cache:c,id:e.id,count:(e.currentUserLike?.count??0)+t}),await r(e.typedId,t)};return(0,d.jsxs)("div",{className:su("container"),children:[(0,d.jsxs)("div",{className:su("headerWrapper"),children:[(0,d.jsx)(tf,{id:e.id,title:e.title,lineThroughTitle:e.status===S.QuestionStatus.Hidden&&n,createdAt:e.createdAt,lastRevisedAt:e.lastRevisedAt,likeCount:e.likeCount??0,viewCount:e.viewCount,category:e.category,path:e.path,writer:e.writer??void 0}),(n||l)&&(0,d.jsx)("div",{className:su("optionsWrapper"),children:(0,d.jsx)(tA,{typedId:e.typedId,isQuestionPublished:e.status===S.QuestionStatus.Published})}),(0,d.jsxs)("div",{className:su("profile"),children:[(0,d.jsx)(x.default,{href:{pathname:`/users/${e.writer?.id}/profile`,query:{tab:"activity"}},children:(0,d.jsx)(tp,{name:e?.writer?.name??void 0,level:e?.writer?.levelV2?.currentLevel,source:e?.writer?.profile?.photo??void 0})}),(n||l)&&(0,d.jsx)(tA,{typedId:e.typedId,isQuestionPublished:e.status===S.QuestionStatus.Published})]})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)("div",{className:su("contentWrapper"),children:(0,d.jsx)(Z.TiptapViewer,{content:e.content})}),(0,d.jsx)("div",{className:su("guru"),children:(0,d.jsx)(sd,{question:{id:e.id,title:e.title,typedId:e.typedId},lesson:{id:e.lesson?.id??"",title:e.lesson?.title??""},topic:{id:e.lesson?.topic?.id??"",title:e.lesson?.topic?.title??""}})}),t&&(0,d.jsx)("div",{className:su("moderator"),children:(0,d.jsx)(x.default,{href:`/community/revisions/${e.id}`,children:(0,d.jsx)(ep,{direction:s?"left":"right"})})}),(0,d.jsxs)("div",{className:su("actionsWrapper"),children:[o&&(0,d.jsx)("div",{className:su("writeAnswer"),children:(0,d.jsx)(L.Button,{variant:"primary",size:"large",leftIcon:"pencil",onClick:()=>{document.getElementById("CommunityAnswerBuilder")?.focus()},children:"답변하기"})}),(0,d.jsx)("div",{className:su("watch"),children:(0,d.jsx)(ta,{watched:a,onToggle:m})}),(0,d.jsx)("div",{className:su("shareButton"),children:(0,d.jsx)(tw.ShareButton,{})}),(0,d.jsx)(ek.LikeButton,{disabled:!o,currentMyLike:e.currentUserLike?.count??0,likeCount:e.likeCount??0,onClick:p})]}),(0,d.jsx)("div",{className:su("commentList"),children:(_.length>0||o)&&(0,d.jsx)(eO,{count:e.comments?.length??0,questionId:e.id,list:_,shouldRenderCommentInput:o,currentUserProfile:i?.profile?.photo??void 0,answers:e.answers??[],parentTypedId:e.typedId})})]})]})};var sm=e.i(372378);let s_=W.gql`
  ${sm.QUESTION_DETAIL_FIELDS}
  query GetQuestionDetail($typedId: ID!) {
    question(typedId: $typedId) {
      ...QuestionDetailFields
    }
  }
`;e.s(["__N_SSP",()=>!0,"default",0,()=>{let e=(0,c.useRouter)(),t=e.query.typedId?.toString(),{question:s,loading:i}=(({typedId:e})=>{let{data:t,loading:s}=(0,st.useQuery)(s_,{variables:{typedId:e},skip:!e});return{question:t?.question,loading:s}})({typedId:t}),n=s?.currentUserWatch===S.WatchState.Watched;return((e=>{let{isReady:t}=(0,c.useRouter)();(0,O.useEffect)(()=>{t&&e&&B.Amplitude.logEvent("enter.community_question_page",{...(0,te.pickBy)((0,tt.mapQuestionLesson)(e),e=>!e7((0,te.pickBy)(e,Boolean)))})},[t,e])})(s),!s||i)?(0,d.jsx)(en.CommonLoader,{}):(0,d.jsxs)(u.GeneralLayout,{backgroundWhite:!0,children:[(0,d.jsx)(eZ.CommonHead,{title:s.title,description:s.content?.replace(/<\/?[^>]+(>|$)/g,"").slice(0,150)??s.title,url:`${m.NEXT_PUBLIC_CLIENT_URL}/community/questions/${t}`,canonicalUrl:`${m.NEXT_PUBLIC_CLIENT_URL}/community/questions/${t}`}),(0,d.jsx)(f,{navigation:(0,d.jsx)(v.Navigation,{activeCategory:S.PostBoard.Question}),relatedQuestions:(0,d.jsx)(j,{list:s?.relatedQuestions??[]}),watchToggle:(0,d.jsx)(G,{id:s?.id,watched:n}),question:(0,d.jsx)(sc,{question:s}),answers:(0,d.jsx)(eY,{question:s})})]})}],979712)},876101,(e,t,s)=>{let i="/community/questions/[typedId]";(window.__NEXT_P=window.__NEXT_P||[]).push([i,()=>e.r(979712)]),t.hot&&t.hot.dispose(function(){window.__NEXT_P.push([i])})}]);

//# sourceMappingURL=ae9b2aa38707c7a2.js.map
//# debugId=bf48fe19-d542-5e6c-b95a-a1852bc20550
