
!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{},n=(new e.Error).stack;n&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[n]="e53718d6-01d2-56c7-bda9-476464033d07")}catch(e){}}();
(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,455258,e=>{e.v({_lg:"RedoQuizBox-module-scss-module__VHaV8a___lg",_md:"RedoQuizBox-module-scss-module__VHaV8a___md",_sm:"RedoQuizBox-module-scss-module__VHaV8a___sm",container:"RedoQuizBox-module-scss-module__VHaV8a__container",desktopOnly:"RedoQuizBox-module-scss-module__VHaV8a__desktopOnly",message:"RedoQuizBox-module-scss-module__VHaV8a__message",redoButton:"RedoQuizBox-module-scss-module__VHaV8a__redoButton"})},333470,e=>{e.v({_lg:"QuizViewerLayout-module-scss-module__dEbcqq___lg",_md:"QuizViewerLayout-module-scss-module__dEbcqq___md",_sm:"QuizViewerLayout-module-scss-module__dEbcqq___sm",item:"QuizViewerLayout-module-scss-module__dEbcqq__item"})},96501,e=>{e.v({_lg:"QuizDescriptionItem-module-scss-module__lUQVVW___lg",_md:"QuizDescriptionItem-module-scss-module__lUQVVW___md",_sm:"QuizDescriptionItem-module-scss-module__lUQVVW___sm",container:"QuizDescriptionItem-module-scss-module__lUQVVW__container"})},675125,e=>{e.v({_lg:"QuizChoiceOption-module-scss-module__-oo5XG___lg",_md:"QuizChoiceOption-module-scss-module__-oo5XG___md",_sm:"QuizChoiceOption-module-scss-module__-oo5XG___sm",checked:"QuizChoiceOption-module-scss-module__-oo5XG__checked",container:"QuizChoiceOption-module-scss-module__-oo5XG__container",content:"QuizChoiceOption-module-scss-module__-oo5XG__content",flicker:"QuizChoiceOption-module-scss-module__-oo5XG__flicker",roundBox:"QuizChoiceOption-module-scss-module__-oo5XG__roundBox",wrong:"QuizChoiceOption-module-scss-module__-oo5XG__wrong"})},427045,e=>{e.v({_lg:"GradingResult-module-scss-module__WUJcha___lg",_md:"GradingResult-module-scss-module__WUJcha___md",_sm:"GradingResult-module-scss-module__WUJcha___sm",message:"GradingResult-module-scss-module__WUJcha__message",wrong:"GradingResult-module-scss-module__WUJcha__wrong",xpPoint:"GradingResult-module-scss-module__WUJcha__xpPoint"})},89080,e=>{e.v({_lg:"Solution-module-scss-module__cO8N3q___lg",_md:"Solution-module-scss-module__cO8N3q___md",_sm:"Solution-module-scss-module__cO8N3q___sm",container:"Solution-module-scss-module__cO8N3q__container",hintMessage:"Solution-module-scss-module__cO8N3q__hintMessage",icon:"Solution-module-scss-module__cO8N3q__icon",openButton:"Solution-module-scss-module__cO8N3q__openButton",orange:"Solution-module-scss-module__cO8N3q__orange",quiz:"Solution-module-scss-module__cO8N3q__quiz",red:"Solution-module-scss-module__cO8N3q__red",solution:"Solution-module-scss-module__cO8N3q__solution",solutionContent:"Solution-module-scss-module__cO8N3q__solutionContent",solutions:"Solution-module-scss-module__cO8N3q__solutions",summary:"Solution-module-scss-module__cO8N3q__summary"})},974005,e=>{e.v({_lg:"QuizQuestion-module-scss-module__DpdFha___lg",_md:"QuizQuestion-module-scss-module__DpdFha___md",_sm:"QuizQuestion-module-scss-module__DpdFha___sm",container:"QuizQuestion-module-scss-module__DpdFha__container",content:"QuizQuestion-module-scss-module__DpdFha__content",question:"QuizQuestion-module-scss-module__DpdFha__question"})},764177,e=>{e.v({_lg:"QuizItemLayout-module-scss-module__BKbb5G___lg",_md:"QuizItemLayout-module-scss-module__BKbb5G___md",_sm:"QuizItemLayout-module-scss-module__BKbb5G___sm",cardWrapper:"QuizItemLayout-module-scss-module__BKbb5G__cardWrapper",container:"QuizItemLayout-module-scss-module__BKbb5G__container",controllerBox:"QuizItemLayout-module-scss-module__BKbb5G__controllerBox",inputWrapper:"QuizItemLayout-module-scss-module__BKbb5G__inputWrapper"})},442478,e=>{e.v({_lg:"QuizItem-module-scss-module__dKAqnq___lg",_md:"QuizItem-module-scss-module__dKAqnq___md",_sm:"QuizItem-module-scss-module__dKAqnq___sm",flicker:"QuizItem-module-scss-module__dKAqnq__flicker",hintStatus:"QuizItem-module-scss-module__dKAqnq__hintStatus",solutionBox:"QuizItem-module-scss-module__dKAqnq__solutionBox",wrong:"QuizItem-module-scss-module__dKAqnq__wrong"})},386640,e=>{e.v({_lg:"ExerciseContentViewer-module-scss-module__HrC0Gq___lg",_md:"ExerciseContentViewer-module-scss-module__HrC0Gq___md",_sm:"ExerciseContentViewer-module-scss-module__HrC0Gq___sm",container:"ExerciseContentViewer-module-scss-module__HrC0Gq__container",header:"ExerciseContentViewer-module-scss-module__HrC0Gq__header",submitResultWrapper:"ExerciseContentViewer-module-scss-module__HrC0Gq__submitResultWrapper",viewer:"ExerciseContentViewer-module-scss-module__HrC0Gq__viewer"})},348258,e=>{e.v({_lg:"LessonExerciseSubmitResultSection-module-scss-module__7BDK9a___lg",_md:"LessonExerciseSubmitResultSection-module-scss-module__7BDK9a___md",_sm:"LessonExerciseSubmitResultSection-module-scss-module__7BDK9a___sm",container:"LessonExerciseSubmitResultSection-module-scss-module__7BDK9a__container",detail:"LessonExerciseSubmitResultSection-module-scss-module__7BDK9a__detail",link:"LessonExerciseSubmitResultSection-module-scss-module__7BDK9a__link",submissionInfo:"LessonExerciseSubmitResultSection-module-scss-module__7BDK9a__submissionInfo",submittedAt:"LessonExerciseSubmitResultSection-module-scss-module__7BDK9a__submittedAt"})},841709,e=>{e.v({_lg:"MoreUnreads-module-scss-module__cwBBLG___lg",_md:"MoreUnreads-module-scss-module__cwBBLG___md",_sm:"MoreUnreads-module-scss-module__cwBBLG___sm",container:"MoreUnreads-module-scss-module__cwBBLG__container",label:"MoreUnreads-module-scss-module__cwBBLG__label"})},976948,e=>{e.v({_lg:"MoreUnreads-module-scss-module__Obqsda___lg",_md:"MoreUnreads-module-scss-module__Obqsda___md",_sm:"MoreUnreads-module-scss-module__Obqsda___sm",bounce:"MoreUnreads-module-scss-module__Obqsda__bounce",container:"MoreUnreads-module-scss-module__Obqsda__container",indicator:"MoreUnreads-module-scss-module__Obqsda__indicator",visible:"MoreUnreads-module-scss-module__Obqsda__visible",wrapper:"MoreUnreads-module-scss-module__Obqsda__wrapper"})},731354,e=>{e.v({_lg:"ImageZoomContainer-module-scss-module__zHqGAG___lg",_md:"ImageZoomContainer-module-scss-module__zHqGAG___md",_sm:"ImageZoomContainer-module-scss-module__zHqGAG___sm",container:"ImageZoomContainer-module-scss-module__zHqGAG__container"})},903480,e=>{e.v({_lg:"ImageZoomViewer-module-scss-module__aLTx4a___lg",_md:"ImageZoomViewer-module-scss-module__aLTx4a___md",_sm:"ImageZoomViewer-module-scss-module__aLTx4a___sm",overlay:"ImageZoomViewer-module-scss-module__aLTx4a__overlay"})},113949,e=>{e.v({_lg:"ContentViewer-module-scss-module__B6VQFG___lg",_md:"ContentViewer-module-scss-module__B6VQFG___md",_sm:"ContentViewer-module-scss-module__B6VQFG___sm",container:"ContentViewer-module-scss-module__B6VQFG__container"})},433218,e=>{"use strict";var t,s=e.i(94601),n=e.i(852396),o=e.i(626004),i=e.i(136960),l=e.i(350890),u=e.i(455258),d=e.i(453126);let a=l.default.bind(u.default),r=({onClick:e,lesson:t,topic:n})=>(0,s.jsx)("div",{className:a("container"),children:(0,s.jsxs)("p",{className:a("message"),children:[(0,s.jsx)("span",{className:a("desktopOnly"),children:"ëª¨ë“  ë¬¸ì œë¥¼ ë‹¤ í‘¸ì…¨ì–´ìš”."}),"ë³µìŠµí•´ ë³´ì‹œê² ì–´ìš”?",(0,s.jsx)("button",{type:"button",className:a("redoButton"),onClick:s=>{d.Amplitude.logEvent("click.quiz_reset_button",{lesson:{name:t?.title,id:t?.id},topic:{name:n?.title,id:n?.id}}),e?.(s)},children:"í€´ì¦ˆ ë‹¤ì‹œ í’€ê¸°"})]})});var c=e.i(495266),m=e.i(913324),_=e.i(351623),p=e.i(982742);let x=_.gql`
  ${m.QUIZ_ATTEMPT_FIELDS}
  mutation ResetQuizAttempts($input: ResetQuizAttemptsInput!) {
    resetQuizAttempts(input: $input) {
      studyNote {
        id
        quizAttempts {
          ...QuizAttemptFields
        }
      }
    }
  }
`,h=_.gql`
  mutation GradeQuiz($input: QuizAttemptInput!) {
    gradeQuiz(input: $input)
  }
`,g=_.gql`
  mutation NonMemberGradeQuiz($input: QuizAttemptInput!) {
    nonMemberGradeQuiz(input: $input)
  }
`;var y=e.i(333470),b=e.i(970094),v=e.i(96501);let z=l.default.bind(v.default),f=({content:e})=>{let{theme:t}=(0,b.useCurrentTheme)(),i=e?.replace(/<a/gi,`<img alt="download data" src = "/images/classroom/download-data-${t===n.Classroom_Theme.Dark?"dark":"light"}.svg"/><a`);return(0,s.jsx)(o.GeneralContentViewer,{className:z("container"),content:i})},w=l.default.bind(y.default),q=({content:e,quizzes:t,attempts:o,renderMultipleQuiz:i,renderTextQuiz:l,getQuizNumber:u})=>{let d=t.filter(Boolean);return(0,s.jsxs)("div",{children:[e&&(0,s.jsx)(f,{content:e}),t.map(e=>(0,s.jsx)("div",{className:w("item"),children:e&&(e=>{let t=u?u(e):(d?.findIndex(t=>t?.id===e.id)??0)+1,s=o?.find(t=>t?.id===e.id);switch(e.type){case n.QuizQuestionType.Multiple:return i(t,e,s);case n.QuizQuestionType.Text:return l(t,e,s);default:return null}})(e)},e?.id))]})};var j=e.i(675125),Q=e.i(45872);let C=l.default.bind(j.default),N=({index:e,content:t,checked:n,wrong:i,onClick:l})=>(0,s.jsxs)("div",{role:"button",tabIndex:0,className:C("container","choice"),onClick:l,children:[(0,s.jsx)("div",{className:C("roundBox",{checked:n,wrong:i}),children:n?(0,s.jsx)(Q.Icon,{name:"check",thickness:"bold",color:"#fff",size:"small",className:C("icon")}):(0,s.jsx)("span",{children:e+1})}),(0,s.jsx)(o.GeneralContentViewer,{className:C("content",{checked:n}),content:t})]});var I=e.i(427045);let S=l.default.bind(I.default),B=({isSolved:e,xpPoint:t})=>{let n=(0,i.useMemo)(()=>{switch(!0){case e&&0===t:return"ðŸ‘ðŸ» ì •ë‹µìž…ë‹ˆë‹¤.";case e:return(0,s.jsxs)("span",{children:["ðŸ‘ðŸ» ì •ë‹µìž…ë‹ˆë‹¤.",(0,s.jsx)("span",{className:S("xpPoint"),children:` ${t}XP`}),"ë¥¼ íšë“í•˜ì…¨ì–´ìš”!"]});default:return"âŒ ì •ë‹µì´ ì•„ë‹ˆì—ìš”."}},[e,t]);return(0,s.jsx)("p",{className:S("message",{wrong:!e}),children:n})};var E=e.i(89080);function L(){return(L=Object.assign.bind()).apply(null,arguments)}var A=function(e){return i.createElement("svg",L({width:16,height:16,viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),t||(t=i.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M7.9998 15.1998C11.9763 15.1998 15.1998 11.9763 15.1998 7.9998C15.1998 4.02335 11.9763 0.799805 7.9998 0.799805C4.02335 0.799805 0.799805 4.02335 0.799805 7.9998C0.799805 11.9763 4.02335 15.1998 7.9998 15.1998ZM8.79983 10.7998C8.79983 10.358 8.44166 9.9998 7.99983 9.9998C7.558 9.9998 7.19983 10.358 7.19983 10.7998C7.19983 11.2416 7.558 11.5998 7.99983 11.5998C8.44166 11.5998 8.79983 11.2416 8.79983 10.7998ZM7.1998 8.39981C7.1998 8.84164 7.55798 9.19981 7.9998 9.19981C8.44163 9.19981 8.7998 8.84164 8.7998 8.39981V5.19981C8.7998 4.75798 8.44163 4.39981 7.9998 4.39981C7.55798 4.39981 7.1998 4.75798 7.1998 5.19981V8.39981Z",fill:"var(--green60)"})))},G=e.i(133464);let T={question:30,showHint:-1,showExplanation:-20},V={question:100,showHint:-1,showExplanation:-60};var k=e.i(682930);let O=({isKdcSession:e,isHint:t,point:n})=>e?t?null:(0,s.jsxs)(s.Fragment,{children:["ì–´ë ¤ìš´ ë¶€ë¶„ì€ í•´ì„¤ì„ ì°¸ê³ í•´ ë³´ì„¸ìš”.",(0,s.jsx)("br",{}),"ëª¨ë²” ë‹µì•ˆì„ ì œê³µí•´ë“œë ¤ìš”."]}):(0,s.jsxs)(s.Fragment,{children:["ë ˆìŠ¨ì—ì„œ ì–»ì„ ìˆ˜ ìžˆëŠ” ì ìˆ˜ê°€ ",(0,s.jsxs)("b",{children:[-n," XP"]})," ì°¨ê°ë¼ìš”."]}),H=_.gql`
  ${m.HINT_FIELDS}
  mutation UnlockHint($input: UnlockHintInput!, $studyNoteTypedId: ID!) {
    unlockHint(input: $input) {
      studyNote {
        id
        sawHints
        lesson {
          id
          ... on LessonExercise {
            hints(studyNoteTypedId: $studyNoteTypedId) {
              ...HintFields
            }
          }
          ... on LessonQuiz {
            quizQuestions {
              id
              ... on TextQuiz {
                typedId
              }
              ... on MultipleQuiz {
                typedId
              }
              hints(studyNoteTypedId: $studyNoteTypedId) {
                ...HintFields
              }
            }
          }
        }
      }
    }
  }
`;var M=e.i(605922);let R=_.gql`
  mutation UnlockExplanation($input: UnlockExplanationInput!) {
    unlockExplanation(input: $input) {
      studyNote {
        id
      }
    }
  }
`;var D=e.i(77453),U=e.i(328456),F=e.i(539520);let K=l.default.bind(E.default),$=({studyNoteTypedId:e,quiz:t,hints:n,explanation:l,explanationExist:u,showSummary:d,beforeShowSolution:a,afterShowSolution:r})=>{let{setShowSolution:c,setFocusExplanation:m}=(0,D.useSolutionContext)(),_=n.length,x=(0,i.useMemo)(()=>n.filter(({content:e})=>null!==e).reverse(),[n]),[h,g]=(0,i.useState)(l?[]:[x[0]?.typedId]),y=x.length,b=n.find(({content:e})=>null===e),v=!!b,{open:z}={open:({onConfirm:e,isHint:t,point:n,isKdcSession:o})=>{(0,k.openModal)({icon:"alert",title:t?"ížŒíŠ¸ë¥¼ ì´ìš©í•˜ì‹œê² ì–´ìš”?":"í•´ì„¤ì„ ì´ìš©í•˜ì‹œê² ì–´ìš”?",content:(0,s.jsx)(O,{isKdcSession:o,isHint:t,point:n}),primaryButton:{text:"ì˜ˆ",onClick:async t=>{await e(),t()}},secondaryButton:{text:"ì•„ë‹ˆì˜¤"}})}},{unlockHint:f}=(()=>{let[e]=(0,p.useMutation)(H);return{unlockHint:({hintTypedId:t,studyNoteTypedId:s,quizQuestionTypedId:n})=>e({variables:{input:{hintTypedId:t,studyNoteTypedId:s,quizQuestionTypedId:n},studyNoteTypedId:s}})}})(),{unlock:w}=(()=>{let[e]=(0,p.useMutation)(R,{refetchQueries:["LessonDetail","LessonHints"]});return{unlock:t=>e({variables:{input:t}})}})(),{topic:q}=(0,U.useTopicDetailFromContext)(),{team:j}=(0,F.useMyTeam)(),Q=!!q?.kdcSession,C=j?.options?.lessonAnswerRevealEnabled===!1,N=t?T:V,I=async()=>{try{if(!e)return!0;return b?(await f({hintTypedId:b.typedId,studyNoteTypedId:e,quizQuestionTypedId:t?.typedId}),g([b.typedId])):w({studyNoteTypedId:e,quizQuestionTypedId:t?.typedId}),!0}catch{return!1}},S=()=>{(!a||a())&&z({onConfirm:async()=>{let e=await I();r?.({type:b?"hint":"explanation",success:e})},isHint:v,point:v?N.showHint:N.showExplanation,isKdcSession:Q})};return(0,i.useEffect)(()=>{c(()=>()=>{(v||u&&!l)&&S()})},[n]),(0,i.useEffect)(()=>{l?m(()=>()=>{let e=document.getElementById("solution-explanation");e&&e.scrollIntoView({behavior:"auto"})}):m(()=>()=>null)},[l]),(0,s.jsxs)("div",{className:K("container",{quiz:!!t}),children:[d&&(v||u&&!l)&&(0,s.jsxs)("div",{className:K("summary"),"data-guru":"selection-exclude",children:[_>0&&v&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("span",{className:K("hintMessage"),children:[(0,s.jsx)(A,{className:K("icon",0===y?"green":y<=2||2*y<=_?"orange":"red")}),y,"/",_," ížŒíŠ¸ ì‚¬ìš©"]}),(0,s.jsx)(G.Button,{variant:"tertiary",color:"purple",onClick:S,className:K("openButton"),children:`ížŒíŠ¸ ë³´ê¸°${Q?"":` (${N.showHint}XP)`}`})]}),!v&&!C&&(0,s.jsx)(G.Button,{variant:"tertiary",color:"purple",onClick:S,className:K("openButton"),children:`í•´ì„¤ ë³´ê¸°${Q?"":` (${N.showExplanation}XP)`}`})]}),(0,s.jsxs)("div",{className:K("solutions"),children:[l&&(0,s.jsx)("div",{id:"solution-explanation",className:K("solution"),children:(0,s.jsx)(M.SolutionCard,{title:t?"í€´ì¦ˆ í•´ì„¤":"ì‹¤ìŠµ í•´ì„¤",answers:t?.answers,textAnswers:t?.textAnswers,content:(0,s.jsx)(o.GeneralContentViewer,{content:l,className:K("solutionContent")}),initialOpen:!0})}),x.map(({typedId:e,content:t},n)=>(0,s.jsx)("div",{className:K("solution"),children:(0,s.jsx)(M.SolutionCard,{title:`ížŒíŠ¸ ${x.length-n}`,content:(0,s.jsx)(o.GeneralContentViewer,{content:t,className:K("solutionContent")}),initialOpen:h.includes(e)})},e))]})]})};var P=e.i(93754),W=e.i(974005);let X=l.default.bind(W.default),Z=({quizNumber:e,xpPoint:t,content:n})=>(0,s.jsxs)("div",{className:X("container"),children:[(0,s.jsx)("span",{className:X("question"),children:`ì§ˆë¬¸ ${e}`}),!!t&&(0,s.jsxs)(P.Label,{shape:"round",color:"purple",size:"small",children:[t," XP"]}),(0,s.jsx)(o.GeneralContentViewer,{content:n,className:X("content")})]});var J=e.i(764177);let Y=l.default.bind(J.default),ee=({quizInput:e,quizNumber:t,xpPoint:n,content:o,controllerBox:i})=>(0,s.jsxs)("div",{className:Y("container"),children:[(0,s.jsx)(Z,{quizNumber:t,xpPoint:n,content:o??""}),(0,s.jsx)("div",{className:Y("inputWrapper"),children:e}),(0,s.jsx)("div",{className:Y("controllerBox"),children:i})]}),et=e=>{let t=!!e?.pass,s="boolean"==typeof e?.pass,n=s&&!e?.pass;return{passed:t,isSubmitted:s,isWrong:n}};var es=e.i(148660);let en=({quizInput:e,quizNumber:t,quiz:n,attempt:o,readOnly:i,onSubmit:l,lesson:u,topic:a,answers:r,hints:c,explanation:m})=>{let _=(0,es.useInvalidEnrollmentAlert)({alertType:"feature"}),{passed:p,isSubmitted:x}=et(o),h=!!o?.sawExplanation,g=o?.sawHints,y=!!a?.kdcSession,b=p||y?0:T.question+T.showHint*(g?.length??0)+(h?T.showExplanation:0),v=()=>!i||(_(),!1);return(0,s.jsx)(ee,{quizInput:e,quizNumber:t,xpPoint:b,content:n.content??"",controllerBox:(0,s.jsxs)(s.Fragment,{children:[x?(0,s.jsx)(B,{isSolved:p,xpPoint:b}):(0,s.jsx)(G.Button,{variant:"primary",size:"medium",onClick:()=>{v()&&l()},children:"ì •ë‹µ í™•ì¸"}),(0,s.jsx)($,{studyNoteTypedId:u?.studyNote?.typedId??"",quiz:{typedId:n.typedId,answers:(e=>{if(e&&e.length)return e.filter(e=>!!e).map(e=>e.charCodeAt(0)-64)})(n.answers),textAnswers:(e=>{if(e&&e.length)return Object.values(e.filter(e=>!!e&&e.every(e=>!!e)).map(e=>e.join(", ")).reduce((e,t)=>{let s=t.replace(/\s/g,"").toUpperCase();return e[s]||(e[s]=t),e},{}))})(n.textAnswers)},showSummary:!p,hints:c??[],explanation:m??void 0,explanationExist:!!n.explanationExists,beforeShowSolution:v,afterShowSolution:({success:e,type:s})=>{e?d.Amplitude.logEvent(`click.quiz_${"hint"===s?"hint":"solution"}_button`,(({lesson:e,topic:t,quizNumber:s,answers:n})=>{let o=e?.quizQuestions?.[(s??1)-1];return{lesson:{name:e?.title,id:e?.id},topic:{name:t?.title,id:t?.id},quiz:{id:o?.id,content:o?.content,question_type:o?.type,choice:n,number:s}}})({lesson:u,topic:a,quizNumber:t,answers:r})):(0,k.openModal)({title:"ížŒíŠ¸/í•´ì„¤ ë³´ê¸°ì— ì˜¤ë¥˜ê°€ ë°œìƒí–ˆì–´ìš”.",primaryButton:{text:"í™•ì¸"}})}})]})})},eo=(e,t)=>{let[s,n]=(0,i.useState)(e),o=(0,i.useRef)(t);return(0,i.useEffect)(()=>{o.current&&!t&&n([]),o.current=t},[t]),{answers:s,setAnswers:n}},ei=({quizNumber:e,quiz:t,attempt:n,readOnly:o,onSubmit:i,onResetAttempt:l,lesson:u,topic:d,hints:a,explanation:r})=>{let c=(0,es.useInvalidEnrollmentAlert)({alertType:"feature"}),{passed:m,isWrong:_}=et(n),{answers:p,setAnswers:x}=eo(n?.pass?t.answers??[]:[],m);return(0,s.jsx)(en,{quizInput:t.choices?.map((e,n)=>{let i=String.fromCharCode(n+65),u=p.includes(i);return(0,s.jsx)(N,{index:n,content:e??"",wrong:_&&u,checked:u,onClick:()=>{o?c():!m&&!o&&(l(t.id),x(e=>e.includes(i)?e.filter(e=>e!==i):(t.answers?.length??0)>1?[...e,i].sort():[i]))}},e)}),quizNumber:e,quiz:t,attempt:n,readOnly:o,onSubmit:()=>{i(t.id,p)},lesson:u,answers:p,topic:d,hints:a,explanation:r})};var el=e.i(534712),eu=e.i(442478);let ed=l.default.bind(eu.default),ea=({quizNumber:e,attempt:t,lesson:n,quiz:o,readOnly:i,onSubmit:l,onResetAttempt:u,topic:d,hints:a,explanation:r})=>{let c=(0,es.useInvalidEnrollmentAlert)({alertType:"feature"}),{passed:m,isWrong:_}=et(t),{answers:p,setAnswers:x}=eo(t?.pass?o.textAnswers?.[0]??[]:[],m);return(0,s.jsx)(en,{quizInput:(0,s.jsx)(el.InputTextField,{value:p,placeholder:"ì •ë‹µì„ ì •í™•ížˆ ìž…ë ¥í•´ì£¼ì„¸ìš”",onChange:({target:{value:e}})=>{i?c():m||i||(x(((e,t)=>{let s=e.includes(",")&&t;switch(!0){case!e:return[];case s:return e.split(",");default:return[e]}})(e,o.textAnswers?.length!==1||o.textAnswers[0]?.length!==1)),u(o.id))},onKeyPress:e=>{"Enter"===e.key&&l(o.id,p)},className:ed({wrong:_}),disabled:m}),quizNumber:e,quiz:o,attempt:t,readOnly:i,onSubmit:()=>{l(o.id,p)},lesson:n,answers:p,topic:d,hints:a,explanation:r})};var er=e.i(357678),ec=e.i(829882),em=e.i(292765),e_=e.i(585223);let ep=()=>{let{topicResourceKey:e,lessonResourceKey:t}=(0,e_.useResourceKeyContext)(),{topic:n}=(0,U.useTopicDetailFromContext)(),{lesson:o}=(0,ec.useLessonDetailFromContext)(),{lesson:l}=(0,em.useLessonHints)({input:{topicResourceKey:e,lessonResourceKey:t}}),{resetQuiz:u}=(()=>{let[e]=(0,p.useMutation)(x,{refetchQueries:["LessonDetail","LessonHints"]});return{resetQuiz:t=>e({variables:{input:{studyNoteTypedId:t}}})}})(),a=(e=>{let{cache:t}=(0,c.useApolloClient)();return s=>{e&&t.modify({id:t.identify(e),fields:{quizAttempts:(e,{canRead:n,readField:o,toReference:i})=>e?.map(e=>{if(e){let l=n(e)?o("id",e):null;if(l===s)return i(t.updateFragment({id:`QuizAttempt:${l}`,fragment:m.QUIZ_ATTEMPT_FIELDS},e=>({...e,pass:null})))}return e})}})}})(o?.studyNote??void 0),{isSubscribed:_}=(0,er.useMySubscription)(),{isAllPassed:y}={isAllPassed:(0,i.useMemo)(()=>{let e=o?.studyNote?.quizAttempts??[];return o?.quizQuestions?.every(t=>!!e?.find(e=>e?.id===t?.id)?.pass)},[o])},b=(({lesson:e,topic:t,isSubscribed:s})=>{let n=!!e?.trialLesson||!!t?.isTrial,o=async(t,{data:s},{variables:n})=>{let o=e?.studyNote,i=n?.input?.lessonId,l=n?.input?.quizId;if(o&&i&&l){let e=t.readFragment({id:`QuizAttempt:${l}`,fragment:m.QUIZ_ATTEMPT_FIELDS}),n={__typename:"QuizAttempt",id:l,sawHints:[],sawExplanation:!1,...e??{},pass:!!(s?.gradeQuiz||s?.nonMemberGradeQuiz)};t.modify({id:t.identify(o),fields:{quizAttempts:(e,{canRead:t,readField:s})=>[...e?.filter(e=>!!e&&(t(e)?s("id",e):e.id)!==l)??[],n]}})}},[i,{client:l}]=(0,p.useMutation)(h,{update:o}),[u]=(0,p.useMutation)(g,{update:o});return async e=>{if(s||n){let t=await i({variables:{input:e}});return t.data?.gradeQuiz&&l.refetchQueries({include:["LessonDetail","LessonHints"]}),t.data?.gradeQuiz}await u({variables:{input:e}})}})({lesson:o,topic:n,isSubscribed:_}),v=async(e,t)=>{if(!(t&&!(t.length<1)&&t.some(e=>e.trim())))return void(0,k.openModal)({title:"ê°’ì„ ìž…ë ¥í•´ì£¼ì…”ì•¼ í•©ë‹ˆë‹¤",primaryButton:{text:"í™•ì¸"}});if(!n?.currentUserEnrollment||!o?.studyNote)return;let s=await b({lessonId:o.id,enrollmentId:n?.currentUserEnrollment?.id,quizId:e,attempt:t});(({lesson:e,topic:t,quizId:s,choice:n,pass:o})=>{let i=(e?.quizQuestions?.findIndex(e=>e?.id===s)??0)+1,l=e?.quizQuestions?.find(e=>e?.id===s);d.Amplitude.logEvent("click.quiz_result_try",{topic:{id:t?.id},lesson:{id:e.id,name:e.title},quiz:{id:s,content:l?.content,question_type:l?.type,choice:n,number:i},pass:o})})({lesson:o,quizId:e,choice:t,pass:s})},z=!n?.currentUserEnrollment?.id&&!(o?.trialLesson&&_);return(0,s.jsxs)("div",{children:[y&&(0,s.jsx)(r,{onClick:()=>{o?.studyNote?.typedId&&u(o.studyNote.typedId)},lesson:o}),(0,s.jsx)(q,{content:o?.content,quizzes:o?.quizQuestions?.filter(e=>e?.id)??[],attempts:o?.studyNote?.quizAttempts?.filter(e=>e)??[],renderMultipleQuiz:(e,t,i)=>{let u=l?.quizQuestions?.find(e=>e.id===t.id);return(0,s.jsx)(ei,{lesson:o,quizNumber:e,quiz:t,attempt:i??void 0,readOnly:z,onSubmit:v,onResetAttempt:a,topic:n,hints:u?.hints??null,explanation:u?.explanation??null})},renderTextQuiz:(e,t,i)=>{let u=l?.quizQuestions?.find(e=>e.id===t.id);return(0,s.jsx)(ea,{lesson:o,quizNumber:e,quiz:t,attempt:i??void 0,readOnly:z,onSubmit:v,onResetAttempt:a,topic:n,hints:u?.hints??null,explanation:u?.explanation??null})}}),(0,s.jsx)("br",{})]})};var ex=e.i(386640),eh=e.i(348258),eg=e.i(995745);let ey=l.default.bind(eh.default),eb=({submission:e,projectLessonSubmission:t,actionButton:n,reSubmitTextButton:o})=>(0,s.jsxs)("div",{className:ey("container"),children:[e&&t&&(0,s.jsxs)("div",{className:ey("submissionInfo"),children:[t.url&&(0,s.jsx)("a",{href:t.url,rel:"noreferrer",target:"_blank",children:(0,s.jsx)(G.Button,{variant:"text",size:"small",className:ey("link"),children:"ê²°ê³¼ë¬¼ ë³´ê¸°"})}),(0,s.jsxs)("div",{className:ey("detail"),children:[e.submittedAt&&(0,s.jsxs)("p",{className:ey("submittedAt"),children:["ìµœê·¼ ì œì¶œ ì¼ì‹œ ",(0,eg.formatKoreanDateTime)(e.submittedAt)]}),o]})]}),n]});var ev=e.i(426521);let ez=()=>{let{lesson:e}=(0,ec.useLessonDetailFromContext)(),{enableShowReview:t,handleSubmitResult:o,handleShowReview:i,isReSubmit:l}=(0,ev.useLessonSubmissionControl)(),u=(()=>{if(e?.submissionType)return t?(0,s.jsx)(G.Button,{size:{l:"medium",s:"small"},variant:"secondary",onClick:i,children:"í”¼ë“œë°± ë³´ê¸°"}):(0,s.jsx)(G.Button,{variant:"secondary",onClick:o,size:{l:"medium",s:"small"},type:"button",rightIcon:l?"rotateRight":void 0,children:l?"ë‹¤ì‹œ ì œì¶œí•˜ê¸°":"ê²°ê³¼ë¬¼ ì œì¶œí•˜ê¸°"})})();return e?.language===n.Language.Null&&e?.submissionType?(0,s.jsx)(eb,{submission:e.studyNote?.submission,projectLessonSubmission:e.studyNote?.projectLessonSubmission,actionButton:u,reSubmitTextButton:t?(0,s.jsx)(G.Button,{variant:"text",size:"small",color:"gray",onClick:o,children:"ë‹¤ì‹œ ì œì¶œ"}):void 0}):null},ef=l.default.bind(ex.default),ew=()=>{let{topicResourceKey:e,lessonResourceKey:t}=(0,e_.useResourceKeyContext)(),{lesson:l}=(0,ec.useLessonDetailFromContext)(),{topic:u}=(0,U.useTopicDetailFromContext)(),a=!!u?.kdcSession,{lesson:r}=(0,em.useLessonHints)({input:{topicResourceKey:e,lessonResourceKey:t}}),c=l?.studyNote?.status,m=c===n.StudyNoteStatus.CompletedContent||c===n.StudyNoteStatus.Passed,_=l?.studyNote?.sawHints,p=!!l?.studyNote?.sawExplanation,x=m?0:V.question+V.showHint*(_?.length??0)+(p?V.showExplanation:0),{isSubscribed:h}=(0,er.useMySubscription)(),g=(0,es.useInvalidEnrollmentAlert)({alertType:"feature"});return(0,i.useEffect)(()=>{l?.gradingType===n.ExerciseGradingType.Self&&0===(l.guides??[]).length&&alert("ë¬¸ì œê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤. ì½”ë“œìž‡ì— ì œë³´í•´ ì£¼ì„¸ìš”. (ì…€í”„ì±„ì ì¸ë° ê°€ì´ë“œê°€ ë¹„ì–´ìžˆìŠµë‹ˆë‹¤)")},[]),(0,s.jsxs)("div",{className:ef("container"),children:[(0,s.jsx)("div",{className:ef("header"),children:!m&&!a&&(0,s.jsxs)(P.Label,{shape:"round",color:"purple",size:"small",children:[x," XP"]})}),(0,s.jsx)("div",{className:ef("viewer"),children:(0,s.jsx)(o.GeneralContentViewer,{content:l?.content??""})}),(0,s.jsx)("div",{className:ef("submitResultWrapper"),children:(0,s.jsx)(ez,{})}),(0,s.jsx)($,{studyNoteTypedId:l?.studyNote?.typedId??"",hints:r?.hints??[],explanation:r?.explanation,explanationExist:!!l?.explanationExists,showSummary:!m,beforeShowSolution:()=>!!(!u?.id||u?.currentUserEnrollment||l?.trialLesson&&!h)||(g(),!1),afterShowSolution:({type:e,success:t})=>{t?d.Amplitude.logEvent(`click.exercise_${"hint"===e?"hint":"solution"}_button`,{lesson:{id:l?.id,name:l?.title},topic:{id:u?.id,name:u?.title}}):(0,k.openModal)({title:"ížŒíŠ¸/í•´ì„¤ ë³´ê¸°ì— ì˜¤ë¥˜ê°€ ë°œìƒí–ˆì–´ìš”.",primaryButton:{text:"í™•ì¸"}})}})]})};var eq=e.i(805244);let ej="captionOption",eQ={};var eC=e.i(896567);let eN="playbackRate";var eI=e.i(841709);let eS=l.default.bind(eI.default),eB=()=>(0,s.jsxs)("div",{className:eS("container"),children:[(0,s.jsx)(Q.Icon,{name:"direction",thickness:"bold",rotate:180,size:"small"}),(0,s.jsx)("span",{className:eS("label"),children:"ë‚´ìš© ë” ë³´ê¸°"})]});var eE=e.i(976948);let eL=l.default.bind(eE.default),eA=e=>e?e.scrollHeight>e.clientHeight?e:eA(e.parentElement):null,eG=()=>{let e=(0,i.useRef)(null),[t,n]=(0,i.useState)(!1);return(0,i.useEffect)(()=>{let t=e.current,s=new IntersectionObserver(e=>{n(!(!e[0]||e[0]?.isIntersecting||e[0].boundingClientRect.y<100))},{threshold:1});return setTimeout(()=>{t&&s.observe(t)}),()=>{s.disconnect()}},[]),(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{className:eL("wrapper"),children:(0,s.jsx)("div",{ref:e,className:eL("indicator")})}),(0,s.jsx)("div",{className:eL("container",{visible:t}),children:(0,s.jsx)("button",{type:"button",onClick:()=>{let t=eA(e.current);t&&t.scrollBy({behavior:"smooth",top:200})},children:(0,s.jsx)(eB,{})})})]})};var eT=e.i(731354),eV=e.i(453248),ek=e.i(18287),eO=e.i(903480);let eH=l.default.bind(eO.default),eM=({src:e,onClose:t})=>(0,s.jsx)(eV.Portal,{selector:"#modal",children:(0,s.jsx)(ek.ScreenOverlay,{className:eH("overlay"),onClick:t,children:(0,s.jsx)("img",{src:e,alt:e,onClick:e=>{e.stopPropagation(),t()}})})}),eR=l.default.bind(eT.default),eD=({children:e})=>{let[t,n]=(0,i.useState)();return(0,s.jsxs)("div",{onClick:e=>{let t=e.target,s=t.closest(".choice");!t||t.tagName?.toLowerCase()!=="img"||!t.src||s||t.classList.contains("zoomDisabled")||t.classList.contains("w-css-reset")||n(t.src)},role:"article",className:eR("container"),children:[e,!!t&&(0,s.jsx)(eM,{src:t,onClose:()=>n(void 0)})]})};var eU=e.i(113949),eF=e.i(804623);let eK=l.default.bind(eU.default);e.s(["ContentViewer",0,({timestamp:e})=>{let{lesson:t}=(0,ec.useLessonDetailFromContext)(),{topic:i}=(0,U.useTopicDetailFromContext)();return(0,eq.useWistiaApi)({options:{plugin:{"captions-v1":(()=>{let e=localStorage.getItem(ej);if(e)try{return JSON.parse(e)}catch(e){}return eQ})()},time:e?`${e}`:void 0,autoPlay:!!e},onReady:s=>{var n,o;e&&s?.time(e),s.bind("play",()=>{let e=(0,eC.getLocalStorage)(eN)||1;s.playbackRate(e)}),s.bind("playbackratechange",e=>{(0,eC.setLocalStorage)(eN,e.toString())}),n=t&&{id:t.id,name:t.title},o=i&&{id:i.id,name:i.title},s.bind("captionschange",e=>{d.Amplitude.logEvent("click.lesson_video_caption_button",{status:e.visible?"on":"off",lesson:n,topic:o})}),s.bind("captionschange",e=>{let t={onByDefault:e.visible};e.visible&&(t.language=e.language),localStorage.setItem(ej,JSON.stringify(t))})},reloadKey:t?.id}),(0,s.jsxs)(eD,{children:[(()=>{switch(t?.type){case n.LessonType.Quiz:return(0,s.jsx)(ep,{});case n.LessonType.Exercise:return(0,s.jsx)(ew,{});default:return(0,s.jsx)("div",{className:eK("container"),children:(0,s.jsx)(o.GeneralContentViewer,{content:t?.content??void 0})})}})(),(0,s.jsx)(eF.Tooltip,{id:"classroom-content-clipboard",content:"ë³µì‚¬í•˜ê¸°"}),t?.type===n.LessonType.Video&&(0,s.jsx)(eG,{})]})}],433218)},795987,e=>{e.n(e.i(433218))}]);

//# sourceMappingURL=64e753106b433a23.js.map
//# debugId=e53718d6-01d2-56c7-bda9-476464033d07
